(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var h,x,w,n,E,_,i,s,o,r,l,a,S,O,d,k,L,$,q,c,u,A,M,U,e;function X(){var e;try{var t,a=Spicetify.LocalStorage.get(r);return a?{autoEnabled:null!=(e=(t=JSON.parse(a)).autoEnabled)?e:l.autoEnabled,autoIntervalMs:("number"==typeof t.autoIntervalMs&&0<t.autoIntervalMs?t:l).autoIntervalMs,maxAutosnapshots:("number"==typeof t.maxAutosnapshots&&0<t.maxAutosnapshots?t:l).maxAutosnapshots,autoMode:"timer"===t.autoMode?"timer":"on-change",onlyNewItems:!1!==t.onlyNewItems,queueWarnEnabled:!1!==t.queueWarnEnabled,queueMaxSize:("number"==typeof t.queueMaxSize&&1<t.queueMaxSize?t:l).queueMaxSize,queueWarnThreshold:("number"==typeof t.queueWarnThreshold&&0<=t.queueWarnThreshold?t:l).queueWarnThreshold,promptManualBeforeReplace:!1!==t.promptManualBeforeReplace}:l}catch(e){return l}}function C(){try{var e,t=Spicetify.LocalStorage.get(a);return t?(e=JSON.parse(t),Array.isArray(e)?e:[]):[]}catch(e){return[]}}function t(e){return e.sort((e,t)=>t.createdAt-e.createdAt)}function N(e){t(e),Spicetify.LocalStorage.set(a,JSON.stringify(e))}function p(){return t(C())}function Q(e,t){var t=null!=t?t:X(),a=C(),n=a.filter(e=>"manual"===e.type),a=a.filter(e=>"auto"===e.type);"auto"===e.type?(t=[e,...a].slice(0,t.maxAutosnapshots),N([...n,...t])):N([e,...n,...a])}function m(e){return Number.isFinite(e)&&0<e}function H(e){var t,{track:a,bar:n}=(e=>{let t,a,n=null!=(t=e.querySelector(".qs-toast-progress"))?t:null,i=null!=(a=null==n?void 0:n.querySelector(".qs-toast-progress__bar"))?a:null;return n?n.classList.contains("qs-toast-progress--hidden")||n.classList.contains("qs-toast-progress--visible")||n.classList.add("qs-toast-progress--hidden"):((n=document.createElement("div")).className="qs-toast-progress qs-toast-progress--hidden",n.setAttribute("aria-hidden","true")),i?i.parentElement!==n&&n.appendChild(i):((i=document.createElement("div")).className="qs-toast-progress__bar",i.style.transform="scaleX(0)",n.appendChild(i)),n.parentElement===e&&!n.nextSibling||e.appendChild(n),{track:n,bar:i}})(e);let i=L.get(e);return i?(i.progressTrack=a,i.progressBar=n):(t=performance.now(),i={timeoutId:void 0,rafId:void 0,startTime:t,endTime:t,remaining:1/0,totalDuration:1/0,progressTrack:a,progressBar:n},L.set(e,i)),i}function f(e,t){let a=L.get(e);(a=a&&a.progressTrack&&a.progressBar?a:H(e)).progressTrack&&a.progressBar&&(null===t||Number.isNaN(t)||t<0?(a.progressTrack.classList.remove("qs-toast-progress--visible"),a.progressTrack.classList.add("qs-toast-progress--hidden"),a.progressBar.style.transform="scaleX(0)"):(e=Math.min(1,Math.max(0,t)),a.progressTrack.classList.remove("qs-toast-progress--hidden"),a.progressTrack.classList.add("qs-toast-progress--visible"),a.progressBar.style.transform=`scaleX(${e})`))}function J(e){var t=L.get(e);if(t&&m(t.remaining))return t.remaining<=0?void D(e):void I(e,t.remaining,!1);t=(e=>(e=e.dataset.toastDuration)&&(e=Number(e),Number.isFinite(e))&&0<e?e:null)(e);t&&m(t)?I(e,t):f(e,null)}function V(e){if("string"!=typeof e)return e;e=e.trim();if(e.length)return e;throw new Error(S+" toast message cannot be empty")}function Y(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);"string"==typeof t?e.textContent=t:e.appendChild(t)}function K(e,t){0<t&&isFinite(t)?e.dataset.toastDuration=String(t):delete e.dataset.toastDuration}function I(e,t,a=!0){var n,i=H(e);T(e),t<=0||!isFinite(t)?(i.remaining=1/0,i.endTime=1/0,f(e,null)):(n=performance.now(),i.startTime=n,i.endTime=n+t,i.remaining=t,a&&(i.totalDuration=t),f(e,i.totalDuration<=0?1:1-i.remaining/i.totalDuration),i.timeoutId=window.setTimeout(()=>{D(e)},t),i.rafId=window.requestAnimationFrame(()=>function e(t){var a,n,i=L.get(t);i&&(m(i.totalDuration)?(a=performance.now(),a=Math.max(0,i.endTime-a),i.remaining=a,n=i.totalDuration<=0?1:1-a/i.totalDuration,f(t,n),i.rafId=0<a?window.requestAnimationFrame(()=>e(t)):void 0):(f(t,null),i.rafId=void 0))}(e)))}function T(e){e=L.get(e);e&&("number"==typeof e.timeoutId&&(clearTimeout(e.timeoutId),e.timeoutId=void 0),"number"==typeof e.rafId)&&(cancelAnimationFrame(e.rafId),e.rafId=void 0)}function D(e,t="default"){T(e),L.delete(e),e.classList.remove("qs-toast--enter","qs-toast--swipe-exit"),e.classList.add("swipe"===t?"qs-toast--swipe-exit":"qs-toast--exit");let a,n=()=>{e.removeEventListener("transitionend",n),e.removeEventListener("animationend",n),void 0!==a&&window.clearTimeout(a),e.remove(),k&&!k.childElementCount&&(k.remove(),k=null)};e.addEventListener("transitionend",n),e.addEventListener("animationend",n),a=window.setTimeout(n,450),e.setAttribute("aria-hidden","true")}function g(t,a={}){let{tone:e="default",duration:n=3600,dismissible:i,id:s}=a;k&&document.body.contains(k)||((k=document.createElement("div")).className="qs-toast-container",k.setAttribute("role","region"),k.setAttribute("aria-live","polite"),k.setAttribute("aria-label","Notifications"),document.body.appendChild(k));a=k;if(s){let e=Array.from(a.children).find(e=>e instanceof HTMLElement&&e.dataset.toastId===s);if(e)return e.classList.remove("qs-toast--exit"),e.dataset.toastId=s,(r=e.querySelector(".qs-toast-message"))&&Y(r,V(t)),K(e,n),I(e,n),{close:()=>D(e),element:e}}let o=document.createElement("div");o.className="qs-toast qs-toast--"+e,o.setAttribute("role","status"),o.setAttribute("aria-live","danger"===e?"assertive":"polite"),s&&(o.dataset.toastId=s);var r=document.createElement("div"),l=(r.className="qs-toast-content",document.createElement("div")),d=(l.className="qs-toast-title",l.textContent=S,document.createElement("div")),t=(d.className="qs-toast-message",V(t)),t=(Y(d,t),document.createElement("button")),c=(t.type="button",t.className="qs-toast-close",t.setAttribute("aria-label","Dismiss notification"),t.innerHTML="&times;",t.addEventListener("click",e=>{e.preventDefault(),D(o)}),null!=i?i:!(0<n&&isFinite(n)));!c&&0<n&&isFinite(n)&&t.classList.add("qs-toast-close--hidden"),r.appendChild(l),r.appendChild(d),o.appendChild(r),o.appendChild(t),a.appendChild(o),o.offsetWidth,o.classList.add("qs-toast--enter"),K(o,n),I(o,n),o.addEventListener("mouseenter",()=>{T(o);var e,t=L.get(o);t&&Number.isFinite(t.remaining)&&(e=performance.now(),t.remaining=Math.max(0,t.endTime-e))}),o.addEventListener("mouseleave",()=>{J(o)});let u=0,p=0,m=!1,f=80,g=e=>{m&&((e=(p=e)-u)<0?(e=Math.max(e,-200),o.style.transform=`translateX(${e}px)`,o.style.opacity=String(Math.max(0,1-Math.abs(e)/160))):(o.style.transform="translateX(0px)",o.style.opacity="1"))},v=e=>{m=!1,o.classList.remove("qs-toast--dragging"),o.style.removeProperty("transition"),o.style.removeProperty("transform"),o.style.removeProperty("opacity"),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",q),document.removeEventListener("touchcancel",w),e?D(o,"swipe"):(o.classList.add("qs-toast--enter"),J(o))},y=()=>{m&&v(!1)},b=e=>{g(e.clientX),m&&e.preventDefault()},h=e=>{m&&(e=e.clientX-u,v(e<=-f))},x=e=>{var t;m&&(t=e.touches[0])&&(g(t.clientX),e.preventDefault())},q=e=>{m&&((e=e.changedTouches[0])?(e=e.clientX-u,v(e<=-f)):v(!1))},w=()=>{m&&v(!1)},E=e=>{m=!0,u=e,p=e,o.classList.add("qs-toast--dragging"),T(o),o.style.transition="none"};return o.addEventListener("mousedown",e=>{0===e.button&&(E(e.clientX),document.addEventListener("mousemove",b),document.addEventListener("mouseup",h),window.addEventListener("blur",y,{once:!0}))}),o.addEventListener("touchstart",e=>{e=e.touches[0];e&&(E(e.clientX),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("touchend",q),document.addEventListener("touchcancel",w),window.addEventListener("blur",y,{once:!0}))}),{close:()=>D(o),element:o}}function z(e,t={}){g(e,s({tone:"danger"},t))}function P(e,t={}){g(e,s({tone:"success"},t))}function j(e,t={}){g(e,s({tone:"warning"},t))}function W(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function F(e,t){var a=e.querySelector(".qs-btn-label");a?a.textContent=t:e.textContent=t}function G(){return Date.now()+"-"+Math.random().toString(36).slice(2,8)}async function Z(e,t){try{var a=JSON.stringify(t,null,2),n=new Blob([a],{type:"application/json"}),i=window;if(i&&"function"==typeof i.showSaveFilePicker)try{var s=await(await i.showSaveFilePicker({suggestedName:e,types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]})).createWritable();return await s.write(n),void await s.close()}catch(e){if(e&&("AbortError"===e.name||"NotAllowedError"===e.name))return void j("Export canceled")}var o=URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=e,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(o),P(`Exported ${e} to Downloads folder`)}catch(e){console.warn(S+": downloadJson failed",e),z("Failed to export JSON")}}async function ee(t){let a,i=new Array(t.length).fill(""),s=[],o=[];t.forEach((e,t)=>{var a,n;e.startsWith("spotify:local:")?i[t]=(t=>{var a=(t=t.split(":"))[2]||"Local",t=t[4]||"track";try{return decodeURIComponent(a.replace(/\+/g," "))+" - "+decodeURIComponent(t.replace(/\+/g," "))}catch(e){return a+" - "+t}})(e):({type:a,id:n}=(e=>{if(3<=(e=e.split(":")).length){if("track"===e[1])return{type:"track",id:e[2]};if("episode"===e[1])return{type:"episode",id:e[2]}}return{type:null,id:null}})(e),"track"===a&&n?s.push({idx:t,id:n}):"episode"===a&&n?o.push({idx:t,id:n}):i[t]=e)});for(let e=0;e<s.length;e+=50){var n=s.slice(e,e+50),r=n.map(e=>e.id).join(",");try{var l,d,c,u,p=await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/tracks?ids="+r),m=Array.isArray(null==p?void 0:p.tracks)?p.tracks:[],f=new Map;for(l of m)null!=l&&l.id&&null!=l&&l.name&&(c=(d=Array.isArray(null==l?void 0:l.artists)?l.artists.map(e=>null==e?void 0:e.name).filter(Boolean).join(", "):"")?d+" - "+l.name:l.name,f.set(l.id,c));for(u of n)i[u.idx]=f.get(u.id)||t[u.idx]}catch(e){for(var g of n)i[g.idx]=t[g.idx]}}if(o.length)for(let e=0;e<o.length;e+=50){var v=o.slice(e,e+50),y=v.map(e=>e.id).join(",");try{var b,h,x,q,w=await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/episodes?ids="+y),E=Array.isArray(null==w?void 0:w.episodes)?w.episodes:[],k=new Map;for(b of E)null!=b&&b.id&&null!=b&&b.name&&(x=(h=null==(a=null==b?void 0:b.show)?void 0:a.name)?h+" - "+b.name:b.name,k.set(b.id,x));for(q of v)i[q.idx]=k.get(q.id)||t[q.idx]}catch(e){for(var S of v)i[S.idx]=t[S.idx]}}return i}function te(e){return("auto"===e.type?"Auto":"Manual")+" "+(t=>{try{return new Date(t).toLocaleString()}catch(e){return""+t}})(e.createdAt)}function ae(e){return e.name||te(e)}function ne(e){return"string"==typeof e&&e.startsWith("spotify:")?e:e&&"string"==typeof e.uri&&e.uri.startsWith("spotify:")?e.uri:e&&e.contextTrack&&"string"==typeof e.contextTrack.uri&&e.contextTrack.uri.startsWith("spotify:")?e.contextTrack.uri:e&&e.track&&"string"==typeof e.track.uri&&e.track.uri.startsWith("spotify:")?e.track.uri:e&&e.item&&"string"==typeof e.item.uri&&e.item.uri.startsWith("spotify:")?e.item.uri:null}function ie(){var t,a,n;try{var i,s=Spicetify.Queue,o=[],r=ne(null==s?void 0:s.track)||ne(null==(a=null==(t=Spicetify.Player)?void 0:t.data)?void 0:a.item),l=(r&&o.push(r),(null==s?void 0:s.nextTracks)||[]);let e=0;for(i of Array.isArray(l)?l:[]){var d,c=null==i?void 0:i.provider,u=(null==(n=null==i?void 0:i.contextTrack)?void 0:n.metadata)||(null==i?void 0:i.metadata),p=!0===(null==u?void 0:u.is_queued)||"true"===(null==u?void 0:u.is_queued);("queue"===c||p)&&(d=ne(i))&&(o.push(d),e++)}var m=o.length?(e=>{var t,a=[];let n=null;for(t of e)t&&t!==n&&a.push(t),n=t;return a})(o):[];return console.log(S+": Spicetify.Queue -> now=%s queuedNext=%d total=%d",Boolean(r),e,m.length),m}catch(e){return console.error(S+": Spicetify.Queue read failed",e),[]}}function se(e){return"danger"===e||"primary"===e||"subtle"===e?e:"default"}function oe(){var e=document.createElement("div");return e.className="qs-confirm-backdrop",document.body.appendChild(e),e}function re(e){var t=document.createElement("div");return t.className="qs-confirm-dialog",e.appendChild(t),t}function le(e){if(q)return Promise.resolve("cancel");q=!0;let{title:m,message:f,confirmLabel:g="Confirm",cancelLabel:v="Cancel",tone:y,extraLabel:b,extraTone:h}=e;return new Promise(t=>{let a=oe();var e=re(a),n=(m&&((n=document.createElement("div")).className="qs-confirm-title",n.textContent=m,e.appendChild(n)),document.createElement("div")),n=(n.className="qs-confirm-message",n.textContent=f,e.appendChild(n),document.createElement("div")),i=(n.className="qs-confirm-actions",document.createElement("button"));i.type="button",i.className="qs-btn subtle",i.textContent=v;let s=document.createElement("button");s.type="button";var o=se(y),r=["qs-btn"];r.push("default"!==o?o:"primary"),s.className=r.join(" "),s.textContent=g;let l=null,d=(b&&((l=document.createElement("button")).type="button",o=se(h),(r=["qs-btn"]).push("default"===o?"subtle":o),l.className=r.join(" "),l.textContent=b),l?n.append(i,l,s):n.append(i,s),e.appendChild(n),document.activeElement),c=!1;function u(e){c||(c=!0,a.remove(),null!=d&&d.focus&&d.focus(),document.removeEventListener("keydown",p,!0),q=!1,t(e))}function p(e){"Escape"===e.key?(e.preventDefault(),u("cancel")):"Enter"===e.key&&document.activeElement===s&&(e.preventDefault(),u("confirm"))}i.addEventListener("click",()=>u("cancel")),s.addEventListener("click",()=>u("confirm")),l&&l.addEventListener("click",()=>u("extra")),a.addEventListener("click",e=>{e.target===a&&u("cancel")}),document.addEventListener("keydown",p,!0),setTimeout(()=>{s.focus()},0)})}async function de(){var e,t;try{var a,n=await ie();n.length?null!==(a=null!=(t=null==(e=await(e=>{if(q)return Promise.resolve(null);q=!0;let{title:f,message:g,confirmLabel:v="Confirm",cancelLabel:y="Cancel",tone:b,defaultValue:h="",placeholder:x}=e;return new Promise(t=>{let a=oe();var e=re(a);f&&((i=document.createElement("div")).className="qs-confirm-title",i.textContent=f,e.appendChild(i)),g&&((i=document.createElement("div")).className="qs-confirm-message",i.textContent=g,e.appendChild(i));let n=document.createElement("input");n.type="text",n.className="qs-dialog-input",n.value=h,x&&(n.placeholder=x),e.appendChild(n);var i=document.createElement("div"),s=(i.className="qs-confirm-actions",document.createElement("button")),o=(s.type="button",s.className="qs-btn subtle",s.textContent=y,document.createElement("button")),r=(o.type="button",se(b)),l=["qs-btn"];l.push("default"!==r?r:"primary"),o.className=l.join(" "),o.textContent=v,i.append(s,o),e.appendChild(i);let d=document.activeElement,c=!1;function u(e){c||(c=!0,a.remove(),n.removeEventListener("keydown",p),document.removeEventListener("keydown",m,!0),null!=d&&d.focus&&d.focus(),q=!1,t(e))}function p(e){"Enter"===e.key?(e.preventDefault(),u(n.value)):"Escape"===e.key&&(e.preventDefault(),u(null))}function m(e){"Escape"===e.key&&(e.preventDefault(),u(null))}s.addEventListener("click",()=>u(null)),o.addEventListener("click",()=>u(n.value)),n.addEventListener("keydown",p),document.addEventListener("keydown",m,!0),a.addEventListener("click",e=>{e.target===a&&u(null)}),setTimeout(()=>{n.focus(),n.select()},0)})})({title:"Save snapshot",message:"Name this snapshot",confirmLabel:"Save",cancelLabel:"Cancel",defaultValue:te({type:"manual",createdAt:Date.now()})}))?void 0:e.trim())?t:null)&&(""===a?z("Snapshot not saved (name cannot be empty)"):(Q({id:G(),createdAt:Date.now(),name:a,type:"manual",items:n}),P("Snapshot saved"))):j("No queue found. If you believe this is an error, please try to play and pause a track.")}catch(e){console.error(S+": manual snapshot failed",e),z("Failed to save snapshot")}}function R(t){Array.from(M.keys()).forEach(e=>{e!==t&&ce(e)})}function ce(e){var t=M.get(e);t&&(t.input.removeEventListener("keydown",t.onKeyDown),t.input.removeEventListener("blur",t.onBlur),t.input.isConnected&&t.input.remove(),t.labelEl.style.display="",t.labelEl.textContent=t.originalLabel,t.actionsEl&&(t.actionsEl.style.display=null!=(t=t.originalActionsDisplay)?t:""),M.delete(e))}function v(e,t=U){var a=(null!=(a=Spicetify.SVGIcons)?a:{})[e];return a?`<span class="qs-btn-icon" data-icon-name="${W(e)}"><svg class="qs-svg-icon" viewBox="0 0 16 16" aria-hidden="true" focusable="false" style="width:${t}px;height:${t}px;">${a}</svg></span>`:""}function y(e,t,a={}){var{action:a,id:n,tone:i="default",title:s}=a,o=["qs-btn"],i=("danger"===i&&o.push("danger"),"primary"===i&&o.push("primary"),"subtle"===i&&o.push("subtle"),[]),a=(a&&i.push(`data-action="${a}"`),n&&i.push(`id="${n}"`),s&&i.push(`title="${W(s)}"`),i.length?" "+i.join(" "):""),n=v(t);return`<button type="button" class="${o.join(" ")}"${a}>${n}<span class="qs-btn-label">${W(e)}</span></button>`}function ue(e,t,a){return`<button type="button" class="qs-icon-btn" data-action="${W(e)}" title="${W(a)}">${v(t)}</button>`}function b(e,t="default"){var a=["qs-pill"];return"default"!==t&&a.push({accent:"qs-pill--accent",version:"qs-pill--version",channel:"qs-pill--channel"}[t]),`<span class="${a.join(" ")}">${W(e)}</span>`}function pe(e){return e.map(e=>{var t=W(ae(e)),a=e.items.some(e=>e.startsWith("spotify:local:")),n=[b(e.items.length+" "+(1===e.items.length?"item":"items"),"accent")],a=(a&&n.push(b("includes local")),n.join(""));return`
          <div class="qs-row" data-id="${e.id}">
            <div class="qs-row-main">
              <div class="qs-row-title">
                ${v("auto"===e.type?"clock":"playlist")}
                <span>${t}</span>
                <span class="qs-title-actions">
                  ${ue("rename","edit","Rename snapshot")}
                  ${e.name?ue("reset-name","repeat","Reset name"):""}
                </span>
              </div>
              <div class="qs-row-meta">${a}</div>
              <div class="qs-row-actions">
                ${y("View items","list-view",{action:"toggle-items",title:"Toggle items"})}
                ${y("Replace queue","queue",{action:"replace-queue",title:"Replace queue",tone:"primary"})}
                ${y("Export","download",{action:"export",title:"Export to playlist"})}
                ${y("Delete","minus",{action:"delete",title:"Delete snapshot",tone:"danger"})}
              </div>
            </div>
          </div>
          <div class="qs-items" data-id="${e.id}" style="display:none">
            <div class="qs-items-body">Loading…</div>
          </div>
        `}).join("")}function me(){var e=p(),t=e.filter(e=>"auto"===e.type),e=e.filter(e=>"manual"===e.type),a=pe(t),n=pe(e);return`
      <div class="qs-section-card">
        <div class="qs-section-head">
          <div class="qs-section-heading">
            ${v("playlist")}
            <div class="qs-section-text">
              <div class="qs-section-name">Manual Snapshots</div>
              <div class="qs-section-caption">Your saved queues for later</div>
            </div>
            ${b(String(e.length),"accent")}
          </div>
          <div class="qs-actions">
            ${y("Export all","download",{id:"qs-export-manuals",tone:"subtle"})}
            ${y("Save now","plus-alt",{id:"qs-new-manual",tone:"primary"})}
          </div>
        </div>
        <div class="qs-section-body">
          ${n||'<div class="qs-empty">No manual snapshots yet</div>'}
        </div>
      </div>
      <div class="qs-section-card">
        <div class="qs-section-head">
          <div class="qs-section-heading">
            ${v("clock")}
            <div class="qs-section-text">
              <div class="qs-section-name">Automatic Snapshots</div>
              <div class="qs-section-caption">Captured in the background</div>
            </div>
            ${b(String(t.length),"accent")}
          </div>
          <div class="qs-actions">
            ${y("Export all","download",{id:"qs-export-autos",tone:"subtle"})}
          </div>
        </div>
        <div class="qs-section-body">
          ${a||'<div class="qs-empty">No automatic snapshots yet</div>'}
        </div>
      </div>
    `}function fe(k){var e=b("v"+O,"version"),t=d?b(d.toUpperCase(),"channel"):"",a=me(),n=k.getSettings(),e=`
      <div class="qs-container">
        <div class="qs-header">
          <div class="qs-header-title">
            <div class="qs-header-icon">${v("queue",20)}</div>
            <span class="qs-header-badges">${e}${t}</span>
          </div>
          <div class="qs-actions">
            ${y("Refresh","repeat",{id:"qs-refresh",tone:"subtle"})}
            ${y("Export settings","download",{id:"qs-export-settings"})}
          </div>
        </div>
        <div class="qs-settings">
          <div class="qs-settings-header">
            <div class="qs-section-heading">
              ${v("grid-view")}
              <div class="qs-section-text">
                <div class="qs-section-name">Settings</div>
                <div class="qs-section-caption">Tune automation and queue alerts</div>
              </div>
            </div>
          </div>
          <div class="qs-setting">
              <label class="qs-checkbox"><input type="checkbox" id="qs-auto-enabled" ${n.autoEnabled?"checked":""}/> ${v("brightness")}Enable automatic snapshots</label>
            <div class="qs-dim">Mode 
              <div class="qs-radio-group" id="qs-auto-mode-group">
                <label class="qs-radio-label"><input type="radio" class="qs-radio" name="qs-auto-mode" value="timer" ${"timer"===n.autoMode?"checked":""} ${n.autoEnabled?"":"disabled"}/><span>${v("clock")} Time-based</span></label>
                <label class="qs-radio-label"><input type="radio" class="qs-radio" name="qs-auto-mode" value="on-change" ${"on-change"===n.autoMode?"checked":""} ${n.autoEnabled?"":"disabled"}/><span>${v("shuffle")} Queue changes</span><span class="qs-icon"><span class="qs-icon-glyph">ⓘ</span><span class="qs-tooltip"><span class="qs-tooltip-emph">Experimental!</span>This mode may create many similar snapshots (for example when queuing a bunch of songs)</span></span></label>
              </div>
            </div>
            <div class="qs-setting" style="margin-top:6px">
              <label class="qs-checkbox"><input type="checkbox" id="qs-only-new" ${n.onlyNewItems?"checked":""} ${n.autoEnabled?"":"disabled"}/> ${v("search")} Check for new items</label>
              <div style="opacity:0.7; font-size:12px">Only trigger it when there is a new song that was not in the previous snapshot.</div>
            </div>
            <div class="qs-setting" style="margin-top:6px">
              <div style="opacity:0.7; font-size:12px">Equal queues are never saved as automatic snapshots.</div>
            </div>
            <div class="qs-setting" style="margin-top:12px">
              <label class="qs-checkbox"><input type="checkbox" id="qs-queue-warn-enabled" ${n.queueWarnEnabled?"checked":""}/> ${v("exclamation-circle")} Warn when queue is nearly full</label>
              <div style="opacity:0.7; font-size:12px">Heuristic limit; includes current track. Adjust if needed.</div>
            </div>
            <div class="qs-setting" style="margin-top:12px">
              <label class="qs-checkbox"><input type="checkbox" id="qs-prompt-manual-before-replace" ${n.promptManualBeforeReplace?"checked":""}/> ${v("copy")} Ask to save manual snapshot before replacing queue</label>
              <div style="opacity:0.7; font-size:12px">Offers to store the current queue before overwriting it.</div>
            </div>
          </div>
          <div class="qs-right">
            <div class="qs-setting">
              <label>${v("clock")} Interval (minutes)</label>
              <input class="qs-input" type="number" id="qs-auto-interval-mins" min="0.5" step="0.5" value="${(n.autoIntervalMs/6e4).toFixed(2)}" ${n.autoEnabled&&"timer"===n.autoMode?"":"disabled"} />
              <div style="opacity:0.7; font-size:12px">Minimum 0.5 (30 seconds)</div>
            </div>
            <div class="qs-setting">
              <label>${v("chart-up")} Max automatic snapshots</label>
              <input class="qs-input" type="number" id="qs-max-autos" min="1" step="1" value="${n.maxAutosnapshots}" ${n.autoEnabled?"":"disabled"} />
              <div style="opacity:0.7; font-size:12px">Older snapshots are pruned. Be careful when changing this</div>
            </div>
            <div class="qs-setting">
              <label>${v("queue")} Queue max size</label>
              <input class="qs-input" type="number" id="qs-queue-max-size" min="10" step="1" value="${n.queueMaxSize}" ${n.queueWarnEnabled?"":"disabled"} />
            </div>
            <div class="qs-setting">
              <label>${v("exclamation-circle")} Warn when remaining slots ≤</label>
              <input class="qs-input" type="number" id="qs-queue-warn-threshold" min="0" step="1" value="${n.queueWarnThreshold}" ${n.queueWarnEnabled?"":"disabled"} />
            </div>
          </div>
        </div>
        <div id="qs-list">
          ${a||'<div style="opacity:0.7">No snapshots yet</div>'}
        </div>
      </div>
    `;function i(){let t=k.getSettings();var e=document.querySelectorAll('input.qs-radio[name="qs-auto-mode"]'),a=document.querySelector("#qs-auto-interval-mins"),n=document.querySelector("#qs-only-new"),i=document.querySelector("#qs-max-autos"),s=document.querySelector("#qs-queue-max-size"),o=document.querySelector("#qs-queue-warn-threshold"),e=(e.forEach(e=>{e.disabled=!t.autoEnabled}),a&&(a.disabled=!(t.autoEnabled&&"timer"===t.autoMode)),n&&(n.disabled=!t.autoEnabled),i&&(i.disabled=!t.autoEnabled),t.queueWarnEnabled);s&&(s.disabled=!e),o&&(o.disabled=!e)}Spicetify.PopupModal.display({title:S,content:e,isLarge:!0}),c&&(document.removeEventListener("click",c,!0),c=null),u&&(document.removeEventListener("change",u,!0),u=null),c=async function(e){var a=document.querySelector(".qs-container"),n=e.target;if(a&&n&&a.contains(n)&&e.stopPropagation(),a&&n){a=C(),n=n.closest(".qs-btn, .qs-icon-btn");if("qs-new-manual"===(null==n?void 0:n.id))e.preventDefault(),R(),await de(),B();else{if("qs-export-settings"===(null==n?void 0:n.id))return e.preventDefault(),i=k.getSettings(),Z(S+"-settings.json",i);if("qs-export-manuals"===(null==n?void 0:n.id))return e.preventDefault(),i=a.filter(e=>"manual"===e.type),Z(S+"-manual-snapshots.json",i);if("qs-export-autos"===(null==n?void 0:n.id))return e.preventDefault(),i=a.filter(e=>"auto"===e.type),Z(S+"-auto-snapshots.json",i);if("qs-refresh"===(null==n?void 0:n.id))e.preventDefault(),B();else if(n){var i=n.closest(".qs-row"),s=n.getAttribute("data-action"),o=n.classList.contains("qs-icon-btn");if(i&&(s||!o)){let t=i.getAttribute("data-id");if(t){M.has(t)||R(t);var r=a.find(e=>e.id===t);if(r){if(o)return"rename"===s?(e.preventDefault(),void function i(s,o){if(s.isConnected){let n=o.id;if(M.has(n))(a=M.get(n))&&(a.input.focus(),a.input.select());else{var a=s.querySelector(".qs-row-title");if(a){var r=Array.from(a.querySelectorAll("span"))[1];if(r){var l=null!=(l=a.querySelector(".qs-title-actions"))?l:void 0,d=null!=(d=r.textContent)?d:"",c=te(o),u=null!=(u=null==l?void 0:l.style.display)?u:"";let e=document.createElement("input"),t=(e.type="text",e.value=null!=(p=o.name)?p:d,e.className="qs-inline-input",e.setAttribute("aria-label","Snapshot name"),r.style.display="none",l&&(l.style.display="none"),a.insertBefore(e,null!=l?l:null),e=>{var t,a=M.get(n);a&&(ce(n),e)&&((e=a.input.value.trim())?e!==a.originalLabel.trim()&&(e===a.generatedName?z("Name must differ from the default suggestion",{duration:2e3}):0<=(t=(a=C()).findIndex(e=>e.id===n))&&(a[t].name=e,N(a),B())):(z("Name cannot be empty",{duration:2e3}),i(s,o)))});var p={input:e,labelEl:r,originalLabel:d,actionsEl:l,originalActionsDisplay:u,generatedName:c,onKeyDown(e){"Enter"===e.key?(e.preventDefault(),t(!0)):"Escape"===e.key&&(e.preventDefault(),t(!1))},onBlur(){t(!0)}};M.set(n,p),e.addEventListener("keydown",p.onKeyDown),e.addEventListener("blur",p.onBlur),setTimeout(()=>{e.focus(),e.select()},0)}}}}}(i,r)):"reset-name"===s?(e.preventDefault(),void(0<=(o=a.findIndex(e=>e.id===t))&&(delete a[o].name,N(a),B()))):void 0;var l,e=s;if(e)if("toggle-items"===e){o=i.nextElementSibling,s=n;if(o&&o.classList.contains("qs-items"))if("none"===o.style.display||!o.style.display){o.style.display="block",F(s,"Hide items");i=o.querySelector(".qs-items-body");if(i){i.textContent="Loading…";try{u=r;var d=await($.has(u.id)?$.get(u.id):(l=await ee(u.items),$.set(u.id,l),l));i.innerHTML=d.map((e,t)=>`<div>${t+1}. ${W(e)}</div>`).join("")}catch(e){i.textContent="Failed to load items"}}}else o.style.display="none",F(s,"View items")}else if("export"===e){if(!A.has(t)){A.add(t);var c=r,u=n;try{if(c.items.length){u&&(u.disabled=!0,F(u,"Exporting…"));var p=await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/me"),m=null==p?void 0:p.id;if(!m)throw new Error("No user id");var f=ae(c),g=await Spicetify.CosmosAsync.post(`https://api.spotify.com/v1/users/${encodeURIComponent(m)}/playlists`,{name:f,description:`Saved from ${S} on `+new Date(c.createdAt).toLocaleString(),public:!1}),v=null==g?void 0:g.id;if(!v)throw new Error("Playlist creation failed");var y="spotify:playlist:"+v;let t=0;var b=c.items.length;for(let e=0;e<c.items.length;e+=100){var h=c.items.slice(e,e+100);try{await Spicetify.Platform.PlaylistAPI.add(y,h,{after:"end"}),t+=h.length}catch(e){console.warn(S+": failed to add a chunk",e)}}if(t===b){P("Exported to "+f);try{var x=Spicetify.URI.playlistV2URI(v),q=null==x?void 0:x.toURLPath(!0),w=Spicetify.Platform.History;if(q)if(null!=w&&w.push)try{w.push(q)}catch(e){w.push({pathname:q})}else window.location.hash=q}catch(e){}}else j(`Exported; some tracks couldn't be added (${t}/${b})`);try{console.log(S+": Export result",{snapshotId:c.id,totalExpected:b,totalAdded:t})}catch(e){}}else j("Nothing to export")}catch(e){console.error(S+": export failed",e),z("Failed to export to playlist")}finally{u&&(u.disabled=!1,F(u,"Export"))}await 0,A.delete(t)}}else if("replace-queue"===e){if(!A.has(t)){A.add(t);try{if(k.getSettings().promptManualBeforeReplace){var E=await le({title:"Save current queue?",message:"Create a manual snapshot of the current queue before replacing it?",confirmLabel:"Save snapshot",cancelLabel:"Skip",extraLabel:"Cancel",extraTone:"subtle",tone:"primary"});if("extra"===E)return;"confirm"===E&&(await de(),B())}await(async(e,a)=>{try{if(e.items.length){a&&(a.disabled=!0,F(a,"Replacing…"));var n=e.items.slice(),i=n.shift();try{await Spicetify.Platform.PlayerAPI.clearQueue()}catch(e){console.warn(S+": clearQueue failed (non-fatal)",e)}try{await Spicetify.Player.playUri(i)}catch(e){try{await Spicetify.Platform.PlayerAPI.play({uri:i},{},{})}catch(e){return console.warn(S+": failed to start first track",e),void z("Failed to start snapshot")}}await new Promise(e=>setTimeout(e,250));let t=0;for(let e=0;e<n.length;e+=100){var s=n.slice(e,e+100).map(e=>({uri:e}));try{await Spicetify.Platform.PlayerAPI.addToQueue(s),t+=s.length}catch(e){console.warn(S+": addToQueue chunk failed",e)}}t===n.length?P(`Queue replaced (${e.items.length} items)`):j(`Replaced; some items couldn't be queued (${t+1}/${e.items.length})`)}else j("Snapshot is empty")}catch(e){console.error(S+": replace queue failed",e),z("Failed to replace queue")}finally{a&&(a.disabled=!1,F(a,"Replace queue"))}})(r,n)}finally{A.delete(t)}}}else"delete"===e&&"confirm"===await le({title:"Delete snapshot",message:"Delete this snapshot? This cannot be undone.",confirmLabel:"Delete",tone:"danger"})&&(l=ae(r),N(a.filter(e=>e.id!==t)),B(),P("Snapshot deleted: "+l))}}}}}}},u=function(e){var t,a=document.querySelector(".qs-container"),n=e.target;a&&n&&a.contains(n)&&(e.stopPropagation(),"qs-auto-enabled"===n.id?(a=!!n.checked,e=k.getSettings(),e=o(s({},e),{autoEnabled:a}),k.setSettings(e),R(),i()):"qs-auto-mode"===n.name?(a=n,e=k.getSettings(),a="on-change"===a.value?"on-change":"timer",e=o(s({},e),{autoMode:a}),k.setSettings(e),i()):"qs-only-new"===n.id?(a=!!n.checked,e=k.getSettings(),e=o(s({},e),{onlyNewItems:a}),k.setSettings(e)):"qs-auto-interval-mins"===n.id?(a=n,e=k.getSettings(),a=parseFloat(a.value),a=isFinite(a)&&.5<=a?a:e.autoIntervalMs/6e4,e=o(s({},e),{autoIntervalMs:Math.round(6e4*a)}),k.setSettings(e)):"qs-max-autos"===n.id?(a=n,e=k.getSettings(),a=parseInt(a.value,10),a=Number.isFinite(a)&&0<a?a:e.maxAutosnapshots,e=o(s({},e),{maxAutosnapshots:a}),k.setSettings(e),a=e,t=(e=p()).filter(e=>"manual"===e.type),e=e.filter(e=>"auto"===e.type).slice(0,a.maxAutosnapshots),N([...t,...e]),B()):"qs-queue-warn-enabled"===n.id?(a=n.checked,t=k.getSettings(),e=o(s({},t),{queueWarnEnabled:a}),k.setSettings(e),i()):"qs-queue-max-size"===n.id?(a=n,e=k.getSettings(),a=parseInt(a.value,10),a=Number.isFinite(a)&&1<a?a:e.queueMaxSize,e=o(s({},e),{queueMaxSize:a}),k.setSettings(e)):"qs-queue-warn-threshold"===n.id?(a=n,e=k.getSettings(),a=parseInt(a.value,10),a=Number.isFinite(a)&&0<=a?a:e.queueWarnThreshold,e=o(s({},e),{queueWarnThreshold:a}),k.setSettings(e)):"qs-prompt-manual-before-replace"===n.id&&(a=n.checked,e=k.getSettings(),n=o(s({},e),{promptManualBeforeReplace:a}),k.setSettings(n)))},document.addEventListener("click",c,!0),document.addEventListener("change",u,!0),i()}function B(){R();var e,t=document.getElementById("qs-list");t&&(e=me(),t.innerHTML=e||'<div style="opacity:0.7">No snapshots yet</div>')}function ge(){let n=[],t=null,s=[],o=null,r=null;function l(){null!==t&&(clearInterval(t),t=null)}async function d(e){try{if(e.autoEnabled){var a=await ie();if(a.length){if(e.onlyNewItems){let t=new Set(n);if(!a.some(e=>!t.has(e)))return void(n=a)}((t,a)=>{if(t.length===a.length){for(let e=0;e<t.length;e++)if(t[e]!==a[e])return;return 1}})(a,n)||(Q({id:G(),createdAt:Date.now(),type:"auto",items:a},e),n=a)}else console.log(S+": queue is empty, skipping auto snapshot")}}catch(e){console.error(S+": auto snapshot error",e),z("Failed to save an automatic snapshot")}}function c(e){l(),e.autoEnabled&&(t=window.setInterval(()=>d(e),e.autoIntervalMs),r=e.autoIntervalMs)}function u(){for(var e of s)e();s=[]}return{startAutoTimer:c,primeFromExisting:function(){var e,t=p()[0];null!=(e=null==t?void 0:t.items)&&e.length&&(n=t.items.slice())},applyAutoMode:function(e){var t=e.autoEnabled?e.autoMode:null;if(t===o)"timer"===t&&r!==e.autoIntervalMs&&c(e);else{if("on-change"===o?u():"timer"===o&&l(),"on-change"===t){var a,n,i=e;if(u(),i.autoEnabled)try{let e=null==(n=null==(a=null==Spicetify?void 0:Spicetify.Player)?void 0:a.origin)?void 0:n._events;if(null==e||!e.addListener||null==e||!e.removeListener)throw new Error("queue_update events API not available");let t=e=>{d(i),console.log(S+": queue_update",e)};e.addListener("queue_update",t),s.push(()=>{try{e.removeListener("queue_update",t)}catch(e){console.error(S+": failed to remove queue_update listener",e)}})}catch(e){console.error(S+": failed to start queue update watcher",e),z("Failed to start queue update watcher")}}else"timer"===t&&c(e);o=t}}}}function ve(o){let i=null,r=null,l=0,d=3e4;async function s(){try{var e,t,a,n,i,s=o();s.queueWarnEnabled&&(e=s.queueMaxSize,(t=s.queueWarnThreshold)<0||e<=1||(a=await ie()).length&&(n=Math.max(0,e-a.length))<=t&&(i=Date.now(),r!==n||i-l>=d)&&(j(`Queue nearly full (${e-n}/${e})`,{duration:25e4,id:"queue-nearly-full"}),r=n,l=i))}catch(e){console.warn(S+": queue capacity check failed",e)}}function e(){if(i){try{i()}catch(e){}i=null}}return{start:function(){var a,n;e();try{let e=null==(n=null==(a=null==Spicetify?void 0:Spicetify.Player)?void 0:a.origin)?void 0:n._events;if(null==e||!e.addListener||null==e||!e.removeListener)throw new Error("queue_update events API not available");let t=e=>{s()};e.addListener("queue_update",t),i=()=>{try{e.removeListener("queue_update",t)}catch(e){console.error(S+": failed to remove queue_update listener (capacity watcher)",e)}},s()}catch(e){console.error(S+": failed to start capacity watcher",e),z("Failed to start capacity watcher")}},stop:e,checkAndWarnOnce:s}}h=Object.defineProperty,x=Object.defineProperties,w=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,i=(e,t,a)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,s=(e,t)=>{for(var a in t=t||{})E.call(t,a)&&i(e,a,t[a]);if(n)for(var a of n(t))_.call(t,a)&&i(e,a,t[a]);return e},l={autoEnabled:!(r="queue-manager:settings"),autoIntervalMs:3e5,maxAutosnapshots:20,autoMode:"timer",onlyNewItems:!0,queueWarnEnabled:!0,queueMaxSize:80,queueWarnThreshold:5,promptManualBeforeReplace:!(o=(e,t)=>x(e,w(t)))},a="queue-manager:snapshots",S="Queue Manager",O="0.4.1",d="beta",k=null,L=new Map,$=new Map,q=!1,u=c=null,A=new Set,M=new Map,U=16,e=async function(){for(var e;null==Spicetify||!Spicetify.showNotification||null==Spicetify||!Spicetify.CosmosAsync||null==Spicetify||!Spicetify.LocalStorage;)await new Promise(e=>setTimeout(e,100));let t=X(),a=ge(),n=(a.primeFromExisting(),a.applyAutoMode(t),ve(()=>t)),i=(n.start(),{getSettings:()=>t,setSettings:e=>{t=e,Spicetify.LocalStorage.set(r,JSON.stringify(e)),a.applyAutoMode(e),n.checkAndWarnOnce()}});try{null!=(e=null==Spicetify?void 0:Spicetify.Topbar)&&e.Button&&new Spicetify.Topbar.Button(S,"queue",()=>fe(i),void 0,!0)}catch(e){console.error(S+": failed to add topbar button")}try{new Spicetify.ContextMenu.Item(S,()=>fe(i),(e,t,a)=>{var n,i,s;try{if(a){var o=Spicetify.URI.fromString(a);if((null==o?void 0:o.type)===Spicetify.URI.Type.QUEUE)return!0;if(a.includes(":queue"))return!0}return((null==(s=null==(i=null==(n=Spicetify.Platform)?void 0:n.History)?void 0:i.location)?void 0:s.pathname)||"").includes("queue")}catch(e){}return!1},"queue").register()}catch(e){console.error(S+": failed to add context menu item")}try{Spicetify.Keyboard.registerShortcut({key:"q",ctrl:!0,alt:!0},()=>fe(i))}catch(e){console.error(S+": failed to add keyboard shortcut")}},(async()=>{await e()})(),(async()=>{var e;document.getElementById("queueDmanager")||((e=document.createElement("style")).id="queueDmanager",e.textContent=String.raw`
  .qs-container{display:flex;flex-direction:column;gap:18px;overflow:visible}.qs-header{display:flex;justify-content:space-between;align-items:center;padding:16px;border-radius:12px;background:linear-gradient(135deg,rgba(52,211,153,.16),rgba(37,99,235,.12));border:1px solid rgba(255,255,255,.06);gap:12px}.qs-header-title{display:flex;align-items:center;gap:12px;font-weight:600}.qs-header-text{display:flex;flex-direction:column;gap:4px}.qs-header-app{display:flex;align-items:center;gap:10px}.qs-header-badges{display:inline-flex;gap:6px;align-items:center}.qs-header-icon{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;background:rgba(0,0,0,.4)}.qs-header-name{font-size:18px}.qs-header-sub,.qs-header-sub-alt{font-size:13px;opacity:.75}.qs-actions{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}.qs-settings{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;padding:16px;border-radius:12px;background:var(--spice-section-bg,rgba(255,255,255,.05));border:1px solid rgba(255,255,255,.05);overflow:visible}.qs-settings-header{grid-column:1/-1;display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:8px}.qs-right{display:flex;flex-direction:column;gap:16px}.qs-setting{display:flex;flex-direction:column;gap:6px}.qs-setting label{font-weight:600;display:inline-flex;align-items:center;gap:8px}.qs-dim{color:rgba(255,255,255,.7);font-size:12px}.qs-row{display:flex;flex-direction:column;gap:12px;padding:12px 16px;border-radius:10px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.04);box-shadow:0 10px 30px rgba(0,0,0,.25)}.qs-row+.qs-row{margin-top:12px}.qs-row-main{display:flex;flex-direction:column;gap:10px}.qs-row-title{font-weight:600;display:inline-flex;align-items:center;gap:8px}.qs-title-actions{display:inline-flex;align-items:center;gap:6px;margin-left:8px}.qs-icon-btn{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:0 0;border:1px solid transparent;cursor:pointer;padding:0;transition:background .15s ease,transform .12s ease,border .12s ease;color:inherit}.qs-icon-btn:hover{background:linear-gradient(135deg,rgba(96,165,250,.35),rgba(59,130,246,.2));border-color:rgba(96,165,250,.4);transform:translateY(-1px)}.qs-icon-btn:focus-visible{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-icon-btn .qs-svg-icon{width:16px;height:16px}.qs-row-meta{display:flex;flex-wrap:wrap;gap:6px;font-size:12px;align-items:center}.qs-row-actions{display:flex;flex-wrap:nowrap;gap:10px;padding:2px 0;overflow-x:auto}.qs-row-actions .qs-btn{flex:0 0 auto;justify-content:flex-start}.qs-btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:6px 10px;border-radius:8px;background:rgba(255,255,255,.08);color:inherit;border:1px solid transparent;cursor:pointer;font-weight:600;transition:transform .12s ease,box-shadow .12s ease,border .12s ease;text-decoration:none}.qs-btn.primary{background:linear-gradient(135deg,rgba(96,165,250,.9),rgba(59,130,246,.9));border-color:rgba(96,165,250,.35)}.qs-btn.subtle{background:rgba(255,255,255,.04);border-color:rgba(255,255,255,.08)}.qs-btn.danger{background:rgba(248,113,113,.16);border-color:rgba(248,113,113,.25)}.qs-btn:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.25)}.qs-btn:focus-visible{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-btn-icon{display:inline-flex;align-items:center;justify-content:center}.qs-btn-label{white-space:nowrap}.qs-svg-icon{display:block;fill:currentColor;width:16px;height:16px}.qs-section-card{display:flex;flex-direction:column;gap:12px;padding:16px;border-radius:12px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.05)}.qs-section-head{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:center}.qs-section-heading{display:inline-flex;align-items:center;gap:12px;font-weight:600}.qs-section-text{display:flex;flex-direction:column;gap:2px}.qs-section-name{font-size:16px}.qs-section-caption{font-size:12px;opacity:.75}.qs-section-body{display:flex;flex-direction:column}.qs-empty{opacity:.6;font-size:13px;padding:12px}.qs-input{padding:8px 10px;border-radius:8px;background:rgba(0,0,0,.25);color:inherit;border:1px solid rgba(255,255,255,.1);font-size:14px}.qs-input:disabled{opacity:.6;cursor:not-allowed}.qs-checkbox{display:inline-flex;align-items:center;gap:10px}.qs-radio-group{display:inline-flex;gap:12px;align-items:center;margin-top:6px}.qs-radio-label span{display:inline-flex;align-items:center;gap:6px}.qs-icon{display:inline-flex;align-items:center;justify-content:center;width:18px;height:18px;border-radius:50%;font-size:12px;line-height:16px;margin-left:2px;position:relative}.qs-icon-glyph{opacity:.7;transition:opacity .12s ease-in-out}.qs-icon:hover .qs-icon-glyph{opacity:1}.qs-icon>.qs-tooltip{position:absolute;left:50%;transform:translateX(-50%);bottom:calc(100% + 6px);white-space:nowrap;text-align:left;padding:8px 10px;border-radius:4px;font-size:12px;background:#121212;border:1px solid rgba(255,255,255,.08);box-shadow:0 4px 14px rgba(0,0,0,.35);color:var(--spice-text,#fff);pointer-events:none;opacity:0;transition:opacity .12s ease-in-out;z-index:9999}.qs-icon:hover>.qs-tooltip{opacity:1}.qs-tooltip .qs-tooltip-emph{color:#ff4e4e}.qs-radio:disabled{cursor:not-allowed}.qs-radio:disabled+span{opacity:.6;cursor:not-allowed}.qs-inline-input{padding:6px 8px;border-radius:6px;border:1px solid rgba(255,255,255,.2);background:rgba(0,0,0,.45);color:inherit;font-size:14px;width:100%;max-width:240px}.qs-dialog-input{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,.18);background:rgba(0,0,0,.35);color:inherit;font-size:14px}.qs-items{margin:10px 0 14px 0;padding:12px;border-left:2px solid rgba(59,130,246,.35);background:rgba(59,130,246,.12);border-radius:8px}.qs-items-body{display:flex;flex-direction:column;gap:4px;font-size:13px;max-height:240px;overflow:auto}.qs-pill{display:inline-flex;align-items:center;justify-content:center;padding:2px 8px;border-radius:999px;background:rgba(255,255,255,.12);font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.qs-pill--accent{background:linear-gradient(135deg,rgba(59,130,246,.85),rgba(99,102,241,.85))}.qs-pill--version{background:rgba(255,255,255,.12)}.qs-pill--channel{background:rgba(248,113,113,.35)}.qs-confirm-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:100;backdrop-filter:blur(2px)}.qs-confirm-dialog{background:var(--spice-section-bg,rgba(32,32,32,.95));border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:20px 22px;max-width:360px;width:min(90vw,360px);box-shadow:0 18px 36px rgba(0,0,0,.45);display:flex;flex-direction:column;gap:16px}.qs-confirm-title{font-size:16px;font-weight:600}.qs-confirm-message{font-size:13px;opacity:.85;line-height:1.5}.qs-confirm-actions{display:flex;gap:10px;justify-content:flex-end}@media (max-width:860px){.qs-header{flex-direction:column;align-items:flex-start}.qs-actions{width:100%;justify-content:flex-start}.qs-row{grid-template-columns:1fr}.qs-row-actions{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}}.qs-toast-container{position:fixed;top:24px;left:24px;display:flex;flex-direction:column;gap:12px;z-index:2147483646;pointer-events:none}.qs-toast{display:flex;align-items:flex-start;gap:10px;min-width:240px;max-width:min(360px,90vw);padding:12px 14px;border-radius:10px;background:rgba(32,32,32,.92);border:1px solid rgba(255,255,255,.07);box-shadow:0 14px 32px rgba(0,0,0,.45);color:var(--spice-text,#fff);font-size:13px;line-height:1.45;pointer-events:auto;transform:translateY(-4px);opacity:0;transition:transform .2s ease,opacity .2s ease;position:relative;overflow:hidden}.qs-toast--enter{opacity:1;transform:translateY(0)}.qs-toast--exit{opacity:0;transform:translateY(-4px)}.qs-toast--swipe-exit{opacity:0;transform:translateX(-160px);transition:transform .2s ease,opacity .2s ease}.qs-toast--dragging{transition:none!important}.qs-toast:focus-within{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-toast-message{flex:1 1 auto;padding-right:8px}.qs-toast-close{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:none;color:inherit;font-size:18px;line-height:1;cursor:pointer;padding:0 2px;opacity:.7;transition:opacity .12s ease}.qs-toast-close:focus-visible,.qs-toast-close:hover{opacity:1}.qs-toast-close:focus-visible{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-toast-close--hidden{display:none}.qs-toast-progress{position:absolute;left:10px;right:10px;bottom:8px;height:3px;border-radius:999px;background:rgba(255,255,255,.15);transform-origin:left;transition:opacity .16s ease;opacity:0;pointer-events:none}.qs-toast-progress__bar{width:100%;height:100%;border-radius:inherit;background:rgba(255,255,255,.7);transform-origin:left;transform:scaleX(0);transition:transform 80ms linear}.qs-toast-progress--hidden{opacity:0}.qs-toast-progress--visible{opacity:1}.qs-toast--success .qs-toast-progress__bar{background:rgba(187,247,208,.85)}.qs-toast--danger .qs-toast-progress__bar{background:rgba(254,202,202,.9)}.qs-toast--warning .qs-toast-progress__bar{background:rgba(30,41,59,.9)}.qs-toast--warning .qs-toast-progress{background:rgba(15,23,42,.35)}.qs-toast--success{background:linear-gradient(135deg,rgba(34,197,94,.85),rgba(16,185,129,.85));border-color:rgba(34,197,94,.45)}.qs-toast--danger{background:linear-gradient(135deg,rgba(248,113,113,.92),rgba(220,38,38,.92));border-color:rgba(248,113,113,.55)}.qs-toast--warning{background:linear-gradient(135deg,rgba(250,204,21,.9),rgba(251,191,36,.9));border-color:rgba(234,179,8,.55);color:#1f1f1f}.qs-toast-content{flex:1 1 auto;display:flex;flex-direction:column;gap:4px}.qs-toast-title{font-weight:700;font-size:14px;line-height:1.3}.qs-toast--warning .qs-toast-title{color:#1f1f1f}.qs-toast-message{font-size:13px;line-height:1.45}@media (max-width:860px){.qs-toast-container{left:50%;transform:translateX(-50%);top:12px;gap:10px}.qs-toast{max-width:min(420px,92vw)}}
      `.trim(),document.head.appendChild(e))})()})();