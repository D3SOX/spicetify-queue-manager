(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var p,m,g,h,f,y,v,F,j,b,s,x,J,B,e,t,q,w,n,E,A,L,oe,S,a,i,O,U,C;function d(){var e,t;try{var a,n=Spicetify.LocalStorage.get(b);return n?{autoEnabled:null!=(e=(a=JSON.parse(n)).autoEnabled)?e:s.autoEnabled,autoIntervalMs:("number"==typeof a.autoIntervalMs&&0<a.autoIntervalMs?a:s).autoIntervalMs,maxAutosnapshots:("number"==typeof a.maxAutosnapshots&&0<a.maxAutosnapshots?a:s).maxAutosnapshots,autoMode:"timer"===a.autoMode?"timer":"on-change",onlyNewItems:!1!==a.onlyNewItems,queueWarnEnabled:!1!==a.queueWarnEnabled,queueMaxSize:("number"==typeof a.queueMaxSize&&1<a.queueMaxSize?a:s).queueMaxSize,queueWarnThreshold:("number"==typeof a.queueWarnThreshold&&0<=a.queueWarnThreshold?a:s).queueWarnThreshold,promptManualBeforeReplace:!1!==a.promptManualBeforeReplace,language:"string"==typeof a.language?a.language:void 0,settingsCollapsed:null!=(t=a.settingsCollapsed)?t:s.settingsCollapsed,syncedSnapshotId:"string"==typeof a.syncedSnapshotId?a.syncedSnapshotId:void 0}:s}catch(e){return s}}function M(e){Spicetify.LocalStorage.set(b,JSON.stringify(e))}function _(){try{var e,t=Spicetify.LocalStorage.get(x);return t?(e=JSON.parse(t),Array.isArray(e)?e:[]):[]}catch(e){return[]}}function N(e){return e.sort((e,t)=>t.createdAt-e.createdAt)}function V(e){N(e),Spicetify.LocalStorage.set(x,JSON.stringify(e))}function D(){return N(_())}function $(e,t){var t=null!=t?t:d(),a=_(),n=a.filter(e=>"manual"===e.type),s=a.filter(e=>"auto"===e.type),a=a.filter(e=>"synced"===e.type);"auto"===e.type?(t=[e,...s].slice(0,t.maxAutosnapshots),V([...n,...t,...a])):V([e,...n,...s,...a])}function z(){var e,t;try{var a=d();if(a.language&&q.includes(a.language))return a.language;var n=null==(t=null==(e=null==Spicetify?void 0:Spicetify.Platform)?void 0:e.Session)?void 0:t.locale;if(q.includes(n))return n}catch(e){}return"en"}function H(e,a){t=w[n];var t=e.split(".").reduce((e,t)=>null==e?void 0:e[t],t);return"string"!=typeof t?(console.warn(J+`: translation missing for key: ${e} in locale: `+n),String(e)):a?t.replace(/\{\{(\w+)\}\}/g,(e,t)=>String(a[t]||e)):t}function P(){n=z()}function W(e){return Number.isFinite(e)&&0<e}function Q(e){var t,{track:a,bar:n}=(e=>{let t,a,n=null!=(t=e.querySelector(".qs-toast-progress"))?t:null,s=null!=(a=null==n?void 0:n.querySelector(".qs-toast-progress__bar"))?a:null;return n?n.classList.contains("qs-toast-progress--hidden")||n.classList.contains("qs-toast-progress--visible")||n.classList.add("qs-toast-progress--hidden"):((n=document.createElement("div")).className="qs-toast-progress qs-toast-progress--hidden",n.setAttribute("aria-hidden","true")),s?s.parentElement!==n&&n.appendChild(s):((s=document.createElement("div")).className="qs-toast-progress__bar",s.style.transform="scaleX(0)",n.appendChild(s)),n.parentElement===e&&!n.nextSibling||e.appendChild(n),{track:n,bar:s}})(e);let s=A.get(e);return s?(s.progressTrack=a,s.progressBar=n):(t=performance.now(),s={timeoutId:void 0,rafId:void 0,startTime:t,endTime:t,remaining:1/0,totalDuration:1/0,progressTrack:a,progressBar:n},A.set(e,s)),s}function o(e,t){let a=A.get(e);(a=a&&a.progressTrack&&a.progressBar?a:Q(e)).progressTrack&&a.progressBar&&(null===t||Number.isNaN(t)||t<0?(a.progressTrack.classList.remove("qs-toast-progress--visible"),a.progressTrack.classList.add("qs-toast-progress--hidden"),a.progressBar.style.transform="scaleX(0)"):(e=Math.min(1,Math.max(0,t)),a.progressTrack.classList.remove("qs-toast-progress--hidden"),a.progressTrack.classList.add("qs-toast-progress--visible"),a.progressBar.style.transform=`scaleX(${e})`))}function R(e){var t=A.get(e);if(t&&W(t.remaining))return t.remaining<=0?void I(e):void T(e,t.remaining,!1);t=(e=>(e=e.dataset.toastDuration)&&(e=Number(e),Number.isFinite(e))&&0<e?e:null)(e);t&&W(t)?T(e,t):o(e,null)}function re(e){if("string"!=typeof e)return e;e=e.trim();if(e.length)return e;throw new Error(J+" toast message cannot be empty")}function le(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);"string"==typeof t?e.textContent=t:e.appendChild(t)}function ce(e,t){0<t&&isFinite(t)?e.dataset.toastDuration=String(t):delete e.dataset.toastDuration}function T(e,t,a=!0){var n,s=Q(e);k(e),t<=0||!isFinite(t)?(s.remaining=1/0,s.endTime=1/0,o(e,null)):(n=performance.now(),s.startTime=n,s.endTime=n+t,s.remaining=t,a&&(s.totalDuration=t),o(e,s.totalDuration<=0?1:1-s.remaining/s.totalDuration),s.timeoutId=window.setTimeout(()=>{I(e)},t),s.rafId=window.requestAnimationFrame(()=>function e(t){var a,n,s=A.get(t);s&&(W(s.totalDuration)?(a=performance.now(),a=Math.max(0,s.endTime-a),s.remaining=a,n=s.totalDuration<=0?1:1-a/s.totalDuration,o(t,n),s.rafId=0<a?window.requestAnimationFrame(()=>e(t)):void 0):(o(t,null),s.rafId=void 0))}(e)))}function k(e){e=A.get(e);e&&("number"==typeof e.timeoutId&&(clearTimeout(e.timeoutId),e.timeoutId=void 0),"number"==typeof e.rafId)&&(cancelAnimationFrame(e.rafId),e.rafId=void 0)}function I(e,t="default"){k(e),A.delete(e),e.classList.remove("qs-toast--enter","qs-toast--swipe-exit"),e.classList.add("swipe"===t?"qs-toast--swipe-exit":"qs-toast--exit");let a,n=()=>{e.removeEventListener("transitionend",n),e.removeEventListener("animationend",n),void 0!==a&&window.clearTimeout(a),e.remove(),E&&!E.childElementCount&&(E.remove(),E=null)};e.addEventListener("transitionend",n),e.addEventListener("animationend",n),a=window.setTimeout(n,450),e.setAttribute("aria-hidden","true")}function de(t,a={}){let{tone:e="default",duration:n=3600,dismissible:s,id:i}=a;E&&document.body.contains(E)||((E=document.createElement("div")).className="qs-toast-container",E.setAttribute("role","region"),E.setAttribute("aria-live","polite"),E.setAttribute("aria-label","Notifications"),document.body.appendChild(E));a=E;if(i){let e=Array.from(a.children).find(e=>e instanceof HTMLElement&&e.dataset.toastId===i);if(e)return e.classList.remove("qs-toast--exit"),e.dataset.toastId=i,(r=e.querySelector(".qs-toast-message"))&&le(r,re(t)),ce(e,n),T(e,n),{close:()=>I(e),element:e}}let o=document.createElement("div");o.className="qs-toast qs-toast--"+e,o.setAttribute("role","status"),o.setAttribute("aria-live","danger"===e?"assertive":"polite"),i&&(o.dataset.toastId=i);var r=document.createElement("div"),l=(r.className="qs-toast-content",document.createElement("div")),c=(l.className="qs-toast-title",l.textContent=J,document.createElement("div")),t=(c.className="qs-toast-message",re(t)),t=(le(c,t),document.createElement("button")),d=(t.type="button",t.className="qs-toast-close",t.setAttribute("aria-label",H("ui.buttons.cancel")),t.innerHTML="&times;",t.addEventListener("click",e=>{e.preventDefault(),I(o)}),null!=s?s:!(0<n&&isFinite(n)));!d&&0<n&&isFinite(n)&&t.classList.add("qs-toast-close--hidden"),r.appendChild(l),r.appendChild(c),o.appendChild(r),o.appendChild(t),a.appendChild(o),o.offsetWidth,o.classList.add("qs-toast--enter"),ce(o,n),T(o,n),o.addEventListener("mouseenter",()=>{k(o);var e,t=A.get(o);t&&Number.isFinite(t.remaining)&&(e=performance.now(),t.remaining=Math.max(0,t.endTime-e))}),o.addEventListener("mouseleave",()=>{R(o)});let u=0,p=0,m=!1,g=80,h=e=>{m&&((e=(p=e)-u)<0?(e=Math.max(e,-200),o.style.transform=`translateX(${e}px)`,o.style.opacity=String(Math.max(0,1-Math.abs(e)/160))):(o.style.transform="translateX(0px)",o.style.opacity="1"))},f=e=>{m=!1,o.classList.remove("qs-toast--dragging"),o.style.removeProperty("transition"),o.style.removeProperty("transform"),o.style.removeProperty("opacity"),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",S),document.removeEventListener("touchcancel",q),e?I(o,"swipe"):(o.classList.add("qs-toast--enter"),R(o))},y=()=>{m&&f(!1)},v=e=>{h(e.clientX),m&&e.preventDefault()},b=e=>{m&&(e=e.clientX-u,f(e<=-g))},x=e=>{var t;m&&(t=e.touches[0])&&(h(t.clientX),e.preventDefault())},S=e=>{m&&((e=e.changedTouches[0])?(e=e.clientX-u,f(e<=-g)):f(!1))},q=()=>{m&&f(!1)},w=e=>{m=!0,u=e,p=e,o.classList.add("qs-toast--dragging"),k(o),o.style.transition="none"};return o.addEventListener("mousedown",e=>{0===e.button&&(w(e.clientX),document.addEventListener("mousemove",v),document.addEventListener("mouseup",b),window.addEventListener("blur",y,{once:!0}))}),o.addEventListener("touchstart",e=>{e=e.touches[0];e&&(w(e.clientX),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("touchend",S),document.addEventListener("touchcancel",q),window.addEventListener("blur",y,{once:!0}))}),{close:()=>I(o),element:o}}function K(e,t={}){de(e,F({tone:"danger"},t))}function X(e,t={}){de(e,F({tone:"success"},t))}function G(e,t={}){de(e,F({tone:"warning"},t))}function Y(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function r(e,t=L){var a=(null!=(a=Spicetify.SVGIcons)?a:{})[e];return a?`<span class="qs-btn-icon" data-icon-name="${Y(e)}"><svg class="qs-svg-icon" viewBox="0 0 16 16" aria-hidden="true" focusable="false" style="width:${t}px;height:${t}px;">${a}</svg></span>`:""}function Z(e,t){var a=e.querySelector(".qs-btn-label");a?a.textContent=t:e.textContent=t}function ue(e,t){e=e.querySelector(".qs-btn-icon");e&&(t=r(t))&&(e.outerHTML=t)}function pe(){return Date.now()+"-"+Math.random().toString(36).slice(2,8)}function ee(t,a){if(t.length!==a.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==a[e])return!1;return!0}async function me(e,t){try{var a=JSON.stringify(t,null,2),n=new Blob([a],{type:"application/json"});if("function"==typeof(null==window?void 0:window.showSaveFilePicker))try{var s=await(await window.showSaveFilePicker({suggestedName:e,types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]})).createWritable();return await s.write(n),void await s.close()}catch(e){var i=e instanceof Error,o=i?e.name:"Unknown",r=i?e.message:"",l="AbortError"===o&&(r.includes("Failed to create")||r.includes("Failed to truncate")||r.includes("permission")||r.includes("access")||r.includes("denied"));return"AbortError"!==o||l?void K(H("toasts.failedToExportJson",{reason:i?o+": "+r:"Unknown error"}),{duration:1e4}):void 0}var c=URL.createObjectURL(n),d=document.createElement("a");d.href=c,d.download=e,document.body.appendChild(d),d.click(),d.remove(),URL.revokeObjectURL(c),X(H("toasts.exportedToDownloads",{filename:e}))}catch(e){console.warn(J+": downloadJson failed",e),K(H("toasts.failedToExportJson",{reason:e instanceof Error?e.name+": "+e.message:"Unknown error"}),{duration:1e4})}}async function ge(){try{let e;if("function"==typeof(null==window?void 0:window.showOpenFilePicker))try{var[t]=await window.showOpenFilePicker({multiple:!1,types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]}),a=await t.getFile();e=await a.text()}catch(e){var n=e instanceof Error;return"AbortError"!==(n?e.name:"Unknown")&&K(H("toasts.failedToImportJson",{reason:n?e.name+": "+e.message:"Unknown error"}),{duration:1e4}),null}else{let s=document.createElement("input");s.type="file",s.accept=".json,application/json";var i=await new Promise(n=>{s.onchange=async()=>{var e;if(null!=(e=s.files)&&e.length)try{var t,a=s.files[0];0===a.size?(K(H("toasts.failedToImportJsonAccess"),{duration:1e4}),n(null)):0===(t=await a.text()).length?(K(H("toasts.failedToImportJsonAccess"),{duration:1e4}),n(null)):n(t)}catch(e){console.error(J+": file read failed",e),K(H("toasts.failedToImportJson",{reason:e instanceof Error?e.name+": "+e.message:"Unknown error"}),{duration:1e4}),n(null)}else n(null)},s.click()});i&&(e=i)}return"string"!=typeof e?null:JSON.parse(e)}catch(e){return console.warn(J+": uploadJson failed",e),K(H("toasts.failedToImportJson",{reason:e instanceof Error?e.name+": "+e.message:"Unknown error"}),{duration:1e4}),null}}async function he(a){let t,n=new Array(a.length).fill(""),s=[],i=[];var e;if(a.forEach((e,t)=>{var a;e.startsWith("spotify:local:")?n[t]=(t=>{var a=(t=t.split(":"))[2]||"Local",t=t[4]||"track";try{return decodeURIComponent(a.replace(/\+/g," "))+" - "+decodeURIComponent(t.replace(/\+/g," "))}catch(e){return a+" - "+t}})(e):(a=Spicetify.URI.from(e))&&a.id?"track"===a.type?s.push({idx:t,id:a.id,uri:a}):"episode"===a.type?i.push({idx:t,id:a.id,uri:a}):n[t]=e:n[t]=e}),s.length&&(e=s.map(async e=>{var t=Spicetify.URI.idToHex(e.id),t=(await Spicetify.Platform.RequestBuilder.build().withHost("https://spclient.wg.spotify.com/metadata/4").withPath(`/${e.uri.type}/`+t).send()).body,a=null==t?void 0:t.name,t=(null==t?void 0:t.artist)||[],t=Array.isArray(t)?t.map(e=>null==e?void 0:e.name).filter(Boolean).join(", "):"";return{idx:e.idx,id:e.id,display:a?t?t+" - "+a:a:null}}),(await Promise.allSettled(e)).forEach((e,t)=>{t=s[t].idx;"fulfilled"===e.status?(e=e.value,n[e.idx]=e.display||a[e.idx]):n[t]=a[t]})),i.length)for(let e=0;e<i.length;e+=50){var o=i.slice(e,e+50),r=o.map(e=>e.id).join(",");try{var l,c,d,u,p=await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/episodes?ids="+r),m=Array.isArray(null==p?void 0:p.episodes)?p.episodes:[],g=new Map;for(l of m)null!=l&&l.id&&null!=l&&l.name&&(d=(c=null==(t=null==l?void 0:l.show)?void 0:t.name)?c+" - "+l.name:l.name,g.set(l.id,d));for(u of o)n[u.idx]=g.get(u.id)||a[u.idx]}catch(e){for(var h of o)n[h.idx]=a[h.idx]}}return n}function fe(e){return"synced"===e.type?H("snapshots.defaults.myJam"):H("auto"===e.type?"snapshots.types.auto":"snapshots.types.manual")+" "+(t=>{try{return new Date(t).toLocaleString()}catch(e){return""+t}})(e.createdAt)}function ye(e){return e.name||fe(e)}function ve(e){return"string"==typeof e&&e.startsWith("spotify:")?e:e&&"string"==typeof e.uri&&e.uri.startsWith("spotify:")?e.uri:e&&e.contextTrack&&"string"==typeof e.contextTrack.uri&&e.contextTrack.uri.startsWith("spotify:")?e.contextTrack.uri:e&&e.track&&"string"==typeof e.track.uri&&e.track.uri.startsWith("spotify:")?e.track.uri:e&&e.item&&"string"==typeof e.item.uri&&e.item.uri.startsWith("spotify:")?e.item.uri:null}function te(){var e,t,a;try{var n,s=Spicetify.Queue,i=[],o=ve(null==s?void 0:s.track)||ve(null==(t=null==(e=Spicetify.Player)?void 0:e.data)?void 0:t.item),r=(o&&i.push(o),(null==s?void 0:s.nextTracks)||[]);for(n of Array.isArray(r)?r:[]){var l,c=null==n?void 0:n.provider,d=(null==(a=null==n?void 0:n.contextTrack)?void 0:a.metadata)||(null==n?void 0:n.metadata),u=!0===(null==d?void 0:d.is_queued)||"true"===(null==d?void 0:d.is_queued);("queue"===c||u)&&(l=ve(n))&&i.push(l)}if(i.length){var p,m=[];let e=null;for(p of i)p&&p!==e&&m.push(p),e=p;return m}return[]}catch(e){return console.error(J+": Spicetify.Queue read failed",e),[]}}function be(e){return"danger"===e||"primary"===e||"subtle"===e?e:"default"}function xe(){var e=document.createElement("div");return e.className="qs-confirm-backdrop",document.body.appendChild(e),e}function Se(e){var t=document.createElement("div");return t.className="qs-confirm-dialog",e.appendChild(t),t}function ae(e){if(S)return Promise.resolve("cancel");S=!0;let{title:m,message:g,confirmLabel:h=H("ui.buttons.confirm"),cancelLabel:f=H("ui.buttons.cancel"),tone:y="default",extraLabel:v,extraTone:b="subtle"}=e;return new Promise(t=>{let a=xe();var e=Se(a),n=(m&&((n=document.createElement("div")).className="qs-confirm-title",n.textContent=m,e.appendChild(n)),document.createElement("div")),n=(n.className="qs-confirm-message",n.textContent=g,e.appendChild(n),document.createElement("div")),s=(n.className="qs-confirm-actions",document.createElement("button"));s.type="button",s.className="qs-btn subtle",s.textContent=f;let i=document.createElement("button");i.type="button";var o=be(y),r=["qs-btn"];r.push("default"!==o?o:"primary"),i.className=r.join(" "),i.textContent=h;let l=null,c=(v&&((l=document.createElement("button")).type="button",o=be(b),(r=["qs-btn"]).push("default"!==o?o:"primary"),l.className=r.join(" "),l.textContent=v),l?n.append(s,l,i):n.append(s,i),e.appendChild(n),document.activeElement),d=!1;function u(e){d||(d=!0,a.remove(),null!=c&&c.focus&&c.focus(),document.removeEventListener("keydown",p,!0),S=!1,t(e))}function p(e){"Escape"===e.key?(e.preventDefault(),u("cancel")):"Enter"===e.key&&document.activeElement===i&&(e.preventDefault(),u("confirm"))}s.addEventListener("click",()=>u("cancel")),i.addEventListener("click",()=>u("confirm")),l&&l.addEventListener("click",()=>u("extra")),a.addEventListener("click",e=>{e.target===a&&u("cancel")}),document.addEventListener("keydown",p,!0),setTimeout(()=>{i.focus()},0)})}function qe(e){if(S)return Promise.resolve(null);S=!0;let{title:g,message:h,confirmLabel:f=H("ui.buttons.confirm"),cancelLabel:y=H("ui.buttons.cancel"),tone:v="default",defaultValue:b="",placeholder:x}=e;return new Promise(t=>{let a=xe();var e=Se(a);g&&((s=document.createElement("div")).className="qs-confirm-title",s.textContent=g,e.appendChild(s)),h&&((s=document.createElement("div")).className="qs-confirm-message",s.textContent=h,e.appendChild(s));let n=document.createElement("input");n.type="text",n.className="qs-dialog-input",n.value=b,x&&(n.placeholder=x),e.appendChild(n);var s=document.createElement("div"),i=(s.className="qs-confirm-actions",document.createElement("button")),o=(i.type="button",i.className="qs-btn subtle",i.textContent=y,document.createElement("button")),r=(o.type="button",be(v)),l=["qs-btn"];l.push("default"!==r?r:"primary"),o.className=l.join(" "),o.textContent=f,s.append(i,o),e.appendChild(s);let c=document.activeElement,d=!1;function u(e){d||(d=!0,a.remove(),n.removeEventListener("keydown",p),document.removeEventListener("keydown",m,!0),null!=c&&c.focus&&c.focus(),S=!1,t(e))}function p(e){"Enter"===e.key?(e.preventDefault(),u(n.value)):"Escape"===e.key&&(e.preventDefault(),u(null))}function m(e){"Escape"===e.key&&(e.preventDefault(),u(null))}i.addEventListener("click",()=>u(null)),o.addEventListener("click",()=>u(n.value)),n.addEventListener("keydown",p),document.addEventListener("keydown",m,!0),a.addEventListener("click",e=>{e.target===a&&u(null)}),setTimeout(()=>{n.focus(),n.select()},0)})}async function we(){var e,t;try{var a,n,s=te();s.length?(a=fe({type:"manual",createdAt:Date.now()}),null!==(n=null!=(t=null==(e=await qe({title:H("dialogs.saveSnapshot.title"),message:H("dialogs.saveSnapshot.message"),confirmLabel:H("dialogs.saveSnapshot.confirmLabel"),cancelLabel:H("dialogs.saveSnapshot.cancelLabel"),defaultValue:a}))?void 0:e.trim())?t:null)&&(""===n?K(H("toasts.nameCannotBeEmpty")):($({id:pe(),createdAt:Date.now(),name:n===a?void 0:n,type:"manual",items:s,playbackPosition:Spicetify.Player.getProgress()}),X(H("toasts.snapshotSaved"))))):G(H("toasts.noQueueFound"))}catch(e){console.error(J+": manual snapshot failed",e),K(H("toasts.failedToSaveSnapshot"))}}async function Ee(a,e,n){try{if(a.items.length){var t=te();if(!ee(t,a.items)){var s=d();if(s.promptManualBeforeReplace&&!s.syncedSnapshotId&&"synced"===a.type){var i=await ae({title:H("dialogs.saveCurrentQueue.title"),message:H("dialogs.saveCurrentQueue.message"),confirmLabel:H("dialogs.saveCurrentQueue.confirmLabel"),cancelLabel:H("dialogs.saveCurrentQueue.cancelLabel"),extraLabel:H("dialogs.saveCurrentQueue.extraLabel"),extraTone:"danger",tone:"primary"});if("extra"===i)return;"confirm"===i&&await we()}e&&(e.disabled=!0,Z(e,H("snapshots.actions.replacing")));var o=null==n?void 0:n.getSyncManager(),r=(o&&o.suspend(),a.items.slice()),l=r.shift();try{await Spicetify.Platform.PlayerAPI.clearQueue()}catch(e){console.warn(J+": clearQueue failed (non-fatal)",e)}if(await new Promise(e=>setTimeout(e,100)),l.startsWith("spotify:local:"))try{await Spicetify.Platform.PlayerAPI.play({uri:"spotify:internal:local-files",pages:[{items:[{uri:l}]}]},{},{skipTo:{index:0}})}catch(e){return console.warn(J+": local fallback failed",e),void K(H("toasts.failedToStartPlayback"))}else try{await Spicetify.Player.playUri(l)}catch(e){try{await Spicetify.Platform.PlayerAPI.play({uri:l},{},{})}catch(e){return console.warn(J+": failed to start first track",e),void K(H("toasts.failedToStartPlayback"))}}if(await new Promise(e=>setTimeout(e,250)),void 0!==a.playbackPosition&&0<a.playbackPosition)try{await Spicetify.Platform.PlayerAPI.seekTo(a.playbackPosition),console.log(`${J}: seeked to saved position ${a.playbackPosition}ms`)}catch(e){console.warn(`${J}: failed to seek to saved position ${a.playbackPosition}ms`,e);try{await Spicetify.Player.seek(a.playbackPosition),console.log(`${J}: seeked using fallback API to ${a.playbackPosition}ms`)}catch(e){console.error(J+": both seek methods failed",e)}}let t=0;for(let e=0;e<r.length;e+=100){var c=r.slice(e,e+100).map(e=>({uri:e}));try{await Spicetify.Platform.PlayerAPI.addToQueue(c),t+=c.length}catch(e){console.warn(J+": addToQueue chunk failed",e)}}t===r.length?X(H("toasts.queueReplaced",{count:a.items.length})):G(H("toasts.replaceResult",{added:t+1,total:a.items.length}))}}else G(H("toasts.snapshotEmpty"))}catch(e){console.error(J+": replace queue failed",e),K(H("toasts.failedToReplace"))}finally{null!=n&&n.getSyncManager()&&await n.getSyncManager().resume(),e&&(e.disabled=!1,Z(e,H("ui.buttons.replaceQueue")))}}function Ae(e){return e&&"string"==typeof e.id&&"number"==typeof e.createdAt&&("auto"===e.type||"manual"===e.type||"synced"===e.type)&&Array.isArray(e.items)&&e.items.every(e=>"string"==typeof e)}function l(e){var e=e.getSettings(),t=!!e.syncedSnapshotId;let a=e.autoEnabled&&!t;var n=document.querySelector("#qs-auto-enabled"),s=document.querySelectorAll('input.qs-radio[name="qs-auto-mode"]'),i=document.querySelector("#qs-auto-interval-mins"),o=document.querySelector("#qs-only-new"),r=document.querySelector("#qs-max-autos"),l=document.querySelector("#qs-queue-max-size"),c=document.querySelector("#qs-queue-warn-threshold"),n=(n&&(n.disabled=t),s.forEach(e=>{e.disabled=!a}),i&&(i.disabled=!(a&&"timer"===e.autoMode)),o&&(o.disabled=!a),r&&(r.disabled=!a),e.queueWarnEnabled);l&&(l.disabled=!n),c&&(c.disabled=!n)}function ne(t){Array.from(U.keys()).forEach(e=>{e!==t&&Te(e)})}function Te(e){var t=U.get(e);t&&(t.input.removeEventListener("keydown",t.onKeyDown),t.input.removeEventListener("blur",t.onBlur),t.input.isConnected&&t.input.remove(),t.labelEl.style.display="",t.labelEl.textContent=t.originalLabel,t.actionsEl&&(t.actionsEl.style.display=null!=(t=t.originalActionsDisplay)?t:""),U.delete(e))}function c(e,t,a={}){var{action:a,id:n,tone:s="default",title:i}=a,o=["qs-btn"],s=("danger"===s&&o.push("danger"),"primary"===s&&o.push("primary"),"subtle"===s&&o.push("subtle"),[]),a=(a&&s.push(`data-action="${a}"`),n&&s.push(`id="${n}"`),i&&s.push(`title="${Y(i)}"`),s.length?" "+s.join(" "):""),n=r(t);return`<button type="button" class="${o.join(" ")}"${a}>${n}<span class="qs-btn-label">${Y(e)}</span></button>`}function ke(e,t,a,n={}){var{tone:n="default"}=n,s=["qs-icon-btn"];return"danger"===n&&s.push("danger"),`<button type="button" class="${s.join(" ")}" data-action="${Y(e)}" title="${Y(a)}">${r(t)}</button>`}function u(e,t="default"){var a=["qs-pill"];return"default"!==t&&a.push({accent:"qs-pill--accent",version:"qs-pill--version",channel:"qs-pill--channel","active-sync":"qs-pill--active-sync"}[t]),`<span class="${a.join(" ")}">${Y(e)}</span>`}function Ie(e,t={}){let{isSynced:i=!1,activeSyncId:o=!1}=t;return e.map(e=>{var t=Y(ye(e)),a=e.items.some(e=>e.startsWith("spotify:local:")),n=i&&e.id===o,s=[],a=(n&&s.push(u(H("ui.labels.activeSync"),"active-sync")),s.push(u(e.items.length+" "+(1===e.items.length?H("ui.itemSingular"):H("ui.itemPlural")),"accent")),a&&s.push(u(H("ui.includesLocal"))),s.join("")),s="auto"===e.type?"clock":"synced"===e.type?"repeat":"playlist",n=i?n?`${c(H("ui.buttons.exitSyncMode"),"x",{action:"deactivate-sync",tone:"danger"})}
             ${c(H("ui.buttons.export"),"download",{action:"export",title:H("ui.labels.exportToPlaylist")})}
             `+c(H("ui.buttons.convertToManual"),"copy",{action:"convert-to-manual",title:H("ui.labels.convertToManual")}):`${c(H("ui.buttons.activateSync"),"play",{action:"activate-sync",tone:"primary"})}
             ${c(H("ui.buttons.export"),"download",{action:"export",title:H("ui.labels.exportToPlaylist")})}
             `+c(H("ui.buttons.convertToManual"),"copy",{action:"convert-to-manual",title:H("ui.labels.convertToManual")}):"";return`
          <div class="qs-row" data-id="${e.id}">
            <div class="qs-row-main">
              <div class="qs-row-title">
                ${r(s)}
                <span>${t}</span>
                <span class="qs-title-actions">
                  ${ke("rename","edit",H("ui.labels.renameSnapshot"))}
                  ${e.name?ke("reset-name","repeat",H("ui.labels.resetName")):""}
                  ${ke("delete","x",H("ui.labels.deleteSnapshot"),{tone:"danger"})}
                </span>
              </div>
              <div class="qs-row-meta">${a}</div>
              <div class="qs-row-actions">
                ${i?n:`
                  ${c(H("ui.buttons.view"),"chevron-right",{action:"toggle-items",title:H("ui.labels.toggleItems")})}
                  ${c(H("ui.buttons.replaceQueue"),"skip-forward",{action:"replace-queue",title:H("ui.labels.replaceQueue"),tone:"primary"})}
                  ${c(H("ui.buttons.appendToQueue"),"plus-alt",{action:"append-queue",title:H("ui.labels.appendQueue")})}
                  ${c(H("ui.buttons.export"),"download",{action:"export",title:H("ui.labels.exportToPlaylist")})}
                `}
              </div>
            </div>
          </div>
          <div class="qs-items" data-id="${e.id}" style="display:none">
            <div class="qs-items-body">${H("ui.loading")}</div>
          </div>
        `}).join("")}function Le(e){var t=D(),a=t.filter(e=>"synced"===e.type),n=t.filter(e=>"auto"===e.type),t=t.filter(e=>"manual"===e.type),s=!!e.syncedSnapshotId,e=Ie(a,{isSynced:!0,activeSyncId:e.syncedSnapshotId,syncModeActive:s}),i=Ie(n,{syncModeActive:s}),o=Ie(t,{syncModeActive:s});return`
      ${`
      <div class="qs-section-card${s?" qs-sync-active":""}">
        <div class="qs-section-head">
          <div class="qs-section-heading">
            ${r("repeat")}
            ${u(String(a.length),"accent")}
            <div class="qs-section-text">
              <div class="qs-section-name">${H("ui.sections.syncedSnapshots")}</div>
              <div class="qs-section-caption">${H("ui.sections.syncedSnapshotsCaption")}</div>
            </div>
          </div>
          <div class="qs-actions">
            ${c(H("ui.buttons.createSyncedSnapshot"),"plus-alt",{id:"qs-new-synced",tone:"primary"})}
          </div>
        </div>
        <div class="qs-section-body">
          ${e||`<div class="qs-empty">${H("ui.empty.noSyncedSnapshots")}</div>`}
        </div>
      </div>
    `}
      <div class="qs-section-card">
        <div class="qs-section-head">
          <div class="qs-section-heading">
            ${r("playlist")}
            ${u(String(t.length),"accent")}
            <div class="qs-section-text">
              <div class="qs-section-name">${H("ui.sections.manualSnapshots")}</div>
              <div class="qs-section-caption">${H("ui.sections.manualSnapshotsCaption")}</div>
            </div>
          </div>
          <div class="qs-actions">
            ${c(H("ui.buttons.exportAll"),"download",{id:"qs-export-manuals",tone:"subtle"})}
            ${c(H("ui.buttons.saveNow"),"plus-alt",{id:"qs-new-manual",tone:"primary"})}
          </div>
        </div>
        <div class="qs-section-body">
          ${o||`<div class="qs-empty">${H("ui.empty.noManualSnapshots")}</div>`}
        </div>
      </div>
      <div class="qs-section-card">
        <div class="qs-section-head">
          <div class="qs-section-heading">
            ${r("clock")}
            ${u(String(n.length),"accent")}
            <div class="qs-section-text">
              <div class="qs-section-name">${H("ui.sections.automaticSnapshots")}</div>
              <div class="qs-section-caption">${H("ui.sections.automaticSnapshotsCaption")}</div>
            </div>
          </div>
          <div class="qs-actions">
            ${c(H("ui.buttons.clearAll"),"x",{id:"qs-clear-autos",tone:"danger"})}
            ${c(H("ui.buttons.exportAll"),"download",{id:"qs-export-autos",tone:"subtle"})}
          </div>
        </div>
        <div class="qs-section-body">
          ${i||`<div class="qs-empty">${H("ui.empty.noAutomaticSnapshots")}</div>`}
        </div>
      </div>
    `}function Ce(){return`
        <div class="qs-header">
          <div class="qs-header-title">
            <div class="qs-header-icon">${r("queue",20)}</div>
            <span class="qs-header-badges">${u("v"+e,"version")}${t?u(t.toUpperCase(),"channel"):""}</span>
          </div>
          <div class="qs-header-actions">
            ${c(H("ui.buttons.refresh"),"repeat",{id:"qs-refresh",tone:"subtle"})}
            ${c(H("ui.buttons.exportSettings"),"download",{id:"qs-export-settings",title:H("ui.labels.exportSettings")})}
            ${c(H("ui.buttons.importSnapshots"),"chart-up",{id:"qs-import-snapshots",title:H("ui.labels.importSnapshots")})}
            ${c(H("ui.buttons.importSettings"),"chart-up",{id:"qs-import-settings",title:H("ui.labels.importSettings")})}
          </div>
        </div>
    `}function Me(e){var t=e.settingsCollapsed?"collapsed":"",a=!!e.syncedSnapshotId;return`
        <div class="qs-settings ${t}">
          <div class="qs-settings-header">
            <div class="qs-section-heading">
              ${r("grid-view")}
              <div class="qs-section-text">
                <div class="qs-section-name">${H("ui.sections.settings")}</div>
                  <div class="qs-section-caption">${H("ui.sections.settingsCaption")}</div>
              </div>
            </div>
            <button type="button" class="qs-settings-toggle" id="qs-settings-toggle">
              ${r("chevron-right")}
            </button>
          </div>
          <div class="qs-settings-content">
            <div class="qs-setting">
              <label class="qs-checkbox${a?" qs-disabled":""}"><input type="checkbox" id="qs-auto-enabled" ${e.autoEnabled?"checked":""} ${a?"disabled":""}/> ${r("brightness")}${H("settings.autoEnabled")}</label>
              <div class="qs-dim${a?" qs-disabled":""}">${H("settings.autoMode")} 
                <div class="qs-radio-group" id="qs-auto-mode-group">
                  <label class="qs-radio-label"><input type="radio" class="qs-radio" name="qs-auto-mode" value="timer" ${"timer"===e.autoMode?"checked":""} ${e.autoEnabled&&!a?"":"disabled"}/><span>${r("clock")} ${H("settings.timeBased")}</span></label>
                  <label class="qs-radio-label"><input type="radio" class="qs-radio" name="qs-auto-mode" value="on-change" ${"on-change"===e.autoMode?"checked":""} ${e.autoEnabled&&!a?"":"disabled"}/><span>${r("shuffle")} ${H("settings.queueChanges")}</span><span class="qs-icon"><span class="qs-icon-glyph">ⓘ</span><span class="qs-tooltip"><span class="qs-tooltip-emph">${H("settings.experimental")}</span>${H("settings.experimentalTooltip")}</span></span></label>
                </div>
              </div>
              <div class="qs-setting" style="margin-top:6px">
                <label class="qs-checkbox${a?" qs-disabled":""}"><input type="checkbox" id="qs-only-new" ${e.onlyNewItems?"checked":""} ${e.autoEnabled&&!a?"":"disabled"}/> ${r("search")} ${H("settings.onlyNewItems")}</label>
                <div style="opacity:0.7; font-size:12px">${H("settings.onlyNewItemsDescription")}</div>
              </div>
              <div class="qs-setting" style="margin-top:6px">
                <div style="opacity:0.7; font-size:12px">${H("settings.equalQueuesNote")}</div>
              </div>
              <div class="qs-setting" style="margin-top:12px">
                <label class="qs-checkbox"><input type="checkbox" id="qs-queue-warn-enabled" ${e.queueWarnEnabled?"checked":""}/> ${r("exclamation-circle")} ${H("settings.queueWarnEnabled")}</label>
                <div style="opacity:0.7; font-size:12px">${H("settings.queueWarnDescription")}</div>
              </div>
              <div class="qs-setting" style="margin-top:12px">
                <label class="qs-checkbox"><input type="checkbox" id="qs-prompt-manual-before-replace" ${e.promptManualBeforeReplace?"checked":""}/> ${r("copy")} ${H("settings.promptManualBeforeReplace")}</label>
                <div style="opacity:0.7; font-size:12px">${H("settings.promptManualDescription")}</div>
              </div>
              <div class="qs-setting" style="margin-top:12px">
                <label>${r("search")} ${H("settings.language")}</label>
                <select class="qs-input" id="qs-language">
                  <option value="" ${e.language?"":"selected"}>${H("settings.autoDetected")}</option>
                  <option value="en" ${"en"===e.language?"selected":""}>English</option>
                  <option value="de" ${"de"===e.language?"selected":""}>Deutsch</option>
                  <option value="es" ${"es"===e.language?"selected":""}>Español</option>
                  <option value="fr" ${"fr"===e.language?"selected":""}>Français</option>
                </select>
                <div style="opacity:0.7; font-size:12px">${H("settings.languageDescription")}</div>
              </div>
            </div>
            <div class="qs-right">
              <div class="qs-setting${a?" qs-disabled":""}">
                <label>${r("clock")} ${H("settings.interval")}</label>
                <input class="qs-input" type="number" id="qs-auto-interval-mins" min="0.5" step="0.5" value="${(e.autoIntervalMs/6e4).toFixed(2)}" ${e.autoEnabled&&"timer"===e.autoMode&&!a?"":"disabled"} />
                <div style="opacity:0.7; font-size:12px">${H("settings.intervalDescription")}</div>
              </div>
              <div class="qs-setting${a?" qs-disabled":""}">
                <label>${r("chart-up")} ${H("settings.maxAutomaticSnapshots")}</label>
                <input class="qs-input" type="number" id="qs-max-autos" min="1" step="1" value="${e.maxAutosnapshots}" ${e.autoEnabled&&!a?"":"disabled"} />
                <div style="opacity:0.7; font-size:12px">${H("settings.maxAutomaticDescription")}</div>
              </div>
              <div class="qs-setting">
                <label>${r("queue")} ${H("settings.queueMaxSize")}</label>
                <input class="qs-input" type="number" id="qs-queue-max-size" min="10" step="1" value="${e.queueMaxSize}" ${e.queueWarnEnabled?"":"disabled"} />
                <div style="opacity:0.7; font-size:12px">${H("settings.queueMaxSizeDescription")}</div>
              </div>
              <div class="qs-setting">
                <label>${r("exclamation-circle")} ${H("settings.queueWarnThreshold")}</label>
                <input class="qs-input" type="number" id="qs-queue-warn-threshold" min="0" step="1" value="${e.queueWarnThreshold}" ${e.queueWarnEnabled?"":"disabled"} />
              </div>
            </div>
          </div>
        </div>
    `}function Ne(){var e=document.querySelector(".qs-header");e&&(e.outerHTML=Ce())}function se(e){var t=document.querySelector(".qs-settings");t&&(t.outerHTML=Me(e.getSettings()),setTimeout(()=>{l(e)},0))}function De(R){var e=R.getSettings(),t=Le(e),e=Me(e),e=`
      <div class="qs-container">
        ${Ce()}
        ${e}
        <div id="qs-list">
          ${t||`<div style="opacity:0.7">${H("ui.empty.noSnapshots")}</div>`}
        </div>
      </div>
    `;Spicetify.PopupModal.display({title:J,content:e,isLarge:!0}),a&&(document.removeEventListener("click",a,!0),a=null),i&&(document.removeEventListener("change",i,!0),i=null),a=async function(e){var a=document.querySelector(".qs-container"),n=e.target;if(a&&n&&a.contains(n)&&e.stopPropagation(),a&&n){var t,a=_(),n=n.closest(".qs-btn, .qs-icon-btn, .qs-settings-toggle");if("qs-new-manual"===(null==n?void 0:n.id))e.preventDefault(),ne(),await we(),ie(R);else if("qs-new-synced"===(null==n?void 0:n.id)){e.preventDefault(),ne();try{var s=R.getSettings(),i=!!s.syncedSnapshotId;if(i)if("confirm"!==await ae({title:H("dialogs.switchSyncedSnapshot.title"),message:H("dialogs.switchSyncedSnapshot.message"),confirmLabel:H("dialogs.switchSyncedSnapshot.confirmLabel"),cancelLabel:H("dialogs.switchSyncedSnapshot.cancelLabel"),tone:"primary"}))return;var o=i?[]:await te(),r=fe({type:"synced",createdAt:Date.now()}),l=null!=(t=null==(u=await qe({title:H("dialogs.saveSyncedSnapshot.title"),message:H("dialogs.saveSyncedSnapshot.message"),confirmLabel:H("dialogs.saveSyncedSnapshot.confirmLabel"),cancelLabel:H("dialogs.saveSyncedSnapshot.cancelLabel"),defaultValue:r}))?void 0:u.trim())?t:null;if(null===l)return;if(""===l)return void K(H("toasts.nameCannotBeEmpty"));var c={id:pe(),createdAt:Date.now(),name:l===r?void 0:l,type:"synced",items:o,playbackPosition:Spicetify.Player.getProgress()},d=(V([c,..._()]),j(F({},s),{syncedSnapshotId:c.id}));R.setSettings(d),i&&(await Spicetify.Platform.PlayerAPI.clearQueue(),await Ee(c,n,R)),ie(R),se(R),X(H("toasts.syncActivated"))}catch(e){console.error(J+": synced snapshot creation failed",e),K(H("toasts.failedToCreateSyncedSnapshot"))}}else{if("qs-export-settings"===(null==n?void 0:n.id))return e.preventDefault(),u=R.getSettings(),me(B+"-settings.json",u);if("qs-import-settings"===(null==n?void 0:n.id))e.preventDefault(),t=R,(r=await ge())&&(!(l=r)||"boolean"!=typeof l.autoEnabled||"number"!=typeof l.autoIntervalMs||"number"!=typeof l.maxAutosnapshots||"timer"!==l.autoMode&&"on-change"!==l.autoMode||"boolean"!=typeof l.onlyNewItems||"boolean"!=typeof l.queueWarnEnabled||"number"!=typeof l.queueMaxSize||"number"!=typeof l.queueWarnThreshold||"boolean"!=typeof l.promptManualBeforeReplace?K(H("toasts.invalidSettingsFile")):"confirm"===await ae({title:H("dialogs.importSettings.title"),message:H("dialogs.importSettings.message"),confirmLabel:H("dialogs.importSettings.confirmLabel"),tone:"danger"})&&(t.setSettings(r),se(t),X(H("toasts.settingsImported"))));else{if("qs-import-snapshots"===(null==n?void 0:n.id))return e.preventDefault(),(async()=>{if(e=await ge()){var e=Array.isArray(e)?e:[e],a=e.filter(Ae);if(a.length!==e.length&&K(H("toasts.someImportedSnapshotsInvalid")),a.length){e=_();let t=new Set(e.map(e=>e.id));a=a.filter(e=>!t.has(e.id));a.length?(V([...e,...a]),ie(),X(H("toasts.snapshotsImported",{count:a.length,plural:1===a.length?"snapshot":"snapshots"}))):X(H("toasts.allSnapshotsAlreadyExist"))}else K(H("toasts.noValidSnapshotsToImport"))}})();if("qs-export-manuals"===(null==n?void 0:n.id))return e.preventDefault(),o=a.filter(e=>"manual"===e.type),me(B+"-manual-snapshots.json",o);if("qs-export-autos"===(null==n?void 0:n.id))return e.preventDefault(),s=a.filter(e=>"auto"===e.type),me(B+"-auto-snapshots.json",s);if("qs-clear-autos"===(null==n?void 0:n.id))return e.preventDefault(),0===(d=a.filter(e=>"auto"===e.type).length)?void K(H("toasts.noAutomaticSnapshotsToClear")):"confirm"!==await ae({title:H("dialogs.clearAutomaticSnapshots.title"),message:H("dialogs.clearAutomaticSnapshots.message",{count:d}),confirmLabel:H("dialogs.clearAutomaticSnapshots.confirmLabel"),tone:"danger"})?void 0:(c=(i=_()).filter(e=>"manual"===e.type),i=i.filter(e=>"synced"===e.type),V([...c,...i]),ie(R),void X(H("toasts.clearedAutomaticSnapshots",{count:d})));if("qs-refresh"===(null==n?void 0:n.id))e.preventDefault(),Ne(),se(R),ie(R);else if("qs-settings-toggle"===(null==n?void 0:n.id))e.preventDefault(),u=R.getSettings(),o=j(F({},u),{settingsCollapsed:!u.settingsCollapsed}),R.setSettings(o),s=document.querySelector(".qs-settings"),d=document.querySelector(".qs-settings-content"),s&&d&&(o.settingsCollapsed?s.classList.add("collapsed"):s.classList.remove("collapsed"));else if(n){var u=n.closest(".qs-row"),d=n.getAttribute("data-action"),o=n.classList.contains("qs-icon-btn");if(u&&(d||!o)){let t=u.getAttribute("data-id");if(t){U.has(t)||ne(t);s=a.find(e=>e.id===t);if(s){if(o)return"rename"===d?(e.preventDefault(),void function s(i,o,r){if(i.isConnected){let n=o.id;if(U.has(n))(a=U.get(n))&&(a.input.focus(),a.input.select());else{var a=i.querySelector(".qs-row-title");if(a){var l=Array.from(a.querySelectorAll("span"))[1];if(l){var c=null!=(c=a.querySelector(".qs-title-actions"))?c:void 0,d=null!=(d=l.textContent)?d:"",u=fe(o),p=null!=(p=null==c?void 0:c.style.display)?p:"";let e=document.createElement("input"),t=(e.type="text",e.value=null!=(m=o.name)?m:d,e.className="qs-inline-input",e.setAttribute("aria-label",H("ui.labels.snapshotName")),l.style.display="none",c&&(c.style.display="none"),a.insertBefore(e,null!=c?c:null),e=>{var t,a=U.get(n);a&&(Te(n),e)&&((e=a.input.value.trim())?e!==a.originalLabel.trim()&&(e===a.generatedName?K(H("toasts.nameMustDifferFromDefault"),{duration:2e3}):0<=(t=(a=_()).findIndex(e=>e.id===n))&&(a[t].name=e,V(a),ie(r))):(K(H("toasts.nameCannotBeEmpty"),{duration:2e3}),s(i,o,r)))});var m={input:e,labelEl:l,originalLabel:d,actionsEl:c,originalActionsDisplay:p,generatedName:u,onKeyDown(e){"Enter"===e.key?(e.preventDefault(),t(!0)):"Escape"===e.key&&(e.preventDefault(),t(!1))},onBlur(){t(!0)}};U.set(n,m),e.addEventListener("keydown",m.onKeyDown),e.addEventListener("blur",m.onBlur),setTimeout(()=>{e.focus(),e.select()},0)}}}}}(u,s,R)):"reset-name"===d?(e.preventDefault(),void(0<=(o=a.findIndex(e=>e.id===t))&&(delete a[o].name,V(a),ie(R)))):"delete"!==d||"confirm"!==await ae({title:H("dialogs.deleteSnapshot.title"),message:H("dialogs.deleteSnapshot.message"),confirmLabel:H("dialogs.deleteSnapshot.confirmLabel"),tone:"danger"})?void 0:(o=ye(s),V(a.filter(e=>e.id!==t)),(a=R.getSettings()).syncedSnapshotId===t&&(a=j(F({},a),{syncedSnapshotId:void 0}),R.setSettings(a),se(R)),ie(R),void X(H("toasts.snapshotDeleted",{name:o})));var p,m,a=d;if(a)if("activate-sync"===a){if(!O.has(t)){O.add(t);try{var g=R.getSettings();if(g.promptManualBeforeReplace&&!g.syncedSnapshotId)if(!ee(te(),s.items)){var h=await ae({title:H("dialogs.saveCurrentQueue.title"),message:H("dialogs.saveCurrentQueue.message"),confirmLabel:H("dialogs.saveCurrentQueue.confirmLabel"),cancelLabel:H("dialogs.saveCurrentQueue.cancelLabel"),extraLabel:H("dialogs.saveCurrentQueue.extraLabel"),extraTone:"danger",tone:"primary"});if("extra"===h)return void O.delete(t);"confirm"===h&&(await we(),ie(R))}var f=j(F({},g),{syncedSnapshotId:s.id});R.setSettings(f),await Ee(s,n,R),ie(R),se(R),X(H("toasts.syncActivated"))}catch(e){console.error(J+": activate sync failed",e),K(H("toasts.failedToActivateSync"))}finally{O.delete(t)}}}else if("deactivate-sync"===a)e.preventDefault(),o=R.getSettings(),d=j(F({},o),{syncedSnapshotId:void 0}),R.setSettings(d),ie(R),se(R),X(H("toasts.syncDeactivated"));else{if("convert-to-manual"===a)return e.preventDefault(),"confirm"!==await ae({title:H("dialogs.convertToManual.title"),message:H("dialogs.convertToManual.message"),confirmLabel:H("dialogs.convertToManual.confirmLabel"),tone:"primary"})?void 0:void(0<=(g=(h=_()).findIndex(e=>e.id===t))&&(h[g].type="manual",V(h),(f=R.getSettings()).syncedSnapshotId===t&&(o=j(F({},f),{syncedSnapshotId:void 0}),R.setSettings(o),se(R)),ie(R),X(H("toasts.convertedToManual"))));if("toggle-items"===a){d=u.nextElementSibling,e=n;if(d&&d.classList.contains("qs-items"))if("none"===d.style.display||!d.style.display){d.style.display="block",Z(e,H("ui.buttons.hide")),ue(e,"chart-down");g=d.querySelector(".qs-items-body");if(g){g.textContent=H("ui.loading");try{p=s;var P=await((m=oe.get(p.id))||(m=await he(p.items),oe.set(p.id,m),m));g.innerHTML=P.map((e,t)=>`<div>${t+1}. ${Y(e)}</div>`).join("")}catch(e){g.textContent=H("ui.failedToLoadItems")}}}else d.style.display="none",Z(e,H("ui.buttons.view")),ue(e,"chevron-right")}else if("export"===a){if(!O.has(t)){O.add(t);var y=s,h=n;try{if(y.items.length){h&&(h.disabled=!0,Z(h,H("snapshots.actions.exporting")));var v=await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/me"),b=null==v?void 0:v.id;if(!b)throw new Error("No user id");var x=ye(y),S=await Spicetify.CosmosAsync.post(`https://api.spotify.com/v1/users/${encodeURIComponent(b)}/playlists`,{name:x,description:`Saved from ${J} on `+new Date(y.createdAt).toLocaleString(),public:!1}),q=null==S?void 0:S.id;if(!q)throw new Error("Playlist creation failed");var W="spotify:playlist:"+q;let t=0;var w=y.items.length;for(let e=0;e<y.items.length;e+=100){var E=y.items.slice(e,e+100);try{await Spicetify.Platform.PlaylistAPI.add(W,E,{after:"end"}),t+=E.length}catch(e){console.warn(J+": failed to add a chunk",e)}}if(t===w){X(H("toasts.exportedToPlaylist",{name:x}));try{var A=Spicetify.URI.playlistV2URI(q),T=null==A?void 0:A.toURLPath(!0),k=Spicetify.Platform.History;if(T)if(null!=k&&k.push)try{k.push(T)}catch(e){k.push({pathname:T})}else window.location.hash=T}catch(e){}}else G(H("toasts.exportResult",{added:t,total:w}));try{console.log(J+": Export result",{snapshotId:y.id,totalExpected:w,totalAdded:t})}catch(e){}}else G(H("toasts.nothingToExport"))}catch(e){console.error(J+": export failed",e),K(H("toasts.failedToExport"))}finally{h&&(h.disabled=!1,Z(h,H("ui.buttons.export")))}await 0,O.delete(t)}}else if("append-queue"===a){if(!O.has(t)){O.add(t);try{var I=s,L=n;try{if(I.items.length){L&&(L.disabled=!0,Z(L,H("snapshots.actions.appending")));var Q=te();let t=new Set(Q);var C=I.items.filter(e=>!t.has(e));if(C.length){let t=0;for(let e=0;e<C.length;e+=100){var M=C.slice(e,e+100),N=M.map(e=>({uri:e}));try{await Spicetify.Platform.PlayerAPI.addToQueue(N),t+=N.length}catch(e){console.warn(J+": addToQueue chunk failed",e);for(var D of M)try{await Spicetify.Platform.PlayerAPI.addToQueue([{uri:D}]),t+=1}catch(e){console.warn(J+": addToQueue single failed",{uri:D,error:e})}}}var $=C.length;t===$?X(H("toasts.addedToQueue",{count:$,plural:H(1===$?"ui.itemSingular":"ui.itemPlural")})):0<t?G(H("toasts.appendResult",{added:t,total:$})):K(H("toasts.failedToAppend"));try{console.log(J+": Append result",{snapshotId:I.id,totalExpected:$,added:t})}catch(e){}}else G(H("toasts.allItemsAlreadyInQueue"))}else G(H("toasts.snapshotEmpty"))}catch(e){console.error(J+": append queue failed",e),K(H("toasts.failedToAppend"))}finally{L&&(L.disabled=!1,Z(L,H("ui.buttons.appendToQueue")))}await 0}finally{O.delete(t)}}}else if("replace-queue"===a&&!O.has(t)){O.add(t);try{if(R.getSettings().promptManualBeforeReplace){var z=await ae({title:H("dialogs.saveCurrentQueue.title"),message:H("dialogs.saveCurrentQueue.message"),confirmLabel:H("dialogs.saveCurrentQueue.confirmLabel"),cancelLabel:H("dialogs.saveCurrentQueue.cancelLabel"),extraLabel:H("dialogs.saveCurrentQueue.extraLabel"),extraTone:"danger",tone:"primary"});if("extra"===z)return;"confirm"===z&&(await we(),ie(R))}await Ee(s,n,R)}finally{O.delete(t)}}}}}}}}}}},i=function(e){var t,a=document.querySelector(".qs-container"),n=e.target;a&&n&&a.contains(n)&&(e.stopPropagation(),"qs-auto-enabled"===n.id?(a=!!n.checked,e=R.getSettings(),e=j(F({},e),{autoEnabled:a}),R.setSettings(e),ne(),l(R)):"qs-auto-mode"===n.name?(a=n,e=R.getSettings(),a="on-change"===a.value?"on-change":"timer",e=j(F({},e),{autoMode:a}),R.setSettings(e),l(R)):"qs-only-new"===n.id?(a=!!n.checked,e=R.getSettings(),e=j(F({},e),{onlyNewItems:a}),R.setSettings(e)):"qs-auto-interval-mins"===n.id?(a=n,e=R.getSettings(),a=parseFloat(a.value),a=isFinite(a)&&.5<=a?a:e.autoIntervalMs/6e4,e=j(F({},e),{autoIntervalMs:Math.round(6e4*a)}),R.setSettings(e)):"qs-max-autos"===n.id?(a=n,e=R.getSettings(),a=parseInt(a.value,10),a=Number.isFinite(a)&&0<a?a:e.maxAutosnapshots,e=j(F({},e),{maxAutosnapshots:a}),R.setSettings(e),a=e,t=(e=D()).filter(e=>"manual"===e.type),a=e.filter(e=>"auto"===e.type).slice(0,a.maxAutosnapshots),e=e.filter(e=>"synced"===e.type),V([...t,...a,...e]),ie(R)):"qs-queue-warn-enabled"===n.id?(t=n.checked,a=R.getSettings(),e=j(F({},a),{queueWarnEnabled:t}),R.setSettings(e),l(R)):"qs-queue-max-size"===n.id?(a=n,e=R.getSettings(),a=parseInt(a.value,10),a=Number.isFinite(a)&&1<a?a:e.queueMaxSize,e=j(F({},e),{queueMaxSize:a}),R.setSettings(e)):"qs-queue-warn-threshold"===n.id?(a=n,e=R.getSettings(),a=parseInt(a.value,10),a=Number.isFinite(a)&&0<=a?a:e.queueWarnThreshold,e=j(F({},e),{queueWarnThreshold:a}),R.setSettings(e)):"qs-prompt-manual-before-replace"===n.id?(a=n.checked,e=R.getSettings(),e=j(F({},e),{promptManualBeforeReplace:a}),R.setSettings(e)):"qs-language"===n.id&&(a=n.value||void 0,e=R.getSettings(),n=j(F({},e),{language:a}),R.setSettings(n),P(),Ne(),se(R),ie(R)))},document.addEventListener("click",a,!0),document.addEventListener("change",i,!0),l(R)}function ie(e){ne();var t=document.getElementById("qs-list");t&&(e=Le(null!=(e=null==e?void 0:e.getSettings())?e:d()),t.innerHTML=e||`<div style="opacity:0.7">${H("ui.empty.noSnapshots")}</div>`)}function $e(){let n=[],t=null,i=[],o=null,r=null;function l(){null!==t&&(clearInterval(t),t=null)}async function c(e){try{if(e.autoEnabled){let a=te();if(a.length){if(e.onlyNewItems){let t=new Set(n);if(!a.some(e=>!t.has(e)))return void(n=a)}n=(ee(a,n)||_().filter(e=>"auto"===e.type).some(e=>ee(e.items,a))||$({id:pe(),createdAt:Date.now(),type:"auto",items:a},e),a)}else console.log(J+": queue is empty, skipping auto snapshot")}}catch(e){console.error(J+": auto snapshot error",e),K(H("toasts.failedToSaveAutomatic"))}}function d(e){l(),e.autoEnabled&&(t=window.setInterval(()=>c(e),e.autoIntervalMs),r=e.autoIntervalMs)}function u(){for(var e of i)e();i=[]}return{startAutoTimer:d,primeFromExisting:function(){var e,t=D()[0];null!=(e=null==t?void 0:t.items)&&e.length&&(n=t.items.slice())},applyAutoMode:function(e){var t=e.autoEnabled?e.autoMode:null;if(t===o)"timer"===t&&r!==e.autoIntervalMs&&d(e);else{if("on-change"===o?u():"timer"===o&&l(),"on-change"===t){var a,n,s=e;if(u(),s.autoEnabled)try{let e=null==(n=null==(a=null==Spicetify?void 0:Spicetify.Player)?void 0:a.origin)?void 0:n._events;if(null==e||!e.addListener||null==e||!e.removeListener)throw new Error("events API not available");let t=e=>{c(s)};e.addListener("queue_update",t),i.push(()=>{try{e.removeListener("queue_update",t)}catch(e){console.error(J+": failed to remove queue_update listener",e)}})}catch(e){console.error(J+": failed to start queue update watcher",e),K(H("toasts.failedToStartQueueWatcher"))}}else"timer"===t&&d(e);o=t}}}}function ze(o){let s=null,r=null,l=0,c=null,d=3e4;async function i(){try{var e,t,a,n,s,i=o();i.queueWarnEnabled&&(e=i.queueMaxSize,(t=i.queueWarnThreshold)<0||e<=1||(a=te().length,null!==c&&a<=c)||(c=a)&&(n=Math.max(0,e-a))<=t&&(s=Date.now(),r!==n||s-l>=d)&&(G(H("toasts.queueNearlyFull",{used:e-n,max:e}),{duration:15e3,id:"queue-nearly-full"}),r=n,l=s))}catch(e){console.warn(J+": queue capacity check failed",e)}}function e(){if(s){try{s()}catch(e){}s=null}c=null}return{start:function(){var a,n;e();try{let e=null==(n=null==(a=null==Spicetify?void 0:Spicetify.Player)?void 0:a.origin)?void 0:n._events;if(null==e||!e.addListener||null==e||!e.removeListener)throw new Error("queue_update events API not available");let t=e=>{i()};e.addListener("queue_update",t),s=()=>{try{e.removeListener("queue_update",t)}catch(e){console.error(J+": failed to remove queue_update listener (capacity watcher)",e)}},i()}catch(e){console.error(J+": failed to start capacity watcher",e),K(H("toasts.failedToStartCapacityWatcher"))}},stop:e,checkAndWarnOnce:i}}function Pe(i){let o=null,r=[],l=!1,t=!1;async function c(){try{if(i().syncedSnapshotId&&l&&!t){var e,a,n=te();if(!ee(n,r)){{var s=n;let t=i();t.syncedSnapshotId&&(0<=(a=(e=_()).findIndex(e=>e.id===t.syncedSnapshotId))?0===s.length?console.debug(J+": skipping sync of empty queue to snapshot"):(e[a].items=s.slice(),e[a].playbackPosition=Spicetify.Player.getProgress(),V(e)):(console.warn(`${J}: synced snapshot ${t.syncedSnapshotId} no longer exists, deactivating sync mode`),M(j(F({},t),{syncedSnapshotId:void 0})),G(H("toasts.syncedSnapshotNotFound"))))}await 0,r=n.slice()}}}catch(e){console.error(J+": queue sync error",e)}}function a(){if(o){try{o()}catch(e){}o=null}l=!1,t=!1,r=[]}function n(){a();var n,s,e=i();if(e.syncedSnapshotId)try{let e=null==(s=null==(n=null==Spicetify?void 0:Spicetify.Player)?void 0:n.origin)?void 0:s._events;if(null==e||!e.addListener||null==e||!e.removeListener)throw new Error("events API not available");let t=e=>{c()},a=e=>{(async e=>{let t=i();var a,n;t.syncedSnapshotId&&l&&0<=(n=(a=_()).findIndex(e=>e.id===t.syncedSnapshotId))&&(a[n].playbackPosition=e,V(a))})(e.data)};e.addListener("queue_update",t),Spicetify.Player.addEventListener("onprogress",a),o=()=>{try{e.removeListener("queue_update",t),Spicetify.Player.removeEventListener("onprogress",a)}catch(e){console.error(J+": failed to remove listeners (sync manager)",e)}},l=!0,r=te()}catch(e){console.error(J+": failed to start queue sync manager",e),K(H("toasts.failedToStartSyncManager"))}}return{start:n,stop:a,applySync:function(e){(e=!!e.syncedSnapshotId)&&!l?n():!e&&l&&a()},suspend:function(){t=!0,console.debug(J+": sync manager suspended")},resume:async function(){t=!1,r=te(),console.debug(J+": sync manager resumed")}}}p=Object.defineProperty,m=Object.defineProperties,g=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(e,t,a)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,F=(e,t)=>{for(var a in t=t||{})f.call(t,a)&&v(e,a,t[a]);if(h)for(var a of h(t))y.call(t,a)&&v(e,a,t[a]);return e},s={autoEnabled:!(b="queue-manager:settings"),autoIntervalMs:3e5,maxAutosnapshots:15,autoMode:"timer",onlyNewItems:!0,queueWarnEnabled:!0,queueMaxSize:80,queueWarnThreshold:5,promptManualBeforeReplace:!0,language:void 0,settingsCollapsed:!(j=(e,t)=>m(e,g(t))),syncedSnapshotId:void 0},x="queue-manager:snapshots",J="Queue Manager",B="queue-manager",e="0.7.1",t="beta",q=["en","de","es","fr"],w={en:{ui:{buttons:{save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",export:"Export",import:"Import",refresh:"Refresh",view:"View",hide:"Hide",rename:"Rename",resetName:"Reset name",clearAll:"Clear all",exportAll:"Export all",saveNow:"Save now",replaceQueue:"Replace queue",appendToQueue:"Append to queue",exportToPlaylist:"Export to playlist",exportSettings:"Export settings",importSnapshots:"Import snapshots",importSettings:"Import settings",createSyncedSnapshot:"Create synced snapshot",activateSync:"Activate sync",exitSyncMode:"Exit sync mode",convertToManual:"Convert to manual"},labels:{snapshotName:"Snapshot name",toggleItems:"Toggle items",replaceQueue:"Replace the current queue",appendQueue:"Append missing items to queue",exportToPlaylist:"Export to playlist",renameSnapshot:"Rename snapshot",resetName:"Reset name",deleteSnapshot:"Delete snapshot",exportSettings:"Export settings to a JSON file",importSnapshots:"Import snapshots from a JSON file",importSettings:"Import settings from a JSON file",exportAllManuals:"Export all",exportAllAutos:"Export all",clearAllAutos:"Clear all",saveNewManual:"Save now",activeSync:"Active",syncModeDisabledActions:"Disabled during sync mode",convertToManual:"Convert synced snapshot to manual"},sections:{manualSnapshots:"Manual Snapshots",manualSnapshotsCaption:"Your saved queues for later",automaticSnapshots:"Automatic Snapshots",automaticSnapshotsCaption:"Captured in the background",syncedSnapshots:"Synced Snapshots",syncedSnapshotsCaption:"Queue snapshots that sync in real-time",settings:"Settings",settingsCaption:"Customize your experience"},empty:{noManualSnapshots:"No manual snapshots yet",noAutomaticSnapshots:"No automatic snapshots yet",noSyncedSnapshots:"No synced snapshots yet",noSnapshots:"No snapshots yet"},itemSingular:"item",itemPlural:"items",includesLocal:"includes local",loading:"Loading…",failedToLoadItems:"Failed to load items"},snapshots:{types:{auto:"Auto",manual:"Manual",synced:"Synced"},defaults:{myJam:"My jam"},actions:{exporting:"Exporting…",appending:"Appending…",replacing:"Replacing…"}},settings:{autoEnabled:"Enable automatic snapshots",autoMode:"Mode",timeBased:"Time-based",queueChanges:"Queue changes",experimental:"Experimental!",experimentalTooltip:"This mode may create many similar snapshots (for example when queuing a bunch of songs)",onlyNewItems:"Check for new items",onlyNewItemsDescription:"Only trigger it when there is a new song that was not in the previous snapshot.",equalQueuesNote:"Equal queues are never saved as automatic snapshots.",queueWarnEnabled:"Warn when queue is nearly full",queueWarnDescription:"Heuristic limit; includes current track.",promptManualBeforeReplace:"Ask to save manual snapshot before replacing queue",promptManualDescription:"Offers to store the current queue before overwriting it.",interval:"Interval (minutes)",intervalDescription:"Minimum 0.5 (30 seconds)",maxAutomaticSnapshots:"Max automatic snapshots",maxAutomaticDescription:"Older snapshots are pruned. Be careful when changing this",queueMaxSize:"Queue max size",queueMaxSizeDescription:"80 is the current Spotify limit. Only change if Spotify updates this.",queueWarnThreshold:"Warn when remaining slots ≤",language:"Language",languageDescription:"Override the auto-detected language",autoDetected:"Auto-detected"},toasts:{snapshotSaved:"Snapshot saved",snapshotDeleted:"Snapshot deleted: {{name}}",clearedAutomaticSnapshots:"Cleared {{count}} automatic snapshots",exportedToPlaylist:"Exported to {{name}}",addedToQueue:"Added {{count}} {{plural}} to queue",queueReplaced:"Queue replaced ({{count}} items)",settingsImported:"Settings imported successfully.",snapshotsImported:"Imported {{count}} new {{plural}}.",noQueueFound:"No queue found. If you believe this is an error, please try to play and pause a track.",nothingToExport:"Nothing to export",snapshotEmpty:"Snapshot is empty",allItemsAlreadyInQueue:"All snapshot items are already in the queue",failedToSaveSnapshot:"Failed to save snapshot",failedToExport:"Failed to export to playlist",failedToAppend:"Failed to append to queue",failedToReplace:"Failed to replace queue",failedToStartPlayback:"Failed to start playback",failedToSaveAutomatic:"Failed to save an automatic snapshot",failedToStartQueueWatcher:"Failed to start queue update watcher",failedToStartCapacityWatcher:"Failed to start capacity watcher",queueNearlyFull:"Queue nearly full ({{used}}/{{max}})",nameCannotBeEmpty:"Name cannot be empty",nameMustDifferFromDefault:"Name must differ from the default suggestion",noAutomaticSnapshotsToClear:"No automatic snapshots to clear",someImportedSnapshotsInvalid:"Some imported snapshots were invalid and have been skipped.",noValidSnapshotsToImport:"No valid snapshots to import.",allSnapshotsAlreadyExist:"All snapshots already exist.",invalidSettingsFile:"Invalid settings file format.",exportResult:"Exported; some tracks couldn't be added ({{added}}/{{total}})",appendResult:"Added {{added}}/{{total}} items to queue",replaceResult:"Replaced; some items couldn't be queued ({{added}}/{{total}})",exportCanceled:"Export canceled ({{reason}})",exportedToDownloads:"Exported {{filename}} to Downloads folder",failedToExportJson:"Failed to export JSON: {{reason}}",importCanceled:"Import canceled ({{reason}})",failedToImportJson:"Failed to import JSON: {{reason}}",failedToImportJsonAccess:"Failed to import JSON: File is empty or inaccessible",syncActivated:"Sync mode activated",syncDeactivated:"Sync mode deactivated",queueSyncedToSnapshot:"Queue synced to snapshot",syncedSnapshotCreated:"Synced snapshot created",failedToCreateSyncedSnapshot:"Failed to create synced snapshot",failedToActivateSync:"Failed to activate sync mode",failedToStartSyncManager:"Failed to start queue sync manager",queueRestored:"Queue restored from last state",convertedToManual:"Converted to manual snapshot",syncedSnapshotNotFound:"Synced snapshot no longer exists, sync mode deactivated"},dialogs:{saveSnapshot:{title:"Save snapshot",message:"Name this snapshot",confirmLabel:"Save",cancelLabel:"Cancel"},deleteSnapshot:{title:"Delete snapshot",message:"Delete this snapshot? This cannot be undone.",confirmLabel:"Delete"},clearAutomaticSnapshots:{title:"Clear automatic snapshots",message:"Delete all {{count}} automatic snapshots? This cannot be undone.",confirmLabel:"Clear all"},saveCurrentQueue:{title:"Save current queue?",message:"Create a manual snapshot of the current queue before replacing it?",confirmLabel:"Save snapshot",cancelLabel:"Skip",extraLabel:"Cancel"},importSettings:{title:"Import Settings",message:"This will overwrite your current settings. Are you sure?",confirmLabel:"Import"},saveSyncedSnapshot:{title:"Create synced snapshot",message:"Name this synced snapshot. This will use your current queue items and the synced snapshot will be activated automatically.",confirmLabel:"Create",cancelLabel:"Cancel"},emptyQueueDetected:{title:"Empty queue detected",message:"Your queue is now empty. What would you like to do?",restore:"Restore previous state",keepEmpty:"Keep empty",switchSnapshot:"Switch snapshot"},convertToManual:{title:"Convert to manual snapshot",message:"Convert this synced snapshot to a manual snapshot? This will deactivate sync mode if active.",confirmLabel:"Convert"},switchSyncedSnapshot:{title:"Create new synced snapshot",message:"Creating a new synced snapshot will start fresh. Your current queue will be cleared (except the currently playing track). Do you want to continue?",confirmLabel:"Start fresh",cancelLabel:"Cancel"}},errors:{failedToAddTopbarButton:"failed to add topbar button",failedToAddContextMenuItem:"failed to add context menu item",failedToAddKeyboardShortcut:"failed to add keyboard shortcut"}},de:{ui:{buttons:{save:"Speichern",cancel:"Abbrechen",confirm:"Bestätigen",delete:"Löschen",export:"Exportieren",import:"Importieren",refresh:"Aktualisieren",view:"Anzeigen",hide:"Ausblenden",rename:"Umbenennen",resetName:"Name zurücksetzen",clearAll:"Alle löschen",exportAll:"Alle exportieren",saveNow:"Jetzt speichern",replaceQueue:"Warteschlange ersetzen",appendToQueue:"Zur Warteschlange hinzufügen",exportToPlaylist:"Als Playlist exportieren",exportSettings:"Einstellungen exportieren",importSnapshots:"Snapshots importieren",importSettings:"Einstellungen importieren",createSyncedSnapshot:"Synchronisierten Snapshot erstellen",activateSync:"Synchronisierung aktivieren",exitSyncMode:"Synchronisierungsmodus beenden",convertToManual:"In manuell umwandeln"},labels:{snapshotName:"Snapshot-Name",toggleItems:"Elemente ein-/ausblenden",replaceQueue:"Die aktuelle Warteschlange ersetzen",appendQueue:"Fehlende Elemente zur Warteschlange hinzufügen",exportToPlaylist:"Als Playlist exportieren",renameSnapshot:"Snapshot umbenennen",resetName:"Name zurücksetzen",deleteSnapshot:"Snapshot löschen",exportSettings:"Einstellungen in eine JSON-Datei exportieren",importSnapshots:"Snapshots aus einer JSON-Datei importieren",importSettings:"Einstellungen aus einer JSON-Datei importieren",exportAllManuals:"Alle exportieren",exportAllAutos:"Alle exportieren",clearAllAutos:"Alle löschen",saveNewManual:"Jetzt speichern",activeSync:"Aktiv",syncModeDisabledActions:"Im Synchronisierungsmodus deaktiviert",convertToManual:"Synchronisierten Snapshot in manuell umwandeln"},sections:{manualSnapshots:"Manuelle Snapshots",manualSnapshotsCaption:"Deine gespeicherten Warteschlangen für später",automaticSnapshots:"Automatische Snapshots",automaticSnapshotsCaption:"Im Hintergrund erfasst",syncedSnapshots:"Synchronisierte Snapshots",syncedSnapshotsCaption:"Warteschlangen-Snapshots, die in Echtzeit synchronisieren",settings:"Einstellungen",settingsCaption:"Deine Erfahrung anpassen"},empty:{noManualSnapshots:"Noch keine manuellen Snapshots",noAutomaticSnapshots:"Noch keine automatischen Snapshots",noSyncedSnapshots:"Noch keine synchronisierten Snapshots",noSnapshots:"Noch keine Snapshots"},itemSingular:"Element",itemPlural:"Elemente",includesLocal:"enthält lokale Dateien",loading:"Lädt…",failedToLoadItems:"Elemente konnten nicht geladen werden"},snapshots:{types:{auto:"Auto",manual:"Manuell",synced:"Synchronisiert"},defaults:{myJam:"Mein Mix"},actions:{exporting:"Exportiere…",appending:"Füge hinzu…",replacing:"Ersetze…"}},settings:{autoEnabled:"Automatische Snapshots aktivieren",autoMode:"Modus",timeBased:"Zeitbasiert",queueChanges:"Warteschlangen-Änderungen",experimental:"Experimentell!",experimentalTooltip:"Dieser Modus kann viele ähnliche Snapshots erstellen (z.B. beim Hinzufügen mehrerer Songs)",onlyNewItems:"Auf neue Elemente prüfen",onlyNewItemsDescription:"Nur auslösen, wenn es einen neuen Song gibt, der nicht im vorherigen Snapshot war.",equalQueuesNote:"Gleiche Warteschlangen werden nie als automatische Snapshots gespeichert.",queueWarnEnabled:"Warnen, wenn Warteschlange fast voll ist",queueWarnDescription:"Heuristische Grenze; beinhaltet aktuellen Track.",promptManualBeforeReplace:"Vor dem Ersetzen der Warteschlange nach manuellem Snapshot fragen",promptManualDescription:"Bietet an, die aktuelle Warteschlange zu speichern, bevor sie überschrieben wird.",interval:"Intervall (Minuten)",intervalDescription:"Minimum 0,5 (30 Sekunden)",maxAutomaticSnapshots:"Max. automatische Snapshots",maxAutomaticDescription:"Ältere Snapshots werden entfernt. Vorsicht beim Ändern",queueMaxSize:"Max. Warteschlangen-Größe",queueMaxSizeDescription:"80 ist das aktuelle Spotify-Limit. Nur ändern, wenn Spotify das aktualisiert.",queueWarnThreshold:"Warnen wenn verbleibende Plätze ≤",language:"Sprache",languageDescription:"Die automatisch erkannte Sprache überschreiben",autoDetected:"Automatisch erkannt"},toasts:{snapshotSaved:"Snapshot gespeichert",snapshotDeleted:"Snapshot gelöscht: {{name}}",clearedAutomaticSnapshots:"{{count}} automatische Snapshots gelöscht",exportedToPlaylist:"Als {{name}} exportiert",addedToQueue:"{{count}} {{plural}} zur Warteschlange hinzugefügt",queueReplaced:"Warteschlange ersetzt ({{count}} Elemente)",settingsImported:"Einstellungen erfolgreich importiert.",snapshotsImported:"{{count}} neue {{plural}} importiert.",noQueueFound:"Keine Warteschlange gefunden. Falls du glaubst, dass dies ein Fehler ist, versuche einen Track abzuspielen und zu pausieren.",nothingToExport:"Nichts zu exportieren",snapshotEmpty:"Snapshot ist leer",allItemsAlreadyInQueue:"Alle Snapshot-Elemente sind bereits in der Warteschlange",failedToSaveSnapshot:"Snapshot konnte nicht gespeichert werden",failedToExport:"Export zur Playlist fehlgeschlagen",failedToAppend:"Hinzufügen zur Warteschlange fehlgeschlagen",failedToReplace:"Ersetzen der Warteschlange fehlgeschlagen",failedToStartPlayback:"Wiedergabe konnte nicht gestartet werden",failedToSaveAutomatic:"Automatischer Snapshot konnte nicht gespeichert werden",failedToStartQueueWatcher:"Warteschlangen-Update-Überwacher konnte nicht gestartet werden",failedToStartCapacityWatcher:"Kapazitäts-Überwacher konnte nicht gestartet werden",queueNearlyFull:"Warteschlange fast voll ({{used}}/{{max}})",nameCannotBeEmpty:"Name darf nicht leer sein",nameMustDifferFromDefault:"Name muss sich vom Standard-Vorschlag unterscheiden",noAutomaticSnapshotsToClear:"Keine automatischen Snapshots zum Löschen",someImportedSnapshotsInvalid:"Einige importierte Snapshots waren ungültig und wurden übersprungen.",noValidSnapshotsToImport:"Keine gültigen Snapshots zum Importieren.",allSnapshotsAlreadyExist:"Alle Snapshots existieren bereits.",invalidSettingsFile:"Ungültiges Einstellungsdatei-Format.",exportResult:"Exportiert; einige Tracks konnten nicht hinzugefügt werden ({{added}}/{{total}})",appendResult:"{{added}}/{{total}} Elemente zur Warteschlange hinzugefügt",replaceResult:"Ersetzt; einige Elemente konnten nicht in die Warteschlange eingereiht werden ({{added}}/{{total}})",exportCanceled:"Export abgebrochen ({{reason}})",exportedToDownloads:"{{filename}} in den Downloads-Ordner exportiert",failedToExportJson:"JSON-Export fehlgeschlagen: {{reason}}",importCanceled:"Import abgebrochen ({{reason}})",failedToImportJson:"JSON-Import fehlgeschlagen: {{reason}}",failedToImportJsonAccess:"JSON-Import fehlgeschlagen: Datei ist leer oder nicht zugänglich",syncActivated:"Synchronisierungsmodus aktiviert",syncDeactivated:"Synchronisierungsmodus deaktiviert",queueSyncedToSnapshot:"Warteschlange mit Snapshot synchronisiert",syncedSnapshotCreated:"Synchronisierter Snapshot erstellt",failedToCreateSyncedSnapshot:"Erstellen des synchronisierten Snapshots fehlgeschlagen",failedToActivateSync:"Aktivieren des Synchronisierungsmodus fehlgeschlagen",failedToStartSyncManager:"Starten des Warteschlangen-Synchronisierungsmanagers fehlgeschlagen",queueRestored:"Warteschlange aus letztem Zustand wiederhergestellt",convertedToManual:"In manuellen Snapshot umgewandelt",syncedSnapshotNotFound:"Synchronisierter Snapshot existiert nicht mehr, Synchronisationsmodus deaktiviert"},dialogs:{saveSnapshot:{title:"Snapshot speichern",message:"Diesen Snapshot benennen",confirmLabel:"Speichern",cancelLabel:"Abbrechen"},deleteSnapshot:{title:"Snapshot löschen",message:"Diesen Snapshot löschen? Dies kann nicht rückgängig gemacht werden.",confirmLabel:"Löschen"},clearAutomaticSnapshots:{title:"Automatische Snapshots löschen",message:"Alle {{count}} automatischen Snapshots löschen? Dies kann nicht rückgängig gemacht werden.",confirmLabel:"Alle löschen"},saveCurrentQueue:{title:"Aktuelle Warteschlange speichern?",message:"Einen manuellen Snapshot der aktuellen Warteschlange erstellen, bevor sie ersetzt wird?",confirmLabel:"Snapshot speichern",cancelLabel:"Überspringen",extraLabel:"Abbrechen"},importSettings:{title:"Einstellungen importieren",message:"Dies wird deine aktuellen Einstellungen überschreiben. Bist du sicher?",confirmLabel:"Importieren"},saveSyncedSnapshot:{title:"Synchronisierten Snapshot erstellen",message:"Benenne diesen synchronisierten Snapshot. Dies wird deine aktuelle Warteschlange verwenden und den Synchronisierungsmodus automatisch aktivieren. Deine Warteschlange wird nicht geändert, es sei denn, du hast bereits einen aktiven Snapshot.",confirmLabel:"Erstellen",cancelLabel:"Abbrechen"},emptyQueueDetected:{title:"Leere Warteschlange erkannt",message:"Deine Warteschlange ist jetzt leer. Was möchtest du tun?",restore:"Vorherigen Zustand wiederherstellen",keepEmpty:"Leer lassen",switchSnapshot:"Snapshot wechseln"},convertToManual:{title:"In manuellen Snapshot umwandeln",message:"Diesen synchronisierten Snapshot in einen manuellen Snapshot umwandeln? Dies deaktiviert den Synchronisierungsmodus, falls aktiv.",confirmLabel:"Umwandeln"},switchSyncedSnapshot:{title:"Neuen synchronisierten Snapshot erstellen",message:"Das Erstellen eines neuen synchronisierten Snapshots speichert deine aktuelle Warteschlange und hält sie synchronisiert. Alle Änderungen an der Warteschlange werden automatisch in diesem Snapshot gespeichert. Möchtest du fortfahren?",confirmLabel:"Erstellen & synchronisieren",cancelLabel:"Abbrechen"}},errors:{failedToAddTopbarButton:"Topbar-Button konnte nicht hinzugefügt werden",failedToAddContextMenuItem:"Kontextmenü-Element konnte nicht hinzugefügt werden",failedToAddKeyboardShortcut:"Tastenkürzel konnte nicht hinzugefügt werden"}},es:{ui:{buttons:{save:"Guardar",cancel:"Cancelar",confirm:"Confirmar",delete:"Eliminar",export:"Exportar",import:"Importar",refresh:"Actualizar",view:"Ver",hide:"Ocultar",rename:"Renombrar",resetName:"Restablecer nombre",clearAll:"Limpiar todo",exportAll:"Exportar todo",saveNow:"Guardar ahora",replaceQueue:"Reemplazar cola",appendToQueue:"Añadir a la cola",exportToPlaylist:"Exportar a playlist",exportSettings:"Exportar configuración",importSnapshots:"Importar instantáneas",importSettings:"Importar configuración",createSyncedSnapshot:"Crear instantánea sincronizada",activateSync:"Activar sincronización",exitSyncMode:"Salir del modo sincronización",convertToManual:"Convertir a manual"},labels:{snapshotName:"Nombre de instantánea",toggleItems:"Alternar elementos",replaceQueue:"Reemplazar la cola actual",appendQueue:"Añadir elementos faltantes a la cola",exportToPlaylist:"Exportar a playlist",renameSnapshot:"Renombrar instantánea",resetName:"Restablecer nombre",deleteSnapshot:"Eliminar instantánea",exportSettings:"Exportar configuración a un archivo JSON",importSnapshots:"Importar instantáneas desde un archivo JSON",importSettings:"Importar configuración desde un archivo JSON",exportAllManuals:"Exportar todo",exportAllAutos:"Exportar todo",clearAllAutos:"Limpiar todo",saveNewManual:"Guardar ahora",activeSync:"Activa",syncModeDisabledActions:"Deshabilitado durante el modo sincronización",convertToManual:"Convertir instantánea sincronizada a manual"},sections:{manualSnapshots:"Instantáneas Manuales",manualSnapshotsCaption:"Tus colas guardadas para más tarde",automaticSnapshots:"Instantáneas Automáticas",automaticSnapshotsCaption:"Capturadas en segundo plano",syncedSnapshots:"Instantáneas sincronizadas",syncedSnapshotsCaption:"Instantáneas de cola que sincronizan en tiempo real",settings:"Configuración",settingsCaption:"Personaliza tu experiencia"},empty:{noManualSnapshots:"Aún no hay instantáneas manuales",noAutomaticSnapshots:"Aún no hay instantáneas automáticas",noSyncedSnapshots:"Aún no hay instantáneas sincronizadas",noSnapshots:"Aún no hay instantáneas"},itemSingular:"elemento",itemPlural:"elementos",includesLocal:"incluye archivos locales",loading:"Cargando…",failedToLoadItems:"No se pudieron cargar los elementos"},snapshots:{types:{auto:"Auto",manual:"Manual",synced:"Sincronizada"},defaults:{myJam:"Mi música"},actions:{exporting:"Exportando…",appending:"Añadiendo…",replacing:"Reemplazando…"}},settings:{autoEnabled:"Habilitar instantáneas automáticas",autoMode:"Modo",timeBased:"Basado en tiempo",queueChanges:"Cambios de cola",experimental:"¡Experimental!",experimentalTooltip:"Este modo puede crear muchas instantáneas similares (por ejemplo, al encolar varias canciones)",onlyNewItems:"Verificar elementos nuevos",onlyNewItemsDescription:"Solo se activa cuando hay una nueva canción que no estaba en la instantánea anterior.",equalQueuesNote:"Las colas iguales nunca se guardan como instantáneas automáticas.",queueWarnEnabled:"Advertir cuando la cola esté casi llena",queueWarnDescription:"Límite heurístico; incluye la pista actual.",promptManualBeforeReplace:"Preguntar para guardar instantánea manual antes de reemplazar cola",promptManualDescription:"Ofrece guardar la cola actual antes de sobrescribirla.",interval:"Intervalo (minutos)",intervalDescription:"Mínimo 0,5 (30 segundos)",maxAutomaticSnapshots:"Máx. instantáneas automáticas",maxAutomaticDescription:"Las instantáneas más antiguas se eliminan. Ten cuidado al cambiar esto",queueMaxSize:"Tamaño máximo de cola",queueMaxSizeDescription:"80 es el límite actual de Spotify. Solo cambiar si Spotify lo actualiza.",queueWarnThreshold:"Advertir cuando espacios restantes ≤",language:"Idioma",languageDescription:"Anular el idioma detectado automáticamente",autoDetected:"Detectado automáticamente"},toasts:{snapshotSaved:"Instantánea guardada",snapshotDeleted:"Instantánea eliminada: {{name}}",clearedAutomaticSnapshots:"{{count}} instantáneas automáticas eliminadas",exportedToPlaylist:"Exportado a {{name}}",addedToQueue:"{{count}} {{plural}} añadidos a la cola",queueReplaced:"Cola reemplazada ({{count}} elementos)",settingsImported:"Configuración importada exitosamente.",snapshotsImported:"{{count}} nuevas {{plural}} importadas.",noQueueFound:"No se encontró cola. Si crees que esto es un error, intenta reproducir y pausar una pista.",nothingToExport:"Nada que exportar",snapshotEmpty:"La instantánea está vacía",allItemsAlreadyInQueue:"Todos los elementos de la instantánea ya están en la cola",failedToSaveSnapshot:"No se pudo guardar la instantánea",failedToExport:"Falló la exportación a playlist",failedToAppend:"Falló al añadir a la cola",failedToReplace:"Falló al reemplazar la cola",failedToStartPlayback:"No se pudo iniciar la reproducción",failedToSaveAutomatic:"No se pudo guardar una instantánea automática",failedToStartQueueWatcher:"No se pudo iniciar el observador de actualización de cola",failedToStartCapacityWatcher:"No se pudo iniciar el observador de capacidad",queueNearlyFull:"Cola casi llena ({{used}}/{{max}})",nameCannotBeEmpty:"El nombre no puede estar vacío",nameMustDifferFromDefault:"El nombre debe diferir de la sugerencia por defecto",noAutomaticSnapshotsToClear:"No hay instantáneas automáticas para limpiar",someImportedSnapshotsInvalid:"Algunas instantáneas importadas eran inválidas y se han omitido.",noValidSnapshotsToImport:"No hay instantáneas válidas para importar.",allSnapshotsAlreadyExist:"Todas las instantáneas ya existen.",invalidSettingsFile:"Formato de archivo de configuración inválido.",exportResult:"Exportado; algunas pistas no se pudieron añadir ({{added}}/{{total}})",appendResult:"{{added}}/{{total}} elementos añadidos a la cola",replaceResult:"Reemplazado; algunos elementos no se pudieron encolar ({{added}}/{{total}})",exportCanceled:"Exportación cancelada ({{reason}})",exportedToDownloads:"{{filename}} exportado a la carpeta de Descargas",failedToExportJson:"Falló la exportación JSON: {{reason}}",importCanceled:"Importación cancelada ({{reason}})",failedToImportJson:"Falló la importación JSON: {{reason}}",failedToImportJsonAccess:"Falló la importación JSON: El archivo está vacío o no es accesible",syncActivated:"Modo sincronización activado",syncDeactivated:"Modo sincronización desactivado",queueSyncedToSnapshot:"Cola sincronizada con instantánea",syncedSnapshotCreated:"Instantánea sincronizada creada",failedToCreateSyncedSnapshot:"Error al crear instantánea sincronizada",failedToActivateSync:"Error al activar modo sincronización",failedToStartSyncManager:"Error al iniciar el gestor de sincronización de cola",queueRestored:"Cola restaurada desde el último estado",convertedToManual:"Convertida a instantánea manual",syncedSnapshotNotFound:"La instantánea sincronizada ya no existe, modo de sincronización desactivado"},dialogs:{saveSnapshot:{title:"Guardar instantánea",message:"Nombra esta instantánea",confirmLabel:"Guardar",cancelLabel:"Cancelar"},deleteSnapshot:{title:"Eliminar instantánea",message:"¿Eliminar esta instantánea? Esto no se puede deshacer.",confirmLabel:"Eliminar"},clearAutomaticSnapshots:{title:"Limpiar instantáneas automáticas",message:"¿Eliminar todas las {{count}} instantáneas automáticas? Esto no se puede deshacer.",confirmLabel:"Limpiar todo"},saveCurrentQueue:{title:"¿Guardar cola actual?",message:"¿Crear una instantánea manual de la cola actual antes de reemplazarla?",confirmLabel:"Guardar instantánea",cancelLabel:"Omitir",extraLabel:"Cancelar"},importSettings:{title:"Importar Configuración",message:"Esto sobrescribirá tu configuración actual. ¿Estás seguro?",confirmLabel:"Importar"},saveSyncedSnapshot:{title:"Crear instantánea sincronizada",message:"Nombra esta instantánea sincronizada. Esto usará los elementos de tu cola actual y la instantánea sincronizada se activará automáticamente.",confirmLabel:"Crear",cancelLabel:"Cancelar"},emptyQueueDetected:{title:"Cola vacía detectada",message:"Tu cola está ahora vacía. ¿Qué te gustaría hacer?",restore:"Restaurar estado anterior",keepEmpty:"Mantener vacía",switchSnapshot:"Cambiar instantánea"},convertToManual:{title:"Convertir a instantánea manual",message:"¿Convertir esta instantánea sincronizada a una instantánea manual? Esto desactivará el modo sincronización si está activo.",confirmLabel:"Convertir"},switchSyncedSnapshot:{title:"Crear nueva instantánea sincronizada",message:"Crear una nueva instantánea sincronizada guardará tu cola actual y la mantendrá sincronizada. Cualquier cambio en la cola se guardará automáticamente en esta instantánea. ¿Deseas continuar?",confirmLabel:"Crear y sincronizar",cancelLabel:"Cancelar"}},errors:{failedToAddTopbarButton:"no se pudo añadir botón de barra superior",failedToAddContextMenuItem:"no se pudo añadir elemento del menú contextual",failedToAddKeyboardShortcut:"no se pudo añadir atajo de teclado"}},fr:{ui:{buttons:{save:"Enregistrer",cancel:"Annuler",confirm:"Confirmer",delete:"Supprimer",export:"Exporter",import:"Importer",refresh:"Actualiser",view:"Voir",hide:"Masquer",rename:"Renommer",resetName:"Réinitialiser le nom",clearAll:"Tout effacer",exportAll:"Tout exporter",saveNow:"Enregistrer maintenant",replaceQueue:"Remplacer la file",appendToQueue:"Ajouter à la file",exportToPlaylist:"Exporter vers playlist",exportSettings:"Exporter les paramètres",importSnapshots:"Importer les instantanés",importSettings:"Importer les paramètres",createSyncedSnapshot:"Créer un instantané synchronisé",activateSync:"Activer la synchronisation",exitSyncMode:"Quitter le mode synchronisation",convertToManual:"Convertir en manuel"},labels:{snapshotName:"Nom de l'instantané",toggleItems:"Basculer les éléments",replaceQueue:"Remplacer la file actuelle",appendQueue:"Ajouter les éléments manquants à la file",exportToPlaylist:"Exporter vers playlist",renameSnapshot:"Renommer l'instantané",resetName:"Réinitialiser le nom",deleteSnapshot:"Supprimer l'instantané",exportSettings:"Exporter les paramètres vers un fichier JSON",importSnapshots:"Importer les instantanés depuis un fichier JSON",importSettings:"Importer les paramètres depuis un fichier JSON",exportAllManuals:"Tout exporter",exportAllAutos:"Tout exporter",clearAllAutos:"Tout effacer",saveNewManual:"Enregistrer maintenant",activeSync:"Actif",syncModeDisabledActions:"Désactivé pendant le mode synchronisation",convertToManual:"Convertir l'instantané synchronisé en manuel"},sections:{manualSnapshots:"Instantanés Manuels",manualSnapshotsCaption:"Vos files sauvegardées pour plus tard",automaticSnapshots:"Instantanés Automatiques",automaticSnapshotsCaption:"Capturés en arrière-plan",syncedSnapshots:"Instantanés synchronisés",syncedSnapshotsCaption:"Instantanés de file d'attente synchronisés en temps réel",settings:"Paramètres",settingsCaption:"Personnalisez votre expérience"},empty:{noManualSnapshots:"Aucun instantané manuel pour le moment",noAutomaticSnapshots:"Aucun instantané automatique pour le moment",noSyncedSnapshots:"Aucun instantané synchronisé pour le moment",noSnapshots:"Aucun instantané pour le moment"},itemSingular:"élément",itemPlural:"éléments",includesLocal:"inclut des fichiers locaux",loading:"Chargement…",failedToLoadItems:"Impossible de charger les éléments"},snapshots:{types:{auto:"Auto",manual:"Manuel",synced:"Synchronisé"},defaults:{myJam:"Mon mix"},actions:{exporting:"Exportation…",appending:"Ajout…",replacing:"Remplacement…"}},settings:{autoEnabled:"Activer les instantanés automatiques",autoMode:"Mode",timeBased:"Basé sur le temps",queueChanges:"Changements de file",experimental:"Expérimental !",experimentalTooltip:"Ce mode peut créer de nombreux instantanés similaires (par exemple lors de l'ajout de plusieurs chansons)",onlyNewItems:"Vérifier les nouveaux éléments",onlyNewItemsDescription:"Ne se déclenche que lorsqu'il y a une nouvelle chanson qui n'était pas dans l'instantané précédent.",equalQueuesNote:"Les files identiques ne sont jamais sauvegardées comme instantanés automatiques.",queueWarnEnabled:"Avertir quand la file est presque pleine",queueWarnDescription:"Limite heuristique ; inclut la piste actuelle.",promptManualBeforeReplace:"Demander de sauvegarder un instantané manuel avant de remplacer la file",promptManualDescription:"Propose de sauvegarder la file actuelle avant de la remplacer.",interval:"Intervalle (minutes)",intervalDescription:"Minimum 0,5 (30 secondes)",maxAutomaticSnapshots:"Max instantanés automatiques",maxAutomaticDescription:"Les instantanés plus anciens sont supprimés. Attention lors du changement",queueMaxSize:"Taille max de la file",queueMaxSizeDescription:"80 est la limite actuelle de Spotify. Ne changer que si Spotify la met à jour.",queueWarnThreshold:"Avertir quand emplacements restants ≤",language:"Langue",languageDescription:"Remplacer la langue détectée automatiquement",autoDetected:"Détecté automatiquement"},toasts:{snapshotSaved:"Instantané enregistré",snapshotDeleted:"Instantané supprimé : {{name}}",clearedAutomaticSnapshots:"{{count}} instantanés automatiques effacés",exportedToPlaylist:"Exporté vers {{name}}",addedToQueue:"{{count}} {{plural}} ajoutés à la file",queueReplaced:"File remplacée ({{count}} éléments)",settingsImported:"Paramètres importés avec succès.",snapshotsImported:"{{count}} nouveaux {{plural}} importés.",noQueueFound:"Aucune file trouvée. Si vous pensez que c'est une erreur, essayez de lire et mettre en pause une piste.",nothingToExport:"Rien à exporter",snapshotEmpty:"L'instantané est vide",allItemsAlreadyInQueue:"Tous les éléments de l'instantané sont déjà dans la file",failedToSaveSnapshot:"Impossible de sauvegarder l'instantané",failedToExport:"Échec de l'exportation vers la playlist",failedToAppend:"Échec de l'ajout à la file",failedToReplace:"Échec du remplacement de la file",failedToStartPlayback:"Impossible de démarrer la lecture",failedToSaveAutomatic:"Impossible de sauvegarder un instantané automatique",failedToStartQueueWatcher:"Impossible de démarrer le surveilleur de mise à jour de file",failedToStartCapacityWatcher:"Impossible de démarrer le surveilleur de capacité",queueNearlyFull:"File presque pleine ({{used}}/{{max}})",nameCannotBeEmpty:"Le nom ne peut pas être vide",nameMustDifferFromDefault:"Le nom doit différer de la suggestion par défaut",noAutomaticSnapshotsToClear:"Aucun instantané automatique à effacer",someImportedSnapshotsInvalid:"Certains instantanés importés étaient invalides et ont été ignorés.",noValidSnapshotsToImport:"Aucun instantané valide à importer.",allSnapshotsAlreadyExist:"Tous les instantanés existent déjà.",invalidSettingsFile:"Format de fichier de paramètres invalide.",exportResult:"Exporté ; certaines pistes n'ont pas pu être ajoutées ({{added}}/{{total}})",appendResult:"{{added}}/{{total}} éléments ajoutés à la file",replaceResult:"Remplacé ; certains éléments n'ont pas pu être mis en file ({{added}}/{{total}})",exportCanceled:"Exportation annulée ({{reason}})",exportedToDownloads:"{{filename}} exporté vers le dossier Téléchargements",failedToExportJson:"Échec de l'exportation JSON : {{reason}}",importCanceled:"Importation annulée ({{reason}})",failedToImportJson:"Échec de l'importation JSON : {{reason}}",failedToImportJsonAccess:"Échec de l'importation JSON : Le fichier est vide ou inaccessible",syncActivated:"Mode synchronisation activé",syncDeactivated:"Mode synchronisation désactivé",queueSyncedToSnapshot:"File d'attente synchronisée avec l'instantané",syncedSnapshotCreated:"Instantané synchronisé créé",failedToCreateSyncedSnapshot:"Échec de la création de l'instantané synchronisé",failedToActivateSync:"Échec de l'activation du mode synchronisation",failedToStartSyncManager:"Échec du démarrage du gestionnaire de synchronisation de file d'attente",queueRestored:"File d'attente restaurée depuis le dernier état",convertedToManual:"Converti en instantané manuel",syncedSnapshotNotFound:"L'instantané synchronisé n'existe plus, mode de synchronisation désactivé"},dialogs:{saveSnapshot:{title:"Enregistrer l'instantané",message:"Nommer cet instantané",confirmLabel:"Enregistrer",cancelLabel:"Annuler"},deleteSnapshot:{title:"Supprimer l'instantané",message:"Supprimer cet instantané ? Cette action ne peut pas être annulée.",confirmLabel:"Supprimer"},clearAutomaticSnapshots:{title:"Effacer les instantanés automatiques",message:"Supprimer tous les {{count}} instantanés automatiques ? Cette action ne peut pas être annulée.",confirmLabel:"Tout effacer"},saveCurrentQueue:{title:"Enregistrer la file actuelle ?",message:"Créer un instantané manuel de la file actuelle avant de la remplacer ?",confirmLabel:"Enregistrer l'instantané",cancelLabel:"Ignorer",extraLabel:"Annuler"},importSettings:{title:"Importer les Paramètres",message:"Cela remplacera vos paramètres actuels. Êtes-vous sûr ?",confirmLabel:"Importer"},saveSyncedSnapshot:{title:"Créer un instantané synchronisé",message:"Nomme cet instantané synchronisé. Cela utilisera les éléments de ta file d'attente actuelle et l'instantané synchronisé sera activé automatiquement.",confirmLabel:"Créer",cancelLabel:"Annuler"},emptyQueueDetected:{title:"File d'attente vide détectée",message:"Ta file d'attente est maintenant vide. Que souhaites-tu faire ?",restore:"Restaurer l'état précédent",keepEmpty:"Garder vide",switchSnapshot:"Changer d'instantané"},convertToManual:{title:"Convertir en instantané manuel",message:"Convertir cet instantané synchronisé en instantané manuel ? Cela désactivera le mode synchronisation s'il est actif.",confirmLabel:"Convertir"},switchSyncedSnapshot:{title:"Créer un nouvel instantané synchronisé",message:"Créer un nouvel instantané synchronisé sauvegardera ta file d'attente actuelle et la gardera synchronisée. Tous les changements à la file d'attente seront automatiquement sauvegardés dans cet instantané. Veux-tu continuer ?",confirmLabel:"Créer & synchroniser",cancelLabel:"Annuler"}},errors:{failedToAddTopbarButton:"impossible d'ajouter le bouton de barre supérieure",failedToAddContextMenuItem:"impossible d'ajouter l'élément du menu contextuel",failedToAddKeyboardShortcut:"impossible d'ajouter le raccourci clavier"}}},n=z(),P(),E=null,A=new Map,L=16,oe=new Map,S=!1,i=a=null,O=new Set,U=new Map,C=async function(){for(var e;null==Spicetify||!Spicetify.showNotification||null==Spicetify||!Spicetify.CosmosAsync||null==Spicetify||!Spicetify.LocalStorage;)await new Promise(e=>setTimeout(e,100));let t=d(),a=$e(),n=(a.primeFromExisting(),a.applyAutoMode(t),Pe(()=>t)),s=(t.syncedSnapshotId&&n.applySync(t),ze(()=>t)),i=(s.start(),{getSettings:()=>t,setSettings:e=>{M(t=e),a.applyAutoMode(e),n.applySync(e),s.checkAndWarnOnce()},getSyncManager:()=>n});try{null!=(e=null==Spicetify?void 0:Spicetify.Topbar)&&e.Button&&new Spicetify.Topbar.Button(J,"queue",()=>De(i),void 0,!0)}catch(e){console.error(J+": "+H("errors.failedToAddTopbarButton"))}try{new Spicetify.ContextMenu.Item(J,()=>De(i),(e,t,a)=>{var n,s,i;try{if(a){var o=Spicetify.URI.fromString(a);if((null==o?void 0:o.type)===Spicetify.URI.Type.QUEUE)return!0;if(a.includes(":queue"))return!0}return((null==(i=null==(s=null==(n=Spicetify.Platform)?void 0:n.History)?void 0:s.location)?void 0:i.pathname)||"").includes("queue")}catch(e){}return!1},"queue").register()}catch(e){console.error(J+": "+H("errors.failedToAddContextMenuItem"))}try{Spicetify.Keyboard.registerShortcut({key:"q",ctrl:!0,alt:!0},()=>De(i))}catch(e){console.error(J+": "+H("errors.failedToAddKeyboardShortcut"))}},(async()=>{await C()})(),(async()=>{var e;document.getElementById("queueDmanager")||((e=document.createElement("style")).id="queueDmanager",e.textContent=String.raw`
  .qs-container{display:flex;flex-direction:column;gap:18px;overflow:visible}.qs-header{display:flex;justify-content:space-between;align-items:center;padding:16px;border-radius:12px;background:linear-gradient(135deg,rgba(52,211,153,.16),rgba(37,99,235,.12));border:1px solid rgba(255,255,255,.06);gap:12px}.qs-header-title{display:flex;align-items:center;gap:12px;font-weight:600}.qs-header-text{display:flex;flex-direction:column;gap:4px}.qs-header-app{display:flex;align-items:center;gap:10px}.qs-header-badges{display:inline-flex;gap:6px;align-items:center}.qs-header-icon{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;background:rgba(0,0,0,.4)}.qs-header-name{font-size:18px}.qs-header-sub,.qs-header-sub-alt{font-size:13px;opacity:.75}.qs-actions{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}.qs-header-actions{display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-end;max-width:400px}.qs-header-actions .qs-btn{flex:0 0 auto;max-width:calc(50% - 4px)}.qs-settings{display:flex;flex-direction:column;gap:18px;padding:16px;border-radius:12px;background:var(--spice-section-bg,rgba(255,255,255,.05));border:1px solid rgba(255,255,255,.05);overflow:visible;max-width:100%;box-sizing:border-box;transition:padding-bottom .3s ease}.qs-settings-header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:8px}.qs-settings-toggle{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:50%;background:0 0;border:1px solid transparent;cursor:pointer;padding:0;transition:background .15s ease,transform .12s ease,border .12s ease;color:inherit}.qs-settings-toggle:hover{background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.12)}.qs-settings-toggle:focus-visible{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-settings-toggle .qs-svg-icon{width:16px;height:16px;transition:transform .2s ease}.qs-settings-content{display:grid;grid-template-columns:1fr 1fr;gap:18px;transition:max-height .4s cubic-bezier(.4, 0, .2, 1),opacity .3s ease;max-height:800px;opacity:1}.qs-settings.collapsed .qs-settings-content{max-height:0;opacity:0;pointer-events:none}.qs-settings.collapsed{padding-bottom:0}.qs-settings:not(.collapsed) .qs-settings-toggle .qs-svg-icon{transform:rotate(90deg)}.qs-right{display:flex;flex-direction:column;gap:16px}.qs-setting{display:flex;flex-direction:column;gap:6px}.qs-setting label{font-weight:600;display:inline-flex;align-items:center;gap:8px}.qs-dim{color:rgba(255,255,255,.7);font-size:12px}.qs-row{display:flex;flex-direction:column;gap:12px;padding:12px 16px;border-radius:10px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.04);box-shadow:0 10px 30px rgba(0,0,0,.25)}.qs-row+.qs-row{margin-top:12px}.qs-row-main{display:flex;flex-direction:column;gap:10px}.qs-row-title{font-weight:600;display:inline-flex;align-items:center;gap:8px}.qs-title-actions{display:inline-flex;align-items:center;gap:6px;margin-left:8px}.qs-icon-btn{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:0 0;border:1px solid transparent;cursor:pointer;padding:0;transition:background .15s ease,transform .12s ease,border .12s ease;color:inherit}.qs-icon-btn:hover{background:linear-gradient(135deg,rgba(96,165,250,.35),rgba(59,130,246,.2));border-color:rgba(96,165,250,.4);transform:translateY(-1px)}.qs-icon-btn:focus-visible{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-icon-btn.danger{color:rgba(248,113,113,.85)}.qs-icon-btn.danger:hover{background:rgba(248,113,113,.16);border-color:rgba(248,113,113,.25);color:#f87171}.qs-icon-btn .qs-svg-icon{width:16px;height:16px}.qs-row-meta{display:flex;flex-wrap:wrap;gap:6px;font-size:12px;align-items:center}.qs-row-actions{display:flex;flex-wrap:wrap;gap:10px;padding:2px 0}.qs-row-actions .qs-btn{flex:0 0 auto;justify-content:flex-start}.qs-btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:6px 10px;border-radius:8px;background:rgba(255,255,255,.08);color:inherit;border:1px solid transparent;cursor:pointer;font-weight:600;transition:transform .12s ease,box-shadow .12s ease,border .12s ease;text-decoration:none}.qs-btn.primary{background:linear-gradient(135deg,rgba(96,165,250,.9),rgba(59,130,246,.9));border-color:rgba(96,165,250,.35)}.qs-btn.subtle{background:rgba(255,255,255,.04);border-color:rgba(255,255,255,.08)}.qs-btn.danger{background:rgba(248,113,113,.16);border-color:rgba(248,113,113,.25)}.qs-btn:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.25)}.qs-btn:focus-visible{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-btn-icon{display:inline-flex;align-items:center;justify-content:center}.qs-btn-label{white-space:nowrap}.qs-svg-icon{display:block;fill:currentColor;width:16px;height:16px}.qs-section-card{display:flex;flex-direction:column;gap:12px;padding:16px;border-radius:12px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.05)}.qs-section-head{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:center}.qs-section-heading{display:inline-flex;align-items:center;gap:12px;font-weight:600}.qs-section-text{display:flex;flex-direction:column;gap:2px}.qs-section-name{font-size:16px}.qs-section-caption{font-size:12px;opacity:.75}.qs-section-body{display:flex;flex-direction:column}.qs-empty{opacity:.6;font-size:13px;padding:12px}.qs-input{padding:8px 10px;border-radius:8px;background:rgba(0,0,0,.25);color:inherit;border:1px solid rgba(255,255,255,.1);font-size:14px}.qs-input:disabled{opacity:.6;cursor:not-allowed}.qs-checkbox{display:inline-flex;align-items:center;gap:10px}.qs-radio-group{display:flex;flex-wrap:wrap;gap:12px;align-items:flex-start;margin-top:6px;max-width:100%}.qs-radio-label{display:flex;align-items:flex-start;gap:6px;min-width:0}.qs-radio-label span{display:inline-flex;align-items:center;gap:6px;flex-wrap:wrap}.qs-icon{display:inline-flex;align-items:center;justify-content:center;width:18px;height:18px;border-radius:50%;font-size:12px;line-height:16px;margin-left:4px;position:relative;flex-shrink:0}.qs-icon-glyph{opacity:.7;transition:opacity .12s ease-in-out}.qs-icon:hover .qs-icon-glyph{opacity:1}.qs-icon>.qs-tooltip{position:absolute;left:50%;transform:translateX(-50%);bottom:calc(100% + 6px);white-space:normal;word-wrap:break-word;overflow-wrap:break-word;text-align:left;padding:10px 12px;border-radius:6px;font-size:12px;background:#121212;border:1px solid rgba(255,255,255,.08);box-shadow:0 4px 14px rgba(0,0,0,.35);color:var(--spice-text,#fff);pointer-events:none;opacity:0;transition:opacity .12s ease-in-out;z-index:9999;min-width:200px;max-width:400px}.qs-icon:hover>.qs-tooltip{opacity:1}.qs-tooltip .qs-tooltip-emph{color:#ff4e4e}.qs-radio:disabled{cursor:not-allowed}.qs-radio:disabled+span{opacity:.6;cursor:not-allowed}.qs-inline-input{padding:6px 8px;border-radius:6px;border:1px solid rgba(255,255,255,.2);background:rgba(0,0,0,.45);color:inherit;font-size:14px;width:100%;max-width:240px}.qs-dialog-input{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,.18);background:rgba(0,0,0,.35);color:inherit;font-size:14px}.qs-items{margin:10px 0 14px 0;padding:12px;border-left:2px solid rgba(59,130,246,.35);background:rgba(59,130,246,.12);border-radius:8px}.qs-items-body{display:flex;flex-direction:column;gap:4px;font-size:13px;max-height:240px;overflow:auto}.qs-pill{display:inline-flex;align-items:center;justify-content:center;padding:2px 8px;border-radius:999px;background:rgba(255,255,255,.12);font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.qs-pill--accent{background:linear-gradient(135deg,rgba(59,130,246,.85),rgba(99,102,241,.85))}.qs-pill--version{background:rgba(255,255,255,.12)}.qs-pill--channel{background:rgba(248,113,113,.35)}.qs-pill--active-sync{background:linear-gradient(135deg,rgba(34,197,94,.95),rgba(16,185,129,.95));font-weight:bolder;font-size:14px;box-shadow:0 0 25px rgba(34,197,94,.4)}.qs-confirm-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:100;backdrop-filter:blur(2px)}.qs-confirm-dialog{background:var(--spice-section-bg,rgba(32,32,32,.95));border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:20px 22px;max-width:360px;width:min(90vw,360px);box-shadow:0 18px 36px rgba(0,0,0,.45);display:flex;flex-direction:column;gap:16px}.qs-confirm-title{font-size:16px;font-weight:600}.qs-confirm-message{font-size:13px;opacity:.85;line-height:1.5}.qs-confirm-actions{display:flex;gap:10px;justify-content:flex-end}.qs-section-card.qs-disabled,.qs-settings.qs-disabled{opacity:.6;pointer-events:none;position:relative}.qs-section-card.qs-sync-active{border:2px solid rgba(52,211,153,.4);box-shadow:0 0 0 1px rgba(52,211,153,.2)}.qs-row.qs-disabled{opacity:.5;cursor:not-allowed}.qs-row.qs-disabled .qs-row-actions button{pointer-events:none}@media (max-width:860px){.qs-header{flex-direction:column;align-items:flex-start}.qs-actions{width:100%;justify-content:flex-start}.qs-header-actions{width:100%;max-width:none;justify-content:flex-start}.qs-header-actions .qs-btn{max-width:100%}.qs-row{grid-template-columns:1fr}.qs-row-actions{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}.qs-radio-group{flex-direction:column;align-items:flex-start;gap:8px}}.qs-toast-container{position:fixed;top:24px;left:24px;display:flex;flex-direction:column;gap:12px;z-index:2147483646;pointer-events:none}.qs-toast{display:flex;align-items:flex-start;gap:10px;min-width:240px;max-width:min(360px,90vw);padding:12px 14px;border-radius:10px;background:rgba(32,32,32,.92);border:1px solid rgba(255,255,255,.07);box-shadow:0 14px 32px rgba(0,0,0,.45);color:var(--spice-text,#fff);font-size:13px;line-height:1.45;pointer-events:auto;transform:translateY(-4px);opacity:0;transition:transform .2s ease,opacity .2s ease;position:relative;overflow:hidden}.qs-toast--enter{opacity:1;transform:translateY(0)}.qs-toast--exit{opacity:0;transform:translateY(-4px)}.qs-toast--swipe-exit{opacity:0;transform:translateX(-160px);transition:transform .2s ease,opacity .2s ease}.qs-toast--dragging{transition:none!important}.qs-toast:focus-within{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-toast-message{flex:1 1 auto;padding-right:8px}.qs-toast-close{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:none;color:inherit;font-size:18px;line-height:1;cursor:pointer;padding:0 2px;opacity:.7;transition:opacity .12s ease}.qs-toast-close:focus-visible,.qs-toast-close:hover{opacity:1}.qs-toast-close:focus-visible{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-toast-close--hidden{display:none}.qs-toast-progress{position:absolute;left:10px;right:10px;bottom:8px;height:3px;border-radius:999px;background:rgba(255,255,255,.15);transform-origin:left;transition:opacity .16s ease;opacity:0;pointer-events:none}.qs-toast-progress__bar{width:100%;height:100%;border-radius:inherit;background:rgba(255,255,255,.7);transform-origin:left;transform:scaleX(0);transition:transform 80ms linear}.qs-toast-progress--hidden{opacity:0}.qs-toast-progress--visible{opacity:1}.qs-toast--success .qs-toast-progress__bar{background:rgba(187,247,208,.85)}.qs-toast--danger .qs-toast-progress__bar{background:rgba(254,202,202,.9)}.qs-toast--warning .qs-toast-progress__bar{background:rgba(30,41,59,.9)}.qs-toast--warning .qs-toast-progress{background:rgba(15,23,42,.35)}.qs-toast--success{background:linear-gradient(135deg,rgba(34,197,94,.85),rgba(16,185,129,.85));border-color:rgba(34,197,94,.45)}.qs-toast--danger{background:linear-gradient(135deg,rgba(248,113,113,.92),rgba(220,38,38,.92));border-color:rgba(248,113,113,.55)}.qs-toast--warning{background:linear-gradient(135deg,rgba(250,204,21,.9),rgba(251,191,36,.9));border-color:rgba(234,179,8,.55);color:#1f1f1f}.qs-toast-content{flex:1 1 auto;display:flex;flex-direction:column;gap:4px}.qs-toast-title{font-weight:700;font-size:14px;line-height:1.3}.qs-toast--warning .qs-toast-title{color:#1f1f1f}.qs-toast-message{font-size:13px;line-height:1.45}@media (max-width:860px){.qs-toast-container{left:50%;transform:translateX(-50%);top:12px;gap:10px}.qs-toast{max-width:min(420px,92vw)}}
      `.trim(),document.head.appendChild(e))})()})();