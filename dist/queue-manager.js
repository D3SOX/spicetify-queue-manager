(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var m,g,f,n,h,v,s,z,P,i,o,b,W,R,e,t,x,y,r,E,A,S,Q,q,a,l,F,j,w;function L(){var e,t;try{var a,n=Spicetify.LocalStorage.get(i);return n?{autoEnabled:null!=(e=(a=JSON.parse(n)).autoEnabled)?e:o.autoEnabled,autoIntervalMs:("number"==typeof a.autoIntervalMs&&0<a.autoIntervalMs?a:o).autoIntervalMs,maxAutosnapshots:("number"==typeof a.maxAutosnapshots&&0<a.maxAutosnapshots?a:o).maxAutosnapshots,autoMode:"timer"===a.autoMode?"timer":"on-change",onlyNewItems:!1!==a.onlyNewItems,queueWarnEnabled:!1!==a.queueWarnEnabled,queueMaxSize:("number"==typeof a.queueMaxSize&&1<a.queueMaxSize?a:o).queueMaxSize,queueWarnThreshold:("number"==typeof a.queueWarnThreshold&&0<=a.queueWarnThreshold?a:o).queueWarnThreshold,promptManualBeforeReplace:!1!==a.promptManualBeforeReplace,language:"string"==typeof a.language?a.language:void 0,settingsCollapsed:null!=(t=a.settingsCollapsed)?t:o.settingsCollapsed}:o}catch(e){return o}}function B(){try{var e,t=Spicetify.LocalStorage.get(b);return t?(e=JSON.parse(t),Array.isArray(e)?e:[]):[]}catch(e){return[]}}function C(e){return e.sort((e,t)=>t.createdAt-e.createdAt)}function O(e){C(e),Spicetify.LocalStorage.set(b,JSON.stringify(e))}function N(){return C(B())}function M(e,t){var t=null!=t?t:L(),a=B(),n=a.filter(e=>"manual"===e.type),a=a.filter(e=>"auto"===e.type);"auto"===e.type?(t=[e,...a].slice(0,t.maxAutosnapshots),O([...n,...t])):O([e,...n,...a])}function D(){var e,t;try{var a=L();if(a.language&&x.includes(a.language))return a.language;var n=null==(t=null==(e=null==Spicetify?void 0:Spicetify.Platform)?void 0:e.Session)?void 0:t.locale;if(x.includes(n))return n}catch(e){}return"en"}function J(e,a){t=y[r];var t=e.split(".").reduce((e,t)=>null==e?void 0:e[t],t);return"string"!=typeof t?(console.warn(`Translation missing for key: ${e} in locale: `+r),String(e)):a?t.replace(/\{\{(\w+)\}\}/g,(e,t)=>String(a[t]||e)):t}function ee(){r=D()}function $(e){return Number.isFinite(e)&&0<e}function te(e){var t,{track:a,bar:n}=(e=>{let t,a,n=null!=(t=e.querySelector(".qs-toast-progress"))?t:null,s=null!=(a=null==n?void 0:n.querySelector(".qs-toast-progress__bar"))?a:null;return n?n.classList.contains("qs-toast-progress--hidden")||n.classList.contains("qs-toast-progress--visible")||n.classList.add("qs-toast-progress--hidden"):((n=document.createElement("div")).className="qs-toast-progress qs-toast-progress--hidden",n.setAttribute("aria-hidden","true")),s?s.parentElement!==n&&n.appendChild(s):((s=document.createElement("div")).className="qs-toast-progress__bar",s.style.transform="scaleX(0)",n.appendChild(s)),n.parentElement===e&&!n.nextSibling||e.appendChild(n),{track:n,bar:s}})(e);let s=A.get(e);return s?(s.progressTrack=a,s.progressBar=n):(t=performance.now(),s={timeoutId:void 0,rafId:void 0,startTime:t,endTime:t,remaining:1/0,totalDuration:1/0,progressTrack:a,progressBar:n},A.set(e,s)),s}function u(e,t){let a=A.get(e);(a=a&&a.progressTrack&&a.progressBar?a:te(e)).progressTrack&&a.progressBar&&(null===t||Number.isNaN(t)||t<0?(a.progressTrack.classList.remove("qs-toast-progress--visible"),a.progressTrack.classList.add("qs-toast-progress--hidden"),a.progressBar.style.transform="scaleX(0)"):(e=Math.min(1,Math.max(0,t)),a.progressTrack.classList.remove("qs-toast-progress--hidden"),a.progressTrack.classList.add("qs-toast-progress--visible"),a.progressBar.style.transform=`scaleX(${e})`))}function ae(e){var t=A.get(e);if(t&&$(t.remaining))return t.remaining<=0?void I(e):void T(e,t.remaining,!1);t=(e=>(e=e.dataset.toastDuration)&&(e=Number(e),Number.isFinite(e))&&0<e?e:null)(e);t&&$(t)?T(e,t):u(e,null)}function ne(e){if("string"!=typeof e)return e;e=e.trim();if(e.length)return e;throw new Error(W+" toast message cannot be empty")}function se(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);"string"==typeof t?e.textContent=t:e.appendChild(t)}function ie(e,t){0<t&&isFinite(t)?e.dataset.toastDuration=String(t):delete e.dataset.toastDuration}function T(e,t,a=!0){var n,s=te(e);k(e),t<=0||!isFinite(t)?(s.remaining=1/0,s.endTime=1/0,u(e,null)):(n=performance.now(),s.startTime=n,s.endTime=n+t,s.remaining=t,a&&(s.totalDuration=t),u(e,s.totalDuration<=0?1:1-s.remaining/s.totalDuration),s.timeoutId=window.setTimeout(()=>{I(e)},t),s.rafId=window.requestAnimationFrame(()=>function e(t){var a,n,s=A.get(t);s&&($(s.totalDuration)?(a=performance.now(),a=Math.max(0,s.endTime-a),s.remaining=a,n=s.totalDuration<=0?1:1-a/s.totalDuration,u(t,n),s.rafId=0<a?window.requestAnimationFrame(()=>e(t)):void 0):(u(t,null),s.rafId=void 0))}(e)))}function k(e){e=A.get(e);e&&("number"==typeof e.timeoutId&&(clearTimeout(e.timeoutId),e.timeoutId=void 0),"number"==typeof e.rafId)&&(cancelAnimationFrame(e.rafId),e.rafId=void 0)}function I(e,t="default"){k(e),A.delete(e),e.classList.remove("qs-toast--enter","qs-toast--swipe-exit"),e.classList.add("swipe"===t?"qs-toast--swipe-exit":"qs-toast--exit");let a,n=()=>{e.removeEventListener("transitionend",n),e.removeEventListener("animationend",n),void 0!==a&&window.clearTimeout(a),e.remove(),E&&!E.childElementCount&&(E.remove(),E=null)};e.addEventListener("transitionend",n),e.addEventListener("animationend",n),a=window.setTimeout(n,450),e.setAttribute("aria-hidden","true")}function oe(t,a={}){let{tone:e="default",duration:n=3600,dismissible:s,id:i}=a;E&&document.body.contains(E)||((E=document.createElement("div")).className="qs-toast-container",E.setAttribute("role","region"),E.setAttribute("aria-live","polite"),E.setAttribute("aria-label","Notifications"),document.body.appendChild(E));a=E;if(i){let e=Array.from(a.children).find(e=>e instanceof HTMLElement&&e.dataset.toastId===i);if(e)return e.classList.remove("qs-toast--exit"),e.dataset.toastId=i,(r=e.querySelector(".qs-toast-message"))&&se(r,ne(t)),ie(e,n),T(e,n),{close:()=>I(e),element:e}}let o=document.createElement("div");o.className="qs-toast qs-toast--"+e,o.setAttribute("role","status"),o.setAttribute("aria-live","danger"===e?"assertive":"polite"),i&&(o.dataset.toastId=i);var r=document.createElement("div"),l=(r.className="qs-toast-content",document.createElement("div")),u=(l.className="qs-toast-title",l.textContent=W,document.createElement("div")),t=(u.className="qs-toast-message",ne(t)),t=(se(u,t),document.createElement("button")),d=(t.type="button",t.className="qs-toast-close",t.setAttribute("aria-label",J("ui.buttons.cancel")),t.innerHTML="&times;",t.addEventListener("click",e=>{e.preventDefault(),I(o)}),null!=s?s:!(0<n&&isFinite(n)));!d&&0<n&&isFinite(n)&&t.classList.add("qs-toast-close--hidden"),r.appendChild(l),r.appendChild(u),o.appendChild(r),o.appendChild(t),a.appendChild(o),o.offsetWidth,o.classList.add("qs-toast--enter"),ie(o,n),T(o,n),o.addEventListener("mouseenter",()=>{k(o);var e,t=A.get(o);t&&Number.isFinite(t.remaining)&&(e=performance.now(),t.remaining=Math.max(0,t.endTime-e))}),o.addEventListener("mouseleave",()=>{ae(o)});let p=0,c=0,m=!1,g=80,f=e=>{m&&((e=(c=e)-p)<0?(e=Math.max(e,-200),o.style.transform=`translateX(${e}px)`,o.style.opacity=String(Math.max(0,1-Math.abs(e)/160))):(o.style.transform="translateX(0px)",o.style.opacity="1"))},h=e=>{m=!1,o.classList.remove("qs-toast--dragging"),o.style.removeProperty("transition"),o.style.removeProperty("transform"),o.style.removeProperty("opacity"),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",q),document.removeEventListener("touchcancel",S),e?I(o,"swipe"):(o.classList.add("qs-toast--enter"),ae(o))},v=()=>{m&&h(!1)},b=e=>{f(e.clientX),m&&e.preventDefault()},x=e=>{m&&(e=e.clientX-p,h(e<=-g))},y=e=>{var t;m&&(t=e.touches[0])&&(f(t.clientX),e.preventDefault())},q=e=>{m&&((e=e.changedTouches[0])?(e=e.clientX-p,h(e<=-g)):h(!1))},S=()=>{m&&h(!1)},w=e=>{m=!0,p=e,c=e,o.classList.add("qs-toast--dragging"),k(o),o.style.transition="none"};return o.addEventListener("mousedown",e=>{0===e.button&&(w(e.clientX),document.addEventListener("mousemove",b),document.addEventListener("mouseup",x),window.addEventListener("blur",v,{once:!0}))}),o.addEventListener("touchstart",e=>{e=e.touches[0];e&&(w(e.clientX),document.addEventListener("touchmove",y,{passive:!1}),document.addEventListener("touchend",q),document.addEventListener("touchcancel",S),window.addEventListener("blur",v,{once:!0}))}),{close:()=>I(o),element:o}}function _(e,t={}){oe(e,z({tone:"danger"},t))}function U(e,t={}){oe(e,z({tone:"success"},t))}function V(e,t={}){oe(e,z({tone:"warning"},t))}function H(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function d(e,t=S){var a=(null!=(a=Spicetify.SVGIcons)?a:{})[e];return a?`<span class="qs-btn-icon" data-icon-name="${H(e)}"><svg class="qs-svg-icon" viewBox="0 0 16 16" aria-hidden="true" focusable="false" style="width:${t}px;height:${t}px;">${a}</svg></span>`:""}function X(e,t){var a=e.querySelector(".qs-btn-label");a?a.textContent=t:e.textContent=t}function re(e,t){e=e.querySelector(".qs-btn-icon");e&&(t=d(t))&&(e.outerHTML=t)}function le(){return Date.now()+"-"+Math.random().toString(36).slice(2,8)}function ue(t,a){if(t.length!==a.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==a[e])return!1;return!0}async function de(e,t){try{var a=JSON.stringify(t,null,2),n=new Blob([a],{type:"application/json"}),s=window;if(s&&"function"==typeof s.showSaveFilePicker)try{var i=await(await s.showSaveFilePicker({suggestedName:e,types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]})).createWritable();return await i.write(n),void await i.close()}catch(e){if(e&&("AbortError"===e.name||"NotAllowedError"===e.name))return void V(J("toasts.exportCanceled",{reason:e.name}))}var o=URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=e,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(o),U(J("toasts.exportedToDownloads",{filename:e}))}catch(e){console.warn(W+": downloadJson failed",e),_(J("toasts.failedToExportJson"))}}async function pe(){try{var t=window;let e;if(t&&"function"==typeof t.showOpenFilePicker)try{var[a]=await t.showOpenFilePicker({multiple:!1,types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]}),n=await a.getFile();e=await n.text()}catch(e){if(e&&("AbortError"===e.name||"NotAllowedError"===e.name))return V(J("toasts.importCanceled",{reason:e.name})),null}else{let n=document.createElement("input");n.type="file",n.accept=".json,application/json";var s=await new Promise(a=>{n.onchange=async()=>{var e;if(null!=(e=n.files)&&e.length)try{var t=await n.files[0].text();a(t)}catch(e){console.error(W+": file read failed",e),a(null)}else a(null)},n.click()});s&&(e=s)}return"string"!=typeof e?null:JSON.parse(e)}catch(e){return console.warn(W+": uploadJson failed",e),_(J("toasts.failedToImportJson")),null}}async function ce(t){let a,s=new Array(t.length).fill(""),i=[],o=[];t.forEach((e,t)=>{var a,n;e.startsWith("spotify:local:")?s[t]=(t=>{var a=(t=t.split(":"))[2]||"Local",t=t[4]||"track";try{return decodeURIComponent(a.replace(/\+/g," "))+" - "+decodeURIComponent(t.replace(/\+/g," "))}catch(e){return a+" - "+t}})(e):({type:a,id:n}=(e=>{if(3<=(e=e.split(":")).length){if("track"===e[1])return{type:"track",id:e[2]};if("episode"===e[1])return{type:"episode",id:e[2]}}return{type:null,id:null}})(e),"track"===a&&n?i.push({idx:t,id:n}):"episode"===a&&n?o.push({idx:t,id:n}):s[t]=e)});for(let e=0;e<i.length;e+=50){var n=i.slice(e,e+50),r=n.map(e=>e.id).join(",");try{var l,u,d,p,c=await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/tracks?ids="+r),m=Array.isArray(null==c?void 0:c.tracks)?c.tracks:[],g=new Map;for(l of m)null!=l&&l.id&&null!=l&&l.name&&(d=(u=Array.isArray(null==l?void 0:l.artists)?l.artists.map(e=>null==e?void 0:e.name).filter(Boolean).join(", "):"")?u+" - "+l.name:l.name,g.set(l.id,d));for(p of n)s[p.idx]=g.get(p.id)||t[p.idx]}catch(e){for(var f of n)s[f.idx]=t[f.idx]}}if(o.length)for(let e=0;e<o.length;e+=50){var h=o.slice(e,e+50),v=h.map(e=>e.id).join(",");try{var b,x,y,q,S=await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/episodes?ids="+v),w=Array.isArray(null==S?void 0:S.episodes)?S.episodes:[],E=new Map;for(b of w)null!=b&&b.id&&null!=b&&b.name&&(y=(x=null==(a=null==b?void 0:b.show)?void 0:a.name)?x+" - "+b.name:b.name,E.set(b.id,y));for(q of h)s[q.idx]=E.get(q.id)||t[q.idx]}catch(e){for(var A of h)s[A.idx]=t[A.idx]}}return s}function me(e){return("auto"===e.type?J("snapshots.types.auto"):J("snapshots.types.manual"))+" "+(t=>{try{return new Date(t).toLocaleString()}catch(e){return""+t}})(e.createdAt)}function ge(e){return e.name||me(e)}function fe(e){return"string"==typeof e&&e.startsWith("spotify:")?e:e&&"string"==typeof e.uri&&e.uri.startsWith("spotify:")?e.uri:e&&e.contextTrack&&"string"==typeof e.contextTrack.uri&&e.contextTrack.uri.startsWith("spotify:")?e.contextTrack.uri:e&&e.track&&"string"==typeof e.track.uri&&e.track.uri.startsWith("spotify:")?e.track.uri:e&&e.item&&"string"==typeof e.item.uri&&e.item.uri.startsWith("spotify:")?e.item.uri:null}function K(){var t,a,n;try{var s,i=Spicetify.Queue,o=[],r=fe(null==i?void 0:i.track)||fe(null==(a=null==(t=Spicetify.Player)?void 0:t.data)?void 0:a.item),l=(r&&o.push(r),(null==i?void 0:i.nextTracks)||[]);let e=0;for(s of Array.isArray(l)?l:[]){var u,d=null==s?void 0:s.provider,p=(null==(n=null==s?void 0:s.contextTrack)?void 0:n.metadata)||(null==s?void 0:s.metadata),c=!0===(null==p?void 0:p.is_queued)||"true"===(null==p?void 0:p.is_queued);("queue"===d||c)&&(u=fe(s))&&(o.push(u),e++)}var m=o.length?(e=>{var t,a=[];let n=null;for(t of e)t&&t!==n&&a.push(t),n=t;return a})(o):[];return console.log(W+": Spicetify.Queue -> now=%s queuedNext=%d total=%d",Boolean(r),e,m.length),m}catch(e){return console.error(W+": Spicetify.Queue read failed",e),[]}}function he(e){return"danger"===e||"primary"===e||"subtle"===e?e:"default"}function ve(){var e=document.createElement("div");return e.className="qs-confirm-backdrop",document.body.appendChild(e),e}function be(e){var t=document.createElement("div");return t.className="qs-confirm-dialog",e.appendChild(t),t}function G(e){if(q)return Promise.resolve("cancel");q=!0;let{title:m,message:g,confirmLabel:f=J("ui.buttons.confirm"),cancelLabel:h=J("ui.buttons.cancel"),tone:v="default",extraLabel:b,extraTone:x="subtle"}=e;return new Promise(t=>{let a=ve();var e=be(a),n=(m&&((n=document.createElement("div")).className="qs-confirm-title",n.textContent=m,e.appendChild(n)),document.createElement("div")),n=(n.className="qs-confirm-message",n.textContent=g,e.appendChild(n),document.createElement("div")),s=(n.className="qs-confirm-actions",document.createElement("button"));s.type="button",s.className="qs-btn subtle",s.textContent=h;let i=document.createElement("button");i.type="button";var o=he(v),r=["qs-btn"];r.push("default"!==o?o:"primary"),i.className=r.join(" "),i.textContent=f;let l=null,u=(b&&((l=document.createElement("button")).type="button",o=he(x),(r=["qs-btn"]).push("default"!==o?o:"primary"),l.className=r.join(" "),l.textContent=b),l?n.append(s,l,i):n.append(s,i),e.appendChild(n),document.activeElement),d=!1;function p(e){d||(d=!0,a.remove(),null!=u&&u.focus&&u.focus(),document.removeEventListener("keydown",c,!0),q=!1,t(e))}function c(e){"Escape"===e.key?(e.preventDefault(),p("cancel")):"Enter"===e.key&&document.activeElement===i&&(e.preventDefault(),p("confirm"))}s.addEventListener("click",()=>p("cancel")),i.addEventListener("click",()=>p("confirm")),l&&l.addEventListener("click",()=>p("extra")),a.addEventListener("click",e=>{e.target===a&&p("cancel")}),document.addEventListener("keydown",c,!0),setTimeout(()=>{i.focus()},0)})}async function xe(){var e,t;try{var a,n,s=await K();s.length?(a=me({type:"manual",createdAt:Date.now()}),null!==(n=null!=(t=null==(e=await(e=>{if(q)return Promise.resolve(null);q=!0;let{title:g,message:f,confirmLabel:h=J("ui.buttons.confirm"),cancelLabel:v=J("ui.buttons.cancel"),tone:b="default",defaultValue:x="",placeholder:y}=e;return new Promise(t=>{let a=ve();var e=be(a);g&&((s=document.createElement("div")).className="qs-confirm-title",s.textContent=g,e.appendChild(s)),f&&((s=document.createElement("div")).className="qs-confirm-message",s.textContent=f,e.appendChild(s));let n=document.createElement("input");n.type="text",n.className="qs-dialog-input",n.value=x,y&&(n.placeholder=y),e.appendChild(n);var s=document.createElement("div"),i=(s.className="qs-confirm-actions",document.createElement("button")),o=(i.type="button",i.className="qs-btn subtle",i.textContent=v,document.createElement("button")),r=(o.type="button",he(b)),l=["qs-btn"];l.push("default"!==r?r:"primary"),o.className=l.join(" "),o.textContent=h,s.append(i,o),e.appendChild(s);let u=document.activeElement,d=!1;function p(e){d||(d=!0,a.remove(),n.removeEventListener("keydown",c),document.removeEventListener("keydown",m,!0),null!=u&&u.focus&&u.focus(),q=!1,t(e))}function c(e){"Enter"===e.key?(e.preventDefault(),p(n.value)):"Escape"===e.key&&(e.preventDefault(),p(null))}function m(e){"Escape"===e.key&&(e.preventDefault(),p(null))}i.addEventListener("click",()=>p(null)),o.addEventListener("click",()=>p(n.value)),n.addEventListener("keydown",c),document.addEventListener("keydown",m,!0),a.addEventListener("click",e=>{e.target===a&&p(null)}),setTimeout(()=>{n.focus(),n.select()},0)})})({title:J("dialogs.saveSnapshot.title"),message:J("dialogs.saveSnapshot.message"),confirmLabel:J("dialogs.saveSnapshot.confirmLabel"),cancelLabel:J("dialogs.saveSnapshot.cancelLabel"),defaultValue:a}))?void 0:e.trim())?t:null)&&(""===n?_(J("toasts.nameCannotBeEmpty")):(M({id:le(),createdAt:Date.now(),name:n===a?void 0:n,type:"manual",items:s}),U(J("toasts.snapshotSaved"))))):V(J("toasts.noQueueFound"))}catch(e){console.error(W+": manual snapshot failed",e),_(J("toasts.failedToSaveSnapshot"))}}function ye(e){return e&&"string"==typeof e.id&&"number"==typeof e.createdAt&&("auto"===e.type||"manual"===e.type)&&Array.isArray(e.items)&&e.items.every(e=>"string"==typeof e)}function Y(t){Array.from(j.keys()).forEach(e=>{e!==t&&qe(e)})}function qe(e){var t=j.get(e);t&&(t.input.removeEventListener("keydown",t.onKeyDown),t.input.removeEventListener("blur",t.onBlur),t.input.isConnected&&t.input.remove(),t.labelEl.style.display="",t.labelEl.textContent=t.originalLabel,t.actionsEl&&(t.actionsEl.style.display=null!=(t=t.originalActionsDisplay)?t:""),j.delete(e))}function p(e,t,a={}){var{action:a,id:n,tone:s="default",title:i}=a,o=["qs-btn"],s=("danger"===s&&o.push("danger"),"primary"===s&&o.push("primary"),"subtle"===s&&o.push("subtle"),[]),a=(a&&s.push(`data-action="${a}"`),n&&s.push(`id="${n}"`),i&&s.push(`title="${H(i)}"`),s.length?" "+s.join(" "):""),n=d(t);return`<button type="button" class="${o.join(" ")}"${a}>${n}<span class="qs-btn-label">${H(e)}</span></button>`}function Se(e,t,a,n={}){var{tone:n="default"}=n,s=["qs-icon-btn"];return"danger"===n&&s.push("danger"),`<button type="button" class="${s.join(" ")}" data-action="${H(e)}" title="${H(a)}">${d(t)}</button>`}function c(e,t="default"){var a=["qs-pill"];return"default"!==t&&a.push({accent:"qs-pill--accent",version:"qs-pill--version",channel:"qs-pill--channel"}[t]),`<span class="${a.join(" ")}">${H(e)}</span>`}function we(e){return e.map(e=>{var t=H(ge(e)),a=e.items.some(e=>e.startsWith("spotify:local:")),n=[c(e.items.length+" "+(1===e.items.length?J("ui.itemSingular"):J("ui.itemPlural")),"accent")],a=(a&&n.push(c(J("ui.includesLocal"))),n.join(""));return`
          <div class="qs-row" data-id="${e.id}">
            <div class="qs-row-main">
              <div class="qs-row-title">
                ${d("auto"===e.type?"clock":"playlist")}
                <span>${t}</span>
                <span class="qs-title-actions">
                  ${Se("rename","edit",J("ui.labels.renameSnapshot"))}
                  ${e.name?Se("reset-name","repeat",J("ui.labels.resetName")):""}
                  ${Se("delete","x",J("ui.labels.deleteSnapshot"),{tone:"danger"})}
                </span>
              </div>
              <div class="qs-row-meta">${a}</div>
              <div class="qs-row-actions">
                ${p(J("ui.buttons.view"),"chevron-right",{action:"toggle-items",title:J("ui.labels.toggleItems")})}
                ${p(J("ui.buttons.replaceQueue"),"skip-forward",{action:"replace-queue",title:J("ui.labels.replaceQueue"),tone:"primary"})}
                ${p(J("ui.buttons.appendToQueue"),"plus-alt",{action:"append-queue",title:J("ui.labels.appendQueue")})}
                ${p(J("ui.buttons.export"),"download",{action:"export",title:J("ui.labels.exportToPlaylist")})}
              </div>
            </div>
          </div>
          <div class="qs-items" data-id="${e.id}" style="display:none">
            <div class="qs-items-body">${J("ui.loading")}</div>
          </div>
        `}).join("")}function Ee(){var e=N(),t=e.filter(e=>"auto"===e.type),e=e.filter(e=>"manual"===e.type),a=we(t),n=we(e);return`
      <div class="qs-section-card">
        <div class="qs-section-head">
          <div class="qs-section-heading">
            ${d("playlist")}
            ${c(String(e.length),"accent")}
            <div class="qs-section-text">
              <div class="qs-section-name">${J("ui.sections.manualSnapshots")}</div>
              <div class="qs-section-caption">${J("ui.sections.manualSnapshotsCaption")}</div>
            </div>
          </div>
          <div class="qs-actions">
            ${p(J("ui.buttons.exportAll"),"download",{id:"qs-export-manuals",tone:"subtle"})}
            ${p(J("ui.buttons.saveNow"),"plus-alt",{id:"qs-new-manual",tone:"primary"})}
          </div>
        </div>
        <div class="qs-section-body">
          ${n||`<div class="qs-empty">${J("ui.empty.noManualSnapshots")}</div>`}
        </div>
      </div>
      <div class="qs-section-card">
        <div class="qs-section-head">
          <div class="qs-section-heading">
            ${d("clock")}
            ${c(String(t.length),"accent")}
            <div class="qs-section-text">
              <div class="qs-section-name">${J("ui.sections.automaticSnapshots")}</div>
              <div class="qs-section-caption">${J("ui.sections.automaticSnapshotsCaption")}</div>
            </div>
          </div>
          <div class="qs-actions">
            ${p(J("ui.buttons.clearAll"),"x",{id:"qs-clear-autos",tone:"danger"})}
            ${p(J("ui.buttons.exportAll"),"download",{id:"qs-export-autos",tone:"subtle"})}
          </div>
        </div>
        <div class="qs-section-body">
          ${a||`<div class="qs-empty">${J("ui.empty.noAutomaticSnapshots")}</div>`}
        </div>
      </div>
    `}function Ae(){return`
        <div class="qs-header">
          <div class="qs-header-title">
            <div class="qs-header-icon">${d("queue",20)}</div>
            <span class="qs-header-badges">${c("v"+e,"version")}${t?c(t.toUpperCase(),"channel"):""}</span>
          </div>
          <div class="qs-header-actions">
            ${p(J("ui.buttons.refresh"),"repeat",{id:"qs-refresh",tone:"subtle"})}
            ${p(J("ui.buttons.exportSettings"),"download",{id:"qs-export-settings",title:J("ui.labels.exportSettings")})}
            ${p(J("ui.buttons.importSnapshots"),"chart-up",{id:"qs-import-snapshots",title:J("ui.labels.importSnapshots")})}
            ${p(J("ui.buttons.importSettings"),"chart-up",{id:"qs-import-settings",title:J("ui.labels.importSettings")})}
          </div>
        </div>
    `}function Te(e){return`
        <div class="qs-settings ${e.settingsCollapsed?"collapsed":""}">
          <div class="qs-settings-header">
            <div class="qs-section-heading">
              ${d("grid-view")}
              <div class="qs-section-text">
                <div class="qs-section-name">${J("ui.sections.settings")}</div>
                  <div class="qs-section-caption">${J("ui.sections.settingsCaption")}</div>
              </div>
            </div>
            <button type="button" class="qs-settings-toggle" id="qs-settings-toggle">
              ${d("chevron-right")}
            </button>
          </div>
          <div class="qs-settings-content">
            <div class="qs-setting">
              <label class="qs-checkbox"><input type="checkbox" id="qs-auto-enabled" ${e.autoEnabled?"checked":""}/> ${d("brightness")}${J("settings.autoEnabled")}</label>
              <div class="qs-dim">${J("settings.autoMode")} 
                <div class="qs-radio-group" id="qs-auto-mode-group">
                  <label class="qs-radio-label"><input type="radio" class="qs-radio" name="qs-auto-mode" value="timer" ${"timer"===e.autoMode?"checked":""} ${e.autoEnabled?"":"disabled"}/><span>${d("clock")} ${J("settings.timeBased")}</span></label>
                  <label class="qs-radio-label"><input type="radio" class="qs-radio" name="qs-auto-mode" value="on-change" ${"on-change"===e.autoMode?"checked":""} ${e.autoEnabled?"":"disabled"}/><span>${d("shuffle")} ${J("settings.queueChanges")}</span><span class="qs-icon"><span class="qs-icon-glyph">ⓘ</span><span class="qs-tooltip"><span class="qs-tooltip-emph">${J("settings.experimental")}</span>${J("settings.experimentalTooltip")}</span></span></label>
                </div>
              </div>
              <div class="qs-setting" style="margin-top:6px">
                <label class="qs-checkbox"><input type="checkbox" id="qs-only-new" ${e.onlyNewItems?"checked":""} ${e.autoEnabled?"":"disabled"}/> ${d("search")} ${J("settings.onlyNewItems")}</label>
                <div style="opacity:0.7; font-size:12px">${J("settings.onlyNewItemsDescription")}</div>
              </div>
              <div class="qs-setting" style="margin-top:6px">
                <div style="opacity:0.7; font-size:12px">${J("settings.equalQueuesNote")}</div>
              </div>
              <div class="qs-setting" style="margin-top:12px">
                <label class="qs-checkbox"><input type="checkbox" id="qs-queue-warn-enabled" ${e.queueWarnEnabled?"checked":""}/> ${d("exclamation-circle")} ${J("settings.queueWarnEnabled")}</label>
                <div style="opacity:0.7; font-size:12px">${J("settings.queueWarnDescription")}</div>
              </div>
              <div class="qs-setting" style="margin-top:12px">
                <label class="qs-checkbox"><input type="checkbox" id="qs-prompt-manual-before-replace" ${e.promptManualBeforeReplace?"checked":""}/> ${d("copy")} ${J("settings.promptManualBeforeReplace")}</label>
                <div style="opacity:0.7; font-size:12px">${J("settings.promptManualDescription")}</div>
              </div>
              <div class="qs-setting" style="margin-top:12px">
                <label>${d("search")} ${J("settings.language")}</label>
                <select class="qs-input" id="qs-language">
                  <option value="" ${e.language?"":"selected"}>${J("settings.autoDetected")}</option>
                  <option value="en" ${"en"===e.language?"selected":""}>English</option>
                  <option value="de" ${"de"===e.language?"selected":""}>Deutsch</option>
                  <option value="es" ${"es"===e.language?"selected":""}>Español</option>
                  <option value="fr" ${"fr"===e.language?"selected":""}>Français</option>
                </select>
                <div style="opacity:0.7; font-size:12px">${J("settings.languageDescription")}</div>
              </div>
            </div>
            <div class="qs-right">
              <div class="qs-setting">
                <label>${d("clock")} ${J("settings.interval")}</label>
                <input class="qs-input" type="number" id="qs-auto-interval-mins" min="0.5" step="0.5" value="${(e.autoIntervalMs/6e4).toFixed(2)}" ${e.autoEnabled&&"timer"===e.autoMode?"":"disabled"} />
                <div style="opacity:0.7; font-size:12px">${J("settings.intervalDescription")}</div>
              </div>
              <div class="qs-setting">
                <label>${d("chart-up")} ${J("settings.maxAutomaticSnapshots")}</label>
                <input class="qs-input" type="number" id="qs-max-autos" min="1" step="1" value="${e.maxAutosnapshots}" ${e.autoEnabled?"":"disabled"} />
                <div style="opacity:0.7; font-size:12px">${J("settings.maxAutomaticDescription")}</div>
              </div>
              <div class="qs-setting">
                <label>${d("queue")} ${J("settings.queueMaxSize")}</label>
                <input class="qs-input" type="number" id="qs-queue-max-size" min="10" step="1" value="${e.queueMaxSize}" ${e.queueWarnEnabled?"":"disabled"} />
              </div>
              <div class="qs-setting">
                <label>${d("exclamation-circle")} ${J("settings.queueWarnThreshold")}</label>
                <input class="qs-input" type="number" id="qs-queue-warn-threshold" min="0" step="1" value="${e.queueWarnThreshold}" ${e.queueWarnEnabled?"":"disabled"} />
              </div>
            </div>
          </div>
        </div>
    `}function ke(){var e=document.querySelector(".qs-header");e&&(e.outerHTML=Ae())}function Ie(e){var t=document.querySelector(".qs-settings");t&&(t.outerHTML=Te(e.getSettings()))}function Le($){var e=Ee(),t=Te($.getSettings()),t=`
      <div class="qs-container">
        ${Ae()}
        ${t}
        <div id="qs-list">
          ${e||`<div style="opacity:0.7">${J("ui.empty.noSnapshots")}</div>`}
        </div>
      </div>
    `;function s(){let t=$.getSettings();var e=document.querySelectorAll('input.qs-radio[name="qs-auto-mode"]'),a=document.querySelector("#qs-auto-interval-mins"),n=document.querySelector("#qs-only-new"),s=document.querySelector("#qs-max-autos"),i=document.querySelector("#qs-queue-max-size"),o=document.querySelector("#qs-queue-warn-threshold"),e=(e.forEach(e=>{e.disabled=!t.autoEnabled}),a&&(a.disabled=!(t.autoEnabled&&"timer"===t.autoMode)),n&&(n.disabled=!t.autoEnabled),s&&(s.disabled=!t.autoEnabled),t.queueWarnEnabled);i&&(i.disabled=!e),o&&(o.disabled=!e)}Spicetify.PopupModal.display({title:W,content:t,isLarge:!0}),a&&(document.removeEventListener("click",a,!0),a=null),l&&(document.removeEventListener("change",l,!0),l=null),a=async function(e){var a=document.querySelector(".qs-container"),n=e.target;if(a&&n&&a.contains(n)&&e.stopPropagation(),a&&n){var t,s,i,a=B(),n=n.closest(".qs-btn, .qs-icon-btn, .qs-settings-toggle");if("qs-new-manual"===(null==n?void 0:n.id))e.preventDefault(),Y(),await xe(),Z();else{if("qs-export-settings"===(null==n?void 0:n.id))return e.preventDefault(),t=$.getSettings(),de(R+"-settings.json",t);if("qs-import-settings"===(null==n?void 0:n.id))e.preventDefault(),t=$,(i=await pe())&&(!(s=i)||"boolean"!=typeof s.autoEnabled||"number"!=typeof s.autoIntervalMs||"number"!=typeof s.maxAutosnapshots||"timer"!==s.autoMode&&"on-change"!==s.autoMode||"boolean"!=typeof s.onlyNewItems||"boolean"!=typeof s.queueWarnEnabled||"number"!=typeof s.queueMaxSize||"number"!=typeof s.queueWarnThreshold||"boolean"!=typeof s.promptManualBeforeReplace?_(J("toasts.invalidSettingsFile")):"confirm"===await G({title:J("dialogs.importSettings.title"),message:J("dialogs.importSettings.message"),confirmLabel:J("dialogs.importSettings.confirmLabel"),tone:"danger"})&&(t.setSettings(i),Ie(t),U(J("toasts.settingsImported"))));else{if("qs-import-snapshots"===(null==n?void 0:n.id))return e.preventDefault(),(async()=>{if(e=await pe()){var e=Array.isArray(e)?e:[e],a=e.filter(ye);if(a.length!==e.length&&_(J("toasts.someImportedSnapshotsInvalid")),a.length){e=B();let t=new Set(e.map(e=>e.id));a=a.filter(e=>!t.has(e.id));a.length?(O([...e,...a]),Z(),U(J("toasts.snapshotsImported",{count:a.length,plural:1===a.length?"snapshot":"snapshots"}))):U(J("toasts.allSnapshotsAlreadyExist"))}else _(J("toasts.noValidSnapshotsToImport"))}})();if("qs-export-manuals"===(null==n?void 0:n.id))return e.preventDefault(),s=a.filter(e=>"manual"===e.type),de(R+"-manual-snapshots.json",s);if("qs-export-autos"===(null==n?void 0:n.id))return e.preventDefault(),i=a.filter(e=>"auto"===e.type),de(R+"-auto-snapshots.json",i);if("qs-clear-autos"===(null==n?void 0:n.id))return e.preventDefault(),0===(r=a.filter(e=>"auto"===e.type).length)?void _(J("toasts.noAutomaticSnapshotsToClear")):"confirm"!==await G({title:J("dialogs.clearAutomaticSnapshots.title"),message:J("dialogs.clearAutomaticSnapshots.message",{count:r}),confirmLabel:J("dialogs.clearAutomaticSnapshots.confirmLabel"),tone:"danger"})?void 0:(O(B().filter(e=>"manual"===e.type)),Z(),void U(J("toasts.clearedAutomaticSnapshots",{count:r})));if("qs-refresh"===(null==n?void 0:n.id))e.preventDefault(),ke(),Ie($),Z();else if("qs-settings-toggle"===(null==n?void 0:n.id))e.preventDefault(),r=$.getSettings(),r=P(z({},r),{settingsCollapsed:!r.settingsCollapsed}),$.setSettings(r),l=document.querySelector(".qs-settings"),o=document.querySelector(".qs-settings-content"),l&&o&&(r.settingsCollapsed?l.classList.add("collapsed"):l.classList.remove("collapsed"));else if(n){var o=n.closest(".qs-row"),r=n.getAttribute("data-action"),l=n.classList.contains("qs-icon-btn");if(o&&(r||!l)){let t=o.getAttribute("data-id");if(t){j.has(t)||Y(t);var u=a.find(e=>e.id===t);if(u){if(l)return"rename"===r?(e.preventDefault(),void function s(i,o){if(i.isConnected){let n=o.id;if(j.has(n))(a=j.get(n))&&(a.input.focus(),a.input.select());else{var a=i.querySelector(".qs-row-title");if(a){var r=Array.from(a.querySelectorAll("span"))[1];if(r){var l=null!=(l=a.querySelector(".qs-title-actions"))?l:void 0,u=null!=(u=r.textContent)?u:"",d=me(o),p=null!=(p=null==l?void 0:l.style.display)?p:"";let e=document.createElement("input"),t=(e.type="text",e.value=null!=(c=o.name)?c:u,e.className="qs-inline-input",e.setAttribute("aria-label",J("ui.labels.snapshotName")),r.style.display="none",l&&(l.style.display="none"),a.insertBefore(e,null!=l?l:null),e=>{var t,a=j.get(n);a&&(qe(n),e)&&((e=a.input.value.trim())?e!==a.originalLabel.trim()&&(e===a.generatedName?_(J("toasts.nameMustDifferFromDefault"),{duration:2e3}):0<=(t=(a=B()).findIndex(e=>e.id===n))&&(a[t].name=e,O(a),Z())):(_(J("toasts.nameCannotBeEmpty"),{duration:2e3}),s(i,o)))});var c={input:e,labelEl:r,originalLabel:u,actionsEl:l,originalActionsDisplay:p,generatedName:d,onKeyDown(e){"Enter"===e.key?(e.preventDefault(),t(!0)):"Escape"===e.key&&(e.preventDefault(),t(!1))},onBlur(){t(!0)}};j.set(n,c),e.addEventListener("keydown",c.onKeyDown),e.addEventListener("blur",c.onBlur),setTimeout(()=>{e.focus(),e.select()},0)}}}}}(o,u)):"reset-name"===r?(e.preventDefault(),void(0<=(l=a.findIndex(e=>e.id===t))&&(delete a[l].name,O(a),Z()))):"delete"!==r||"confirm"!==await G({title:J("dialogs.deleteSnapshot.title"),message:J("dialogs.deleteSnapshot.message"),confirmLabel:J("dialogs.deleteSnapshot.confirmLabel"),tone:"danger"})?void 0:(e=ge(u),O(a.filter(e=>e.id!==t)),Z(),void U(J("toasts.snapshotDeleted",{name:e})));var d,p,l=r;if(l)if("toggle-items"===l){a=o.nextElementSibling,e=n;if(a&&a.classList.contains("qs-items"))if("none"===a.style.display||!a.style.display){a.style.display="block",X(e,J("ui.buttons.hide")),re(e,"chart-down");r=a.querySelector(".qs-items-body");if(r){r.textContent=J("ui.loading");try{d=u;var c=await(Q.has(d.id)?Q.get(d.id):(p=await ce(d.items),Q.set(d.id,p),p));r.innerHTML=c.map((e,t)=>`<div>${t+1}. ${H(e)}</div>`).join("")}catch(e){r.textContent=J("ui.failedToLoadItems")}}}else a.style.display="none",X(e,J("ui.buttons.view")),re(e,"chevron-right")}else if("export"===l){if(!F.has(t)){F.add(t);var m=u,o=n;try{if(m.items.length){o&&(o.disabled=!0,X(o,J("snapshots.actions.exporting")));var g=await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/me"),f=null==g?void 0:g.id;if(!f)throw new Error("No user id");var h=ge(m),v=await Spicetify.CosmosAsync.post(`https://api.spotify.com/v1/users/${encodeURIComponent(f)}/playlists`,{name:h,description:`Saved from ${W} on `+new Date(m.createdAt).toLocaleString(),public:!1}),b=null==v?void 0:v.id;if(!b)throw new Error("Playlist creation failed");var x="spotify:playlist:"+b;let t=0;var y=m.items.length;for(let e=0;e<m.items.length;e+=100){var q=m.items.slice(e,e+100);try{await Spicetify.Platform.PlaylistAPI.add(x,q,{after:"end"}),t+=q.length}catch(e){console.warn(W+": failed to add a chunk",e)}}if(t===y){U(J("toasts.exportedToPlaylist",{name:h}));try{var S=Spicetify.URI.playlistV2URI(b),w=null==S?void 0:S.toURLPath(!0),E=Spicetify.Platform.History;if(w)if(null!=E&&E.push)try{E.push(w)}catch(e){E.push({pathname:w})}else window.location.hash=w}catch(e){}}else V(J("toasts.exportResult",{added:t,total:y}));try{console.log(W+": Export result",{snapshotId:m.id,totalExpected:y,totalAdded:t})}catch(e){}}else V(J("toasts.nothingToExport"))}catch(e){console.error(W+": export failed",e),_(J("toasts.failedToExport"))}finally{o&&(o.disabled=!1,X(o,J("ui.buttons.export")))}await 0,F.delete(t)}}else if("append-queue"===l){if(!F.has(t)){F.add(t);try{var A=u,T=n;try{if(A.items.length){T&&(T.disabled=!0,X(T,J("snapshots.actions.appending")));var k=K();let t=new Set(k);var I=A.items.filter(e=>!t.has(e));if(I.length){let t=0;for(let e=0;e<I.length;e+=100){var L=I.slice(e,e+100),C=L.map(e=>({uri:e}));try{await Spicetify.Platform.PlayerAPI.addToQueue(C),t+=C.length}catch(e){console.warn(W+": addToQueue chunk failed",e);for(var N of L)try{await Spicetify.Platform.PlayerAPI.addToQueue([{uri:N}]),t+=1}catch(e){console.warn(W+": addToQueue single failed",{uri:N,error:e})}}}var M=I.length;t===M?U(J("toasts.addedToQueue",{count:M,plural:J(1===M?"ui.itemSingular":"ui.itemPlural")})):0<t?V(J("toasts.appendResult",{added:t,total:M})):_(J("toasts.failedToAppend"));try{console.log(W+": Append result",{snapshotId:A.id,totalExpected:M,added:t})}catch(e){}}else V(J("toasts.allItemsAlreadyInQueue"))}else V(J("toasts.snapshotEmpty"))}catch(e){console.error(W+": append queue failed",e),_(J("toasts.failedToAppend"))}finally{T&&(T.disabled=!1,X(T,J("ui.buttons.appendToQueue")))}await 0}finally{F.delete(t)}}}else if("replace-queue"===l&&!F.has(t)){F.add(t);try{if($.getSettings().promptManualBeforeReplace){var D=await G({title:J("dialogs.saveCurrentQueue.title"),message:J("dialogs.saveCurrentQueue.message"),confirmLabel:J("dialogs.saveCurrentQueue.confirmLabel"),cancelLabel:J("dialogs.saveCurrentQueue.cancelLabel"),extraLabel:J("dialogs.saveCurrentQueue.extraLabel"),extraTone:"danger",tone:"primary"});if("extra"===D)return;"confirm"===D&&(await xe(),Z())}await(async(e,a)=>{try{if(e.items.length){a&&(a.disabled=!0,X(a,J("snapshots.actions.replacing")));var n=e.items.slice(),s=n.shift();try{await Spicetify.Platform.PlayerAPI.clearQueue()}catch(e){console.warn(W+": clearQueue failed (non-fatal)",e)}if(s.startsWith("spotify:local:"))try{await Spicetify.Platform.PlayerAPI.play({uri:"spotify:internal:local-files",pages:[{items:[{uri:s}]}]},{},{skipTo:{index:0}})}catch(e){return console.warn(W+": local fallback failed",e),void _(J("toasts.failedToStartPlayback"))}else try{await Spicetify.Player.playUri(s)}catch(e){try{await Spicetify.Platform.PlayerAPI.play({uri:s},{},{})}catch(e){return console.warn(W+": failed to start first track",e),void _(J("toasts.failedToStartPlayback"))}}await new Promise(e=>setTimeout(e,250));let t=0;for(let e=0;e<n.length;e+=100){var i=n.slice(e,e+100).map(e=>({uri:e}));try{await Spicetify.Platform.PlayerAPI.addToQueue(i),t+=i.length}catch(e){console.warn(W+": addToQueue chunk failed",e)}}t===n.length?U(J("toasts.queueReplaced",{count:e.items.length})):V(J("toasts.replaceResult",{added:t+1,total:e.items.length}))}else V(J("toasts.snapshotEmpty"))}catch(e){console.error(W+": replace queue failed",e),_(J("toasts.failedToReplace"))}finally{a&&(a.disabled=!1,X(a,J("ui.buttons.replaceQueue")))}})(u,n)}finally{F.delete(t)}}}}}}}}}},l=function(e){var t,a=document.querySelector(".qs-container"),n=e.target;a&&n&&a.contains(n)&&(e.stopPropagation(),"qs-auto-enabled"===n.id?(a=!!n.checked,e=$.getSettings(),e=P(z({},e),{autoEnabled:a}),$.setSettings(e),Y(),s()):"qs-auto-mode"===n.name?(a=n,e=$.getSettings(),a="on-change"===a.value?"on-change":"timer",e=P(z({},e),{autoMode:a}),$.setSettings(e),s()):"qs-only-new"===n.id?(a=!!n.checked,e=$.getSettings(),e=P(z({},e),{onlyNewItems:a}),$.setSettings(e)):"qs-auto-interval-mins"===n.id?(a=n,e=$.getSettings(),a=parseFloat(a.value),a=isFinite(a)&&.5<=a?a:e.autoIntervalMs/6e4,e=P(z({},e),{autoIntervalMs:Math.round(6e4*a)}),$.setSettings(e)):"qs-max-autos"===n.id?(a=n,e=$.getSettings(),a=parseInt(a.value,10),a=Number.isFinite(a)&&0<a?a:e.maxAutosnapshots,e=P(z({},e),{maxAutosnapshots:a}),$.setSettings(e),a=e,t=(e=N()).filter(e=>"manual"===e.type),e=e.filter(e=>"auto"===e.type).slice(0,a.maxAutosnapshots),O([...t,...e]),Z()):"qs-queue-warn-enabled"===n.id?(a=n.checked,t=$.getSettings(),e=P(z({},t),{queueWarnEnabled:a}),$.setSettings(e),s()):"qs-queue-max-size"===n.id?(a=n,e=$.getSettings(),a=parseInt(a.value,10),a=Number.isFinite(a)&&1<a?a:e.queueMaxSize,e=P(z({},e),{queueMaxSize:a}),$.setSettings(e)):"qs-queue-warn-threshold"===n.id?(a=n,e=$.getSettings(),a=parseInt(a.value,10),a=Number.isFinite(a)&&0<=a?a:e.queueWarnThreshold,e=P(z({},e),{queueWarnThreshold:a}),$.setSettings(e)):"qs-prompt-manual-before-replace"===n.id?(a=n.checked,e=$.getSettings(),e=P(z({},e),{promptManualBeforeReplace:a}),$.setSettings(e)):"qs-language"===n.id&&(a=n.value||void 0,e=$.getSettings(),n=P(z({},e),{language:a}),$.setSettings(n),ee(),ke(),Ie($),Z()))},document.addEventListener("click",a,!0),document.addEventListener("change",l,!0),s()}function Z(){Y();var e,t=document.getElementById("qs-list");t&&(e=Ee(),t.innerHTML=e||`<div style="opacity:0.7">${J("ui.empty.noSnapshots")}</div>`)}function Ce(){let n=[],t=null,i=[],o=null,r=null;function l(){null!==t&&(clearInterval(t),t=null)}async function u(e){try{if(e.autoEnabled){let a=await K();if(a.length){if(e.onlyNewItems){let t=new Set(n);if(!a.some(e=>!t.has(e)))return void(n=a)}n=(ue(a,n)||B().filter(e=>"auto"===e.type).some(e=>ue(e.items,a))||M({id:le(),createdAt:Date.now(),type:"auto",items:a},e),a)}else console.log(W+": queue is empty, skipping auto snapshot")}}catch(e){console.error(W+": auto snapshot error",e),_(J("toasts.failedToSaveAutomatic"))}}function d(e){l(),e.autoEnabled&&(t=window.setInterval(()=>u(e),e.autoIntervalMs),r=e.autoIntervalMs)}function p(){for(var e of i)e();i=[]}return{startAutoTimer:d,primeFromExisting:function(){var e,t=N()[0];null!=(e=null==t?void 0:t.items)&&e.length&&(n=t.items.slice())},applyAutoMode:function(e){var t=e.autoEnabled?e.autoMode:null;if(t===o)"timer"===t&&r!==e.autoIntervalMs&&d(e);else{if("on-change"===o?p():"timer"===o&&l(),"on-change"===t){var a,n,s=e;if(p(),s.autoEnabled)try{let e=null==(n=null==(a=null==Spicetify?void 0:Spicetify.Player)?void 0:a.origin)?void 0:n._events;if(null==e||!e.addListener||null==e||!e.removeListener)throw new Error("queue_update events API not available");let t=e=>{u(s),console.log(W+": queue_update",e)};e.addListener("queue_update",t),i.push(()=>{try{e.removeListener("queue_update",t)}catch(e){console.error(W+": failed to remove queue_update listener",e)}})}catch(e){console.error(W+": failed to start queue update watcher",e),_(J("toasts.failedToStartQueueWatcher"))}}else"timer"===t&&d(e);o=t}}}}function Ne(o){let s=null,r=null,l=0,u=null,d=3e4;async function i(){try{var e,t,a,n,s,i=o();i.queueWarnEnabled&&(e=i.queueMaxSize,(t=i.queueWarnThreshold)<0||e<=1||(a=(await K()).length,null!==u&&a<=u)||(u=a)&&(n=Math.max(0,e-a))<=t&&(s=Date.now(),r!==n||s-l>=d)&&(V(J("toasts.queueNearlyFull",{used:e-n,max:e}),{duration:25e4,id:"queue-nearly-full"}),r=n,l=s))}catch(e){console.warn(W+": queue capacity check failed",e)}}function e(){if(s){try{s()}catch(e){}s=null}u=null}return{start:function(){var a,n;e();try{let e=null==(n=null==(a=null==Spicetify?void 0:Spicetify.Player)?void 0:a.origin)?void 0:n._events;if(null==e||!e.addListener||null==e||!e.removeListener)throw new Error("queue_update events API not available");let t=e=>{i()};e.addListener("queue_update",t),s=()=>{try{e.removeListener("queue_update",t)}catch(e){console.error(W+": failed to remove queue_update listener (capacity watcher)",e)}},i()}catch(e){console.error(W+": failed to start capacity watcher",e),_(J("toasts.failedToStartCapacityWatcher"))}},stop:e,checkAndWarnOnce:i}}m=Object.defineProperty,g=Object.defineProperties,f=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,o={autoEnabled:!(i="queue-manager:settings"),autoIntervalMs:3e5,maxAutosnapshots:20,autoMode:"timer",onlyNewItems:!0,queueWarnEnabled:!0,queueMaxSize:80,queueWarnThreshold:5,promptManualBeforeReplace:!(P=(e,t)=>g(e,f(t))),language:void 0,settingsCollapsed:!(z=(e,t)=>{for(var a in t=t||{})h.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))v.call(t,a)&&s(e,a,t[a]);return e})},b="queue-manager:snapshots",W="Queue Manager",R="queue-manager",e="0.6.1",t="beta",x=["en","de","es","fr"],y={en:{ui:{buttons:{save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",export:"Export",import:"Import",refresh:"Refresh",view:"View",hide:"Hide",rename:"Rename",resetName:"Reset name",clearAll:"Clear all",exportAll:"Export all",saveNow:"Save now",replaceQueue:"Replace queue",appendToQueue:"Append to queue",exportToPlaylist:"Export to playlist",exportSettings:"Export settings",importSnapshots:"Import snapshots",importSettings:"Import settings"},labels:{snapshotName:"Snapshot name",toggleItems:"Toggle items",replaceQueue:"Replace the current queue",appendQueue:"Append missing items to queue",exportToPlaylist:"Export to playlist",renameSnapshot:"Rename snapshot",resetName:"Reset name",deleteSnapshot:"Delete snapshot",exportSettings:"Export settings to a JSON file",importSnapshots:"Import snapshots from a JSON file",importSettings:"Import settings from a JSON file",exportAllManuals:"Export all",exportAllAutos:"Export all",clearAllAutos:"Clear all",saveNewManual:"Save now"},sections:{manualSnapshots:"Manual Snapshots",manualSnapshotsCaption:"Your saved queues for later",automaticSnapshots:"Automatic Snapshots",automaticSnapshotsCaption:"Captured in the background",settings:"Settings",settingsCaption:"Customize your experience"},empty:{noManualSnapshots:"No manual snapshots yet",noAutomaticSnapshots:"No automatic snapshots yet",noSnapshots:"No snapshots yet"},itemSingular:"item",itemPlural:"items",includesLocal:"includes local",loading:"Loading…",failedToLoadItems:"Failed to load items"},snapshots:{types:{auto:"Auto",manual:"Manual"},actions:{exporting:"Exporting…",appending:"Appending…",replacing:"Replacing…"}},settings:{autoEnabled:"Enable automatic snapshots",autoMode:"Mode",timeBased:"Time-based",queueChanges:"Queue changes",experimental:"Experimental!",experimentalTooltip:"This mode may create many similar snapshots (for example when queuing a bunch of songs)",onlyNewItems:"Check for new items",onlyNewItemsDescription:"Only trigger it when there is a new song that was not in the previous snapshot.",equalQueuesNote:"Equal queues are never saved as automatic snapshots.",queueWarnEnabled:"Warn when queue is nearly full",queueWarnDescription:"Heuristic limit; includes current track. Adjust if needed.",promptManualBeforeReplace:"Ask to save manual snapshot before replacing queue",promptManualDescription:"Offers to store the current queue before overwriting it.",interval:"Interval (minutes)",intervalDescription:"Minimum 0.5 (30 seconds)",maxAutomaticSnapshots:"Max automatic snapshots",maxAutomaticDescription:"Older snapshots are pruned. Be careful when changing this",queueMaxSize:"Queue max size",queueWarnThreshold:"Warn when remaining slots ≤",language:"Language",languageDescription:"Override the auto-detected language",autoDetected:"Auto-detected"},toasts:{snapshotSaved:"Snapshot saved",snapshotDeleted:"Snapshot deleted: {{name}}",clearedAutomaticSnapshots:"Cleared {{count}} automatic snapshots",exportedToPlaylist:"Exported to {{name}}",addedToQueue:"Added {{count}} {{plural}} to queue",queueReplaced:"Queue replaced ({{count}} items)",settingsImported:"Settings imported successfully.",snapshotsImported:"Imported {{count}} new {{plural}}.",noQueueFound:"No queue found. If you believe this is an error, please try to play and pause a track.",nothingToExport:"Nothing to export",snapshotEmpty:"Snapshot is empty",allItemsAlreadyInQueue:"All snapshot items are already in the queue",failedToSaveSnapshot:"Failed to save snapshot",failedToExport:"Failed to export to playlist",failedToAppend:"Failed to append to queue",failedToReplace:"Failed to replace queue",failedToStartPlayback:"Failed to start playback",failedToSaveAutomatic:"Failed to save an automatic snapshot",failedToStartQueueWatcher:"Failed to start queue update watcher",failedToStartCapacityWatcher:"Failed to start capacity watcher",queueNearlyFull:"Queue nearly full ({{used}}/{{max}})",nameCannotBeEmpty:"Name cannot be empty",nameMustDifferFromDefault:"Name must differ from the default suggestion",noAutomaticSnapshotsToClear:"No automatic snapshots to clear",someImportedSnapshotsInvalid:"Some imported snapshots were invalid and have been skipped.",noValidSnapshotsToImport:"No valid snapshots to import.",allSnapshotsAlreadyExist:"All snapshots already exist.",invalidSettingsFile:"Invalid settings file format.",exportResult:"Exported; some tracks couldn't be added ({{added}}/{{total}})",appendResult:"Added {{added}}/{{total}} items to queue",replaceResult:"Replaced; some items couldn't be queued ({{added}}/{{total}})",exportCanceled:"Export canceled ({{reason}})",exportedToDownloads:"Exported {{filename}} to Downloads folder",failedToExportJson:"Failed to export JSON",importCanceled:"Import canceled ({{reason}})",failedToImportJson:"Failed to import JSON"},dialogs:{saveSnapshot:{title:"Save snapshot",message:"Name this snapshot",confirmLabel:"Save",cancelLabel:"Cancel"},deleteSnapshot:{title:"Delete snapshot",message:"Delete this snapshot? This cannot be undone.",confirmLabel:"Delete"},clearAutomaticSnapshots:{title:"Clear automatic snapshots",message:"Delete all {{count}} automatic snapshots? This cannot be undone.",confirmLabel:"Clear all"},saveCurrentQueue:{title:"Save current queue?",message:"Create a manual snapshot of the current queue before replacing it?",confirmLabel:"Save snapshot",cancelLabel:"Skip",extraLabel:"Cancel"},importSettings:{title:"Import Settings",message:"This will overwrite your current settings. Are you sure?",confirmLabel:"Import"}},errors:{failedToAddTopbarButton:"failed to add topbar button",failedToAddContextMenuItem:"failed to add context menu item",failedToAddKeyboardShortcut:"failed to add keyboard shortcut"}},de:{ui:{buttons:{save:"Speichern",cancel:"Abbrechen",confirm:"Bestätigen",delete:"Löschen",export:"Exportieren",import:"Importieren",refresh:"Aktualisieren",view:"Anzeigen",hide:"Ausblenden",rename:"Umbenennen",resetName:"Name zurücksetzen",clearAll:"Alle löschen",exportAll:"Alle exportieren",saveNow:"Jetzt speichern",replaceQueue:"Warteschlange ersetzen",appendToQueue:"Zur Warteschlange hinzufügen",exportToPlaylist:"Als Playlist exportieren",exportSettings:"Einstellungen exportieren",importSnapshots:"Snapshots importieren",importSettings:"Einstellungen importieren"},labels:{snapshotName:"Snapshot-Name",toggleItems:"Elemente ein-/ausblenden",replaceQueue:"Die aktuelle Warteschlange ersetzen",appendQueue:"Fehlende Elemente zur Warteschlange hinzufügen",exportToPlaylist:"Als Playlist exportieren",renameSnapshot:"Snapshot umbenennen",resetName:"Name zurücksetzen",deleteSnapshot:"Snapshot löschen",exportSettings:"Einstellungen in eine JSON-Datei exportieren",importSnapshots:"Snapshots aus einer JSON-Datei importieren",importSettings:"Einstellungen aus einer JSON-Datei importieren",exportAllManuals:"Alle exportieren",exportAllAutos:"Alle exportieren",clearAllAutos:"Alle löschen",saveNewManual:"Jetzt speichern"},sections:{manualSnapshots:"Manuelle Snapshots",manualSnapshotsCaption:"Deine gespeicherten Warteschlangen für später",automaticSnapshots:"Automatische Snapshots",automaticSnapshotsCaption:"Im Hintergrund erfasst",settings:"Einstellungen",settingsCaption:"Deine Erfahrung anpassen"},empty:{noManualSnapshots:"Noch keine manuellen Snapshots",noAutomaticSnapshots:"Noch keine automatischen Snapshots",noSnapshots:"Noch keine Snapshots"},itemSingular:"Element",itemPlural:"Elemente",includesLocal:"enthält lokale Dateien",loading:"Lädt…",failedToLoadItems:"Elemente konnten nicht geladen werden"},snapshots:{types:{auto:"Auto",manual:"Manuell"},actions:{exporting:"Exportiere…",appending:"Füge hinzu…",replacing:"Ersetze…"}},settings:{autoEnabled:"Automatische Snapshots aktivieren",autoMode:"Modus",timeBased:"Zeitbasiert",queueChanges:"Warteschlangen-Änderungen",experimental:"Experimentell!",experimentalTooltip:"Dieser Modus kann viele ähnliche Snapshots erstellen (z.B. beim Hinzufügen mehrerer Songs)",onlyNewItems:"Auf neue Elemente prüfen",onlyNewItemsDescription:"Nur auslösen, wenn es einen neuen Song gibt, der nicht im vorherigen Snapshot war.",equalQueuesNote:"Gleiche Warteschlangen werden nie als automatische Snapshots gespeichert.",queueWarnEnabled:"Warnen, wenn Warteschlange fast voll ist",queueWarnDescription:"Heuristische Grenze; beinhaltet aktuellen Track. Bei Bedarf anpassen.",promptManualBeforeReplace:"Vor dem Ersetzen der Warteschlange nach manuellem Snapshot fragen",promptManualDescription:"Bietet an, die aktuelle Warteschlange zu speichern, bevor sie überschrieben wird.",interval:"Intervall (Minuten)",intervalDescription:"Minimum 0,5 (30 Sekunden)",maxAutomaticSnapshots:"Max. automatische Snapshots",maxAutomaticDescription:"Ältere Snapshots werden entfernt. Vorsicht beim Ändern",queueMaxSize:"Max. Warteschlangen-Größe",queueWarnThreshold:"Warnen wenn verbleibende Plätze ≤",language:"Sprache",languageDescription:"Die automatisch erkannte Sprache überschreiben",autoDetected:"Automatisch erkannt"},toasts:{snapshotSaved:"Snapshot gespeichert",snapshotDeleted:"Snapshot gelöscht: {{name}}",clearedAutomaticSnapshots:"{{count}} automatische Snapshots gelöscht",exportedToPlaylist:"Als {{name}} exportiert",addedToQueue:"{{count}} {{plural}} zur Warteschlange hinzugefügt",queueReplaced:"Warteschlange ersetzt ({{count}} Elemente)",settingsImported:"Einstellungen erfolgreich importiert.",snapshotsImported:"{{count}} neue {{plural}} importiert.",noQueueFound:"Keine Warteschlange gefunden. Falls du glaubst, dass dies ein Fehler ist, versuche einen Track abzuspielen und zu pausieren.",nothingToExport:"Nichts zu exportieren",snapshotEmpty:"Snapshot ist leer",allItemsAlreadyInQueue:"Alle Snapshot-Elemente sind bereits in der Warteschlange",failedToSaveSnapshot:"Snapshot konnte nicht gespeichert werden",failedToExport:"Export zur Playlist fehlgeschlagen",failedToAppend:"Hinzufügen zur Warteschlange fehlgeschlagen",failedToReplace:"Ersetzen der Warteschlange fehlgeschlagen",failedToStartPlayback:"Wiedergabe konnte nicht gestartet werden",failedToSaveAutomatic:"Automatischer Snapshot konnte nicht gespeichert werden",failedToStartQueueWatcher:"Warteschlangen-Update-Überwacher konnte nicht gestartet werden",failedToStartCapacityWatcher:"Kapazitäts-Überwacher konnte nicht gestartet werden",queueNearlyFull:"Warteschlange fast voll ({{used}}/{{max}})",nameCannotBeEmpty:"Name darf nicht leer sein",nameMustDifferFromDefault:"Name muss sich vom Standard-Vorschlag unterscheiden",noAutomaticSnapshotsToClear:"Keine automatischen Snapshots zum Löschen",someImportedSnapshotsInvalid:"Einige importierte Snapshots waren ungültig und wurden übersprungen.",noValidSnapshotsToImport:"Keine gültigen Snapshots zum Importieren.",allSnapshotsAlreadyExist:"Alle Snapshots existieren bereits.",invalidSettingsFile:"Ungültiges Einstellungsdatei-Format.",exportResult:"Exportiert; einige Tracks konnten nicht hinzugefügt werden ({{added}}/{{total}})",appendResult:"{{added}}/{{total}} Elemente zur Warteschlange hinzugefügt",replaceResult:"Ersetzt; einige Elemente konnten nicht in die Warteschlange eingereiht werden ({{added}}/{{total}})",exportCanceled:"Export abgebrochen ({{reason}})",exportedToDownloads:"{{filename}} in den Downloads-Ordner exportiert",failedToExportJson:"JSON-Export fehlgeschlagen",importCanceled:"Import abgebrochen ({{reason}})",failedToImportJson:"JSON-Import fehlgeschlagen"},dialogs:{saveSnapshot:{title:"Snapshot speichern",message:"Diesen Snapshot benennen",confirmLabel:"Speichern",cancelLabel:"Abbrechen"},deleteSnapshot:{title:"Snapshot löschen",message:"Diesen Snapshot löschen? Dies kann nicht rückgängig gemacht werden.",confirmLabel:"Löschen"},clearAutomaticSnapshots:{title:"Automatische Snapshots löschen",message:"Alle {{count}} automatischen Snapshots löschen? Dies kann nicht rückgängig gemacht werden.",confirmLabel:"Alle löschen"},saveCurrentQueue:{title:"Aktuelle Warteschlange speichern?",message:"Einen manuellen Snapshot der aktuellen Warteschlange erstellen, bevor sie ersetzt wird?",confirmLabel:"Snapshot speichern",cancelLabel:"Überspringen",extraLabel:"Abbrechen"},importSettings:{title:"Einstellungen importieren",message:"Dies wird deine aktuellen Einstellungen überschreiben. Bist du sicher?",confirmLabel:"Importieren"}},errors:{failedToAddTopbarButton:"Topbar-Button konnte nicht hinzugefügt werden",failedToAddContextMenuItem:"Kontextmenü-Element konnte nicht hinzugefügt werden",failedToAddKeyboardShortcut:"Tastenkürzel konnte nicht hinzugefügt werden"}},es:{ui:{buttons:{save:"Guardar",cancel:"Cancelar",confirm:"Confirmar",delete:"Eliminar",export:"Exportar",import:"Importar",refresh:"Actualizar",view:"Ver",hide:"Ocultar",rename:"Renombrar",resetName:"Restablecer nombre",clearAll:"Limpiar todo",exportAll:"Exportar todo",saveNow:"Guardar ahora",replaceQueue:"Reemplazar cola",appendToQueue:"Añadir a la cola",exportToPlaylist:"Exportar a playlist",exportSettings:"Exportar configuración",importSnapshots:"Importar instantáneas",importSettings:"Importar configuración"},labels:{snapshotName:"Nombre de instantánea",toggleItems:"Alternar elementos",replaceQueue:"Reemplazar la cola actual",appendQueue:"Añadir elementos faltantes a la cola",exportToPlaylist:"Exportar a playlist",renameSnapshot:"Renombrar instantánea",resetName:"Restablecer nombre",deleteSnapshot:"Eliminar instantánea",exportSettings:"Exportar configuración a un archivo JSON",importSnapshots:"Importar instantáneas desde un archivo JSON",importSettings:"Importar configuración desde un archivo JSON",exportAllManuals:"Exportar todo",exportAllAutos:"Exportar todo",clearAllAutos:"Limpiar todo",saveNewManual:"Guardar ahora"},sections:{manualSnapshots:"Instantáneas Manuales",manualSnapshotsCaption:"Tus colas guardadas para más tarde",automaticSnapshots:"Instantáneas Automáticas",automaticSnapshotsCaption:"Capturadas en segundo plano",settings:"Configuración",settingsCaption:"Personaliza tu experiencia"},empty:{noManualSnapshots:"Aún no hay instantáneas manuales",noAutomaticSnapshots:"Aún no hay instantáneas automáticas",noSnapshots:"Aún no hay instantáneas"},itemSingular:"elemento",itemPlural:"elementos",includesLocal:"incluye archivos locales",loading:"Cargando…",failedToLoadItems:"No se pudieron cargar los elementos"},snapshots:{types:{auto:"Auto",manual:"Manual"},actions:{exporting:"Exportando…",appending:"Añadiendo…",replacing:"Reemplazando…"}},settings:{autoEnabled:"Habilitar instantáneas automáticas",autoMode:"Modo",timeBased:"Basado en tiempo",queueChanges:"Cambios de cola",experimental:"¡Experimental!",experimentalTooltip:"Este modo puede crear muchas instantáneas similares (por ejemplo, al encolar varias canciones)",onlyNewItems:"Verificar elementos nuevos",onlyNewItemsDescription:"Solo se activa cuando hay una nueva canción que no estaba en la instantánea anterior.",equalQueuesNote:"Las colas iguales nunca se guardan como instantáneas automáticas.",queueWarnEnabled:"Advertir cuando la cola esté casi llena",queueWarnDescription:"Límite heurístico; incluye la pista actual. Ajustar si es necesario.",promptManualBeforeReplace:"Preguntar para guardar instantánea manual antes de reemplazar cola",promptManualDescription:"Ofrece guardar la cola actual antes de sobrescribirla.",interval:"Intervalo (minutos)",intervalDescription:"Mínimo 0,5 (30 segundos)",maxAutomaticSnapshots:"Máx. instantáneas automáticas",maxAutomaticDescription:"Las instantáneas más antiguas se eliminan. Ten cuidado al cambiar esto",queueMaxSize:"Tamaño máximo de cola",queueWarnThreshold:"Advertir cuando espacios restantes ≤",language:"Idioma",languageDescription:"Anular el idioma detectado automáticamente",autoDetected:"Detectado automáticamente"},toasts:{snapshotSaved:"Instantánea guardada",snapshotDeleted:"Instantánea eliminada: {{name}}",clearedAutomaticSnapshots:"{{count}} instantáneas automáticas eliminadas",exportedToPlaylist:"Exportado a {{name}}",addedToQueue:"{{count}} {{plural}} añadidos a la cola",queueReplaced:"Cola reemplazada ({{count}} elementos)",settingsImported:"Configuración importada exitosamente.",snapshotsImported:"{{count}} nuevas {{plural}} importadas.",noQueueFound:"No se encontró cola. Si crees que esto es un error, intenta reproducir y pausar una pista.",nothingToExport:"Nada que exportar",snapshotEmpty:"La instantánea está vacía",allItemsAlreadyInQueue:"Todos los elementos de la instantánea ya están en la cola",failedToSaveSnapshot:"No se pudo guardar la instantánea",failedToExport:"Falló la exportación a playlist",failedToAppend:"Falló al añadir a la cola",failedToReplace:"Falló al reemplazar la cola",failedToStartPlayback:"No se pudo iniciar la reproducción",failedToSaveAutomatic:"No se pudo guardar una instantánea automática",failedToStartQueueWatcher:"No se pudo iniciar el observador de actualización de cola",failedToStartCapacityWatcher:"No se pudo iniciar el observador de capacidad",queueNearlyFull:"Cola casi llena ({{used}}/{{max}})",nameCannotBeEmpty:"El nombre no puede estar vacío",nameMustDifferFromDefault:"El nombre debe diferir de la sugerencia por defecto",noAutomaticSnapshotsToClear:"No hay instantáneas automáticas para limpiar",someImportedSnapshotsInvalid:"Algunas instantáneas importadas eran inválidas y se han omitido.",noValidSnapshotsToImport:"No hay instantáneas válidas para importar.",allSnapshotsAlreadyExist:"Todas las instantáneas ya existen.",invalidSettingsFile:"Formato de archivo de configuración inválido.",exportResult:"Exportado; algunas pistas no se pudieron añadir ({{added}}/{{total}})",appendResult:"{{added}}/{{total}} elementos añadidos a la cola",replaceResult:"Reemplazado; algunos elementos no se pudieron encolar ({{added}}/{{total}})",exportCanceled:"Exportación cancelada ({{reason}})",exportedToDownloads:"{{filename}} exportado a la carpeta de Descargas",failedToExportJson:"Falló la exportación JSON",importCanceled:"Importación cancelada ({{reason}})",failedToImportJson:"Falló la importación JSON"},dialogs:{saveSnapshot:{title:"Guardar instantánea",message:"Nombra esta instantánea",confirmLabel:"Guardar",cancelLabel:"Cancelar"},deleteSnapshot:{title:"Eliminar instantánea",message:"¿Eliminar esta instantánea? Esto no se puede deshacer.",confirmLabel:"Eliminar"},clearAutomaticSnapshots:{title:"Limpiar instantáneas automáticas",message:"¿Eliminar todas las {{count}} instantáneas automáticas? Esto no se puede deshacer.",confirmLabel:"Limpiar todo"},saveCurrentQueue:{title:"¿Guardar cola actual?",message:"¿Crear una instantánea manual de la cola actual antes de reemplazarla?",confirmLabel:"Guardar instantánea",cancelLabel:"Omitir",extraLabel:"Cancelar"},importSettings:{title:"Importar Configuración",message:"Esto sobrescribirá tu configuración actual. ¿Estás seguro?",confirmLabel:"Importar"}},errors:{failedToAddTopbarButton:"no se pudo añadir botón de barra superior",failedToAddContextMenuItem:"no se pudo añadir elemento del menú contextual",failedToAddKeyboardShortcut:"no se pudo añadir atajo de teclado"}},fr:{ui:{buttons:{save:"Enregistrer",cancel:"Annuler",confirm:"Confirmer",delete:"Supprimer",export:"Exporter",import:"Importer",refresh:"Actualiser",view:"Voir",hide:"Masquer",rename:"Renommer",resetName:"Réinitialiser le nom",clearAll:"Tout effacer",exportAll:"Tout exporter",saveNow:"Enregistrer maintenant",replaceQueue:"Remplacer la file",appendToQueue:"Ajouter à la file",exportToPlaylist:"Exporter vers playlist",exportSettings:"Exporter les paramètres",importSnapshots:"Importer les instantanés",importSettings:"Importer les paramètres"},labels:{snapshotName:"Nom de l'instantané",toggleItems:"Basculer les éléments",replaceQueue:"Remplacer la file actuelle",appendQueue:"Ajouter les éléments manquants à la file",exportToPlaylist:"Exporter vers playlist",renameSnapshot:"Renommer l'instantané",resetName:"Réinitialiser le nom",deleteSnapshot:"Supprimer l'instantané",exportSettings:"Exporter les paramètres vers un fichier JSON",importSnapshots:"Importer les instantanés depuis un fichier JSON",importSettings:"Importer les paramètres depuis un fichier JSON",exportAllManuals:"Tout exporter",exportAllAutos:"Tout exporter",clearAllAutos:"Tout effacer",saveNewManual:"Enregistrer maintenant"},sections:{manualSnapshots:"Instantanés Manuels",manualSnapshotsCaption:"Vos files sauvegardées pour plus tard",automaticSnapshots:"Instantanés Automatiques",automaticSnapshotsCaption:"Capturés en arrière-plan",settings:"Paramètres",settingsCaption:"Personnalisez votre expérience"},empty:{noManualSnapshots:"Aucun instantané manuel pour le moment",noAutomaticSnapshots:"Aucun instantané automatique pour le moment",noSnapshots:"Aucun instantané pour le moment"},itemSingular:"élément",itemPlural:"éléments",includesLocal:"inclut des fichiers locaux",loading:"Chargement…",failedToLoadItems:"Impossible de charger les éléments"},snapshots:{types:{auto:"Auto",manual:"Manuel"},actions:{exporting:"Exportation…",appending:"Ajout…",replacing:"Remplacement…"}},settings:{autoEnabled:"Activer les instantanés automatiques",autoMode:"Mode",timeBased:"Basé sur le temps",queueChanges:"Changements de file",experimental:"Expérimental !",experimentalTooltip:"Ce mode peut créer de nombreux instantanés similaires (par exemple lors de l'ajout de plusieurs chansons)",onlyNewItems:"Vérifier les nouveaux éléments",onlyNewItemsDescription:"Ne se déclenche que lorsqu'il y a une nouvelle chanson qui n'était pas dans l'instantané précédent.",equalQueuesNote:"Les files identiques ne sont jamais sauvegardées comme instantanés automatiques.",queueWarnEnabled:"Avertir quand la file est presque pleine",queueWarnDescription:"Limite heuristique ; inclut la piste actuelle. Ajuster si nécessaire.",promptManualBeforeReplace:"Demander de sauvegarder un instantané manuel avant de remplacer la file",promptManualDescription:"Propose de sauvegarder la file actuelle avant de la remplacer.",interval:"Intervalle (minutes)",intervalDescription:"Minimum 0,5 (30 secondes)",maxAutomaticSnapshots:"Max instantanés automatiques",maxAutomaticDescription:"Les instantanés plus anciens sont supprimés. Attention lors du changement",queueMaxSize:"Taille max de la file",queueWarnThreshold:"Avertir quand emplacements restants ≤",language:"Langue",languageDescription:"Remplacer la langue détectée automatiquement",autoDetected:"Détecté automatiquement"},toasts:{snapshotSaved:"Instantané enregistré",snapshotDeleted:"Instantané supprimé : {{name}}",clearedAutomaticSnapshots:"{{count}} instantanés automatiques effacés",exportedToPlaylist:"Exporté vers {{name}}",addedToQueue:"{{count}} {{plural}} ajoutés à la file",queueReplaced:"File remplacée ({{count}} éléments)",settingsImported:"Paramètres importés avec succès.",snapshotsImported:"{{count}} nouveaux {{plural}} importés.",noQueueFound:"Aucune file trouvée. Si vous pensez que c'est une erreur, essayez de lire et mettre en pause une piste.",nothingToExport:"Rien à exporter",snapshotEmpty:"L'instantané est vide",allItemsAlreadyInQueue:"Tous les éléments de l'instantané sont déjà dans la file",failedToSaveSnapshot:"Impossible de sauvegarder l'instantané",failedToExport:"Échec de l'exportation vers la playlist",failedToAppend:"Échec de l'ajout à la file",failedToReplace:"Échec du remplacement de la file",failedToStartPlayback:"Impossible de démarrer la lecture",failedToSaveAutomatic:"Impossible de sauvegarder un instantané automatique",failedToStartQueueWatcher:"Impossible de démarrer le surveilleur de mise à jour de file",failedToStartCapacityWatcher:"Impossible de démarrer le surveilleur de capacité",queueNearlyFull:"File presque pleine ({{used}}/{{max}})",nameCannotBeEmpty:"Le nom ne peut pas être vide",nameMustDifferFromDefault:"Le nom doit différer de la suggestion par défaut",noAutomaticSnapshotsToClear:"Aucun instantané automatique à effacer",someImportedSnapshotsInvalid:"Certains instantanés importés étaient invalides et ont été ignorés.",noValidSnapshotsToImport:"Aucun instantané valide à importer.",allSnapshotsAlreadyExist:"Tous les instantanés existent déjà.",invalidSettingsFile:"Format de fichier de paramètres invalide.",exportResult:"Exporté ; certaines pistes n'ont pas pu être ajoutées ({{added}}/{{total}})",appendResult:"{{added}}/{{total}} éléments ajoutés à la file",replaceResult:"Remplacé ; certains éléments n'ont pas pu être mis en file ({{added}}/{{total}})",exportCanceled:"Exportation annulée ({{reason}})",exportedToDownloads:"{{filename}} exporté vers le dossier Téléchargements",failedToExportJson:"Échec de l'exportation JSON",importCanceled:"Importation annulée ({{reason}})",failedToImportJson:"Échec de l'importation JSON"},dialogs:{saveSnapshot:{title:"Enregistrer l'instantané",message:"Nommer cet instantané",confirmLabel:"Enregistrer",cancelLabel:"Annuler"},deleteSnapshot:{title:"Supprimer l'instantané",message:"Supprimer cet instantané ? Cette action ne peut pas être annulée.",confirmLabel:"Supprimer"},clearAutomaticSnapshots:{title:"Effacer les instantanés automatiques",message:"Supprimer tous les {{count}} instantanés automatiques ? Cette action ne peut pas être annulée.",confirmLabel:"Tout effacer"},saveCurrentQueue:{title:"Enregistrer la file actuelle ?",message:"Créer un instantané manuel de la file actuelle avant de la remplacer ?",confirmLabel:"Enregistrer l'instantané",cancelLabel:"Ignorer",extraLabel:"Annuler"},importSettings:{title:"Importer les Paramètres",message:"Cela remplacera vos paramètres actuels. Êtes-vous sûr ?",confirmLabel:"Importer"}},errors:{failedToAddTopbarButton:"impossible d'ajouter le bouton de barre supérieure",failedToAddContextMenuItem:"impossible d'ajouter l'élément du menu contextuel",failedToAddKeyboardShortcut:"impossible d'ajouter le raccourci clavier"}}},r=D(),ee(),E=null,A=new Map,S=16,Q=new Map,q=!1,l=a=null,F=new Set,j=new Map,w=async function(){for(var e;null==Spicetify||!Spicetify.showNotification||null==Spicetify||!Spicetify.CosmosAsync||null==Spicetify||!Spicetify.LocalStorage;)await new Promise(e=>setTimeout(e,100));let t=L(),a=Ce(),n=(a.primeFromExisting(),a.applyAutoMode(t),Ne(()=>t)),s=(n.start(),{getSettings:()=>t,setSettings:e=>{t=e,Spicetify.LocalStorage.set(i,JSON.stringify(e)),a.applyAutoMode(e),n.checkAndWarnOnce()}});try{null!=(e=null==Spicetify?void 0:Spicetify.Topbar)&&e.Button&&new Spicetify.Topbar.Button(W,"queue",()=>Le(s),void 0,!0)}catch(e){console.error(W+": "+J("errors.failedToAddTopbarButton"))}try{new Spicetify.ContextMenu.Item(W,()=>Le(s),(e,t,a)=>{var n,s,i;try{if(a){var o=Spicetify.URI.fromString(a);if((null==o?void 0:o.type)===Spicetify.URI.Type.QUEUE)return!0;if(a.includes(":queue"))return!0}return((null==(i=null==(s=null==(n=Spicetify.Platform)?void 0:n.History)?void 0:s.location)?void 0:i.pathname)||"").includes("queue")}catch(e){}return!1},"queue").register()}catch(e){console.error(W+": "+J("errors.failedToAddContextMenuItem"))}try{Spicetify.Keyboard.registerShortcut({key:"q",ctrl:!0,alt:!0},()=>Le(s))}catch(e){console.error(W+": "+J("errors.failedToAddKeyboardShortcut"))}},(async()=>{await w()})(),(async()=>{var e;document.getElementById("queueDmanager")||((e=document.createElement("style")).id="queueDmanager",e.textContent=String.raw`
  .qs-container{display:flex;flex-direction:column;gap:18px;overflow:visible}.qs-header{display:flex;justify-content:space-between;align-items:center;padding:16px;border-radius:12px;background:linear-gradient(135deg,rgba(52,211,153,.16),rgba(37,99,235,.12));border:1px solid rgba(255,255,255,.06);gap:12px}.qs-header-title{display:flex;align-items:center;gap:12px;font-weight:600}.qs-header-text{display:flex;flex-direction:column;gap:4px}.qs-header-app{display:flex;align-items:center;gap:10px}.qs-header-badges{display:inline-flex;gap:6px;align-items:center}.qs-header-icon{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;background:rgba(0,0,0,.4)}.qs-header-name{font-size:18px}.qs-header-sub,.qs-header-sub-alt{font-size:13px;opacity:.75}.qs-actions{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}.qs-header-actions{display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-end;max-width:400px}.qs-header-actions .qs-btn{flex:0 0 auto;max-width:calc(50% - 4px)}.qs-settings{display:flex;flex-direction:column;gap:18px;padding:16px;border-radius:12px;background:var(--spice-section-bg,rgba(255,255,255,.05));border:1px solid rgba(255,255,255,.05);overflow:visible;max-width:100%;box-sizing:border-box;transition:padding-bottom .3s ease}.qs-settings-header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:8px}.qs-settings-toggle{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:50%;background:0 0;border:1px solid transparent;cursor:pointer;padding:0;transition:background .15s ease,transform .12s ease,border .12s ease;color:inherit}.qs-settings-toggle:hover{background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.12)}.qs-settings-toggle:focus-visible{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-settings-toggle .qs-svg-icon{width:16px;height:16px;transition:transform .2s ease}.qs-settings-content{display:grid;grid-template-columns:1fr 1fr;gap:18px;transition:max-height .4s cubic-bezier(.4, 0, .2, 1),opacity .3s ease;max-height:800px;opacity:1}.qs-settings.collapsed .qs-settings-content{max-height:0;opacity:0;pointer-events:none}.qs-settings.collapsed{padding-bottom:0}.qs-settings:not(.collapsed) .qs-settings-toggle .qs-svg-icon{transform:rotate(90deg)}.qs-right{display:flex;flex-direction:column;gap:16px}.qs-setting{display:flex;flex-direction:column;gap:6px}.qs-setting label{font-weight:600;display:inline-flex;align-items:center;gap:8px}.qs-dim{color:rgba(255,255,255,.7);font-size:12px}.qs-row{display:flex;flex-direction:column;gap:12px;padding:12px 16px;border-radius:10px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.04);box-shadow:0 10px 30px rgba(0,0,0,.25)}.qs-row+.qs-row{margin-top:12px}.qs-row-main{display:flex;flex-direction:column;gap:10px}.qs-row-title{font-weight:600;display:inline-flex;align-items:center;gap:8px}.qs-title-actions{display:inline-flex;align-items:center;gap:6px;margin-left:8px}.qs-icon-btn{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:50%;background:0 0;border:1px solid transparent;cursor:pointer;padding:0;transition:background .15s ease,transform .12s ease,border .12s ease;color:inherit}.qs-icon-btn:hover{background:linear-gradient(135deg,rgba(96,165,250,.35),rgba(59,130,246,.2));border-color:rgba(96,165,250,.4);transform:translateY(-1px)}.qs-icon-btn:focus-visible{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-icon-btn.danger{color:rgba(248,113,113,.85)}.qs-icon-btn.danger:hover{background:rgba(248,113,113,.16);border-color:rgba(248,113,113,.25);color:#f87171}.qs-icon-btn .qs-svg-icon{width:16px;height:16px}.qs-row-meta{display:flex;flex-wrap:wrap;gap:6px;font-size:12px;align-items:center}.qs-row-actions{display:flex;flex-wrap:wrap;gap:10px;padding:2px 0}.qs-row-actions .qs-btn{flex:0 0 auto;justify-content:flex-start}.qs-btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:6px 10px;border-radius:8px;background:rgba(255,255,255,.08);color:inherit;border:1px solid transparent;cursor:pointer;font-weight:600;transition:transform .12s ease,box-shadow .12s ease,border .12s ease;text-decoration:none}.qs-btn.primary{background:linear-gradient(135deg,rgba(96,165,250,.9),rgba(59,130,246,.9));border-color:rgba(96,165,250,.35)}.qs-btn.subtle{background:rgba(255,255,255,.04);border-color:rgba(255,255,255,.08)}.qs-btn.danger{background:rgba(248,113,113,.16);border-color:rgba(248,113,113,.25)}.qs-btn:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.25)}.qs-btn:focus-visible{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-btn-icon{display:inline-flex;align-items:center;justify-content:center}.qs-btn-label{white-space:nowrap}.qs-svg-icon{display:block;fill:currentColor;width:16px;height:16px}.qs-section-card{display:flex;flex-direction:column;gap:12px;padding:16px;border-radius:12px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.05)}.qs-section-head{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:center}.qs-section-heading{display:inline-flex;align-items:center;gap:12px;font-weight:600}.qs-section-text{display:flex;flex-direction:column;gap:2px}.qs-section-name{font-size:16px}.qs-section-caption{font-size:12px;opacity:.75}.qs-section-body{display:flex;flex-direction:column}.qs-empty{opacity:.6;font-size:13px;padding:12px}.qs-input{padding:8px 10px;border-radius:8px;background:rgba(0,0,0,.25);color:inherit;border:1px solid rgba(255,255,255,.1);font-size:14px}.qs-input:disabled{opacity:.6;cursor:not-allowed}.qs-checkbox{display:inline-flex;align-items:center;gap:10px}.qs-radio-group{display:flex;flex-wrap:wrap;gap:12px;align-items:flex-start;margin-top:6px;max-width:100%}.qs-radio-label{display:flex;align-items:flex-start;gap:6px;min-width:0}.qs-radio-label span{display:inline-flex;align-items:center;gap:6px;flex-wrap:wrap}.qs-icon{display:inline-flex;align-items:center;justify-content:center;width:18px;height:18px;border-radius:50%;font-size:12px;line-height:16px;margin-left:4px;position:relative;flex-shrink:0}.qs-icon-glyph{opacity:.7;transition:opacity .12s ease-in-out}.qs-icon:hover .qs-icon-glyph{opacity:1}.qs-icon>.qs-tooltip{position:absolute;left:50%;transform:translateX(-50%);bottom:calc(100% + 6px);white-space:normal;word-wrap:break-word;overflow-wrap:break-word;text-align:left;padding:10px 12px;border-radius:6px;font-size:12px;background:#121212;border:1px solid rgba(255,255,255,.08);box-shadow:0 4px 14px rgba(0,0,0,.35);color:var(--spice-text,#fff);pointer-events:none;opacity:0;transition:opacity .12s ease-in-out;z-index:9999;min-width:200px;max-width:400px}.qs-icon:hover>.qs-tooltip{opacity:1}.qs-tooltip .qs-tooltip-emph{color:#ff4e4e}.qs-radio:disabled{cursor:not-allowed}.qs-radio:disabled+span{opacity:.6;cursor:not-allowed}.qs-inline-input{padding:6px 8px;border-radius:6px;border:1px solid rgba(255,255,255,.2);background:rgba(0,0,0,.45);color:inherit;font-size:14px;width:100%;max-width:240px}.qs-dialog-input{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,.18);background:rgba(0,0,0,.35);color:inherit;font-size:14px}.qs-items{margin:10px 0 14px 0;padding:12px;border-left:2px solid rgba(59,130,246,.35);background:rgba(59,130,246,.12);border-radius:8px}.qs-items-body{display:flex;flex-direction:column;gap:4px;font-size:13px;max-height:240px;overflow:auto}.qs-pill{display:inline-flex;align-items:center;justify-content:center;padding:2px 8px;border-radius:999px;background:rgba(255,255,255,.12);font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.qs-pill--accent{background:linear-gradient(135deg,rgba(59,130,246,.85),rgba(99,102,241,.85))}.qs-pill--version{background:rgba(255,255,255,.12)}.qs-pill--channel{background:rgba(248,113,113,.35)}.qs-confirm-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:100;backdrop-filter:blur(2px)}.qs-confirm-dialog{background:var(--spice-section-bg,rgba(32,32,32,.95));border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:20px 22px;max-width:360px;width:min(90vw,360px);box-shadow:0 18px 36px rgba(0,0,0,.45);display:flex;flex-direction:column;gap:16px}.qs-confirm-title{font-size:16px;font-weight:600}.qs-confirm-message{font-size:13px;opacity:.85;line-height:1.5}.qs-confirm-actions{display:flex;gap:10px;justify-content:flex-end}@media (max-width:860px){.qs-header{flex-direction:column;align-items:flex-start}.qs-actions{width:100%;justify-content:flex-start}.qs-header-actions{width:100%;max-width:none;justify-content:flex-start}.qs-header-actions .qs-btn{max-width:100%}.qs-row{grid-template-columns:1fr}.qs-row-actions{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}.qs-radio-group{flex-direction:column;align-items:flex-start;gap:8px}}.qs-toast-container{position:fixed;top:24px;left:24px;display:flex;flex-direction:column;gap:12px;z-index:2147483646;pointer-events:none}.qs-toast{display:flex;align-items:flex-start;gap:10px;min-width:240px;max-width:min(360px,90vw);padding:12px 14px;border-radius:10px;background:rgba(32,32,32,.92);border:1px solid rgba(255,255,255,.07);box-shadow:0 14px 32px rgba(0,0,0,.45);color:var(--spice-text,#fff);font-size:13px;line-height:1.45;pointer-events:auto;transform:translateY(-4px);opacity:0;transition:transform .2s ease,opacity .2s ease;position:relative;overflow:hidden}.qs-toast--enter{opacity:1;transform:translateY(0)}.qs-toast--exit{opacity:0;transform:translateY(-4px)}.qs-toast--swipe-exit{opacity:0;transform:translateX(-160px);transition:transform .2s ease,opacity .2s ease}.qs-toast--dragging{transition:none!important}.qs-toast:focus-within{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-toast-message{flex:1 1 auto;padding-right:8px}.qs-toast-close{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:none;color:inherit;font-size:18px;line-height:1;cursor:pointer;padding:0 2px;opacity:.7;transition:opacity .12s ease}.qs-toast-close:focus-visible,.qs-toast-close:hover{opacity:1}.qs-toast-close:focus-visible{outline:2px solid rgba(96,165,250,.8);outline-offset:2px}.qs-toast-close--hidden{display:none}.qs-toast-progress{position:absolute;left:10px;right:10px;bottom:8px;height:3px;border-radius:999px;background:rgba(255,255,255,.15);transform-origin:left;transition:opacity .16s ease;opacity:0;pointer-events:none}.qs-toast-progress__bar{width:100%;height:100%;border-radius:inherit;background:rgba(255,255,255,.7);transform-origin:left;transform:scaleX(0);transition:transform 80ms linear}.qs-toast-progress--hidden{opacity:0}.qs-toast-progress--visible{opacity:1}.qs-toast--success .qs-toast-progress__bar{background:rgba(187,247,208,.85)}.qs-toast--danger .qs-toast-progress__bar{background:rgba(254,202,202,.9)}.qs-toast--warning .qs-toast-progress__bar{background:rgba(30,41,59,.9)}.qs-toast--warning .qs-toast-progress{background:rgba(15,23,42,.35)}.qs-toast--success{background:linear-gradient(135deg,rgba(34,197,94,.85),rgba(16,185,129,.85));border-color:rgba(34,197,94,.45)}.qs-toast--danger{background:linear-gradient(135deg,rgba(248,113,113,.92),rgba(220,38,38,.92));border-color:rgba(248,113,113,.55)}.qs-toast--warning{background:linear-gradient(135deg,rgba(250,204,21,.9),rgba(251,191,36,.9));border-color:rgba(234,179,8,.55);color:#1f1f1f}.qs-toast-content{flex:1 1 auto;display:flex;flex-direction:column;gap:4px}.qs-toast-title{font-weight:700;font-size:14px;line-height:1.3}.qs-toast--warning .qs-toast-title{color:#1f1f1f}.qs-toast-message{font-size:13px;line-height:1.45}@media (max-width:860px){.qs-toast-container{left:50%;transform:translateX(-50%);top:12px;gap:10px}.qs-toast{max-width:min(420px,92vw)}}
      `.trim(),document.head.appendChild(e))})()})();